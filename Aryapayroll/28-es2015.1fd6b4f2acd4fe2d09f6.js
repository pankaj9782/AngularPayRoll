(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{Fb0g:function(t,e,s){"use strict";s.r(e),s.d(e,"SubUserModule",(function(){return T}));var n=s("ofXK"),r=s("3Pt+"),o=s("tyNb"),i=s("fXoL");let a=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Nb({type:t,selectors:[["app-sub-user"]],decls:1,vars:0,template:function(t,e){1&t&&i.Ub(0,"router-outlet")},directives:[o.g],styles:[""]}),t})();var c=s("tk/3"),b=s("z6cu"),l=s("JIr8"),u=s("AytR");let d=(()=>{class t{constructor(t){this.http=t,this.endpoint=u.a.apiBaseUrl,this.headers=(new c.c).set("Content-Type","application/x-www-form-urlencoded")}addSubUsersData(t){try{t.redirectUrl=u.a.appBaseUrl+"/users/generate-password";const e=localStorage.getItem("token");return this.http.post(`${this.endpoint}/user/add-subuser/${e}`,t).pipe(Object(l.a)(this.errorMgmt))}catch(e){console.log(e)}}getSubUsersListData(){try{const t=localStorage.getItem("token");return this.http.get(`${this.endpoint}/user/list-subusers/${t}`).pipe(Object(l.a)(this.errorMgmt))}catch(t){console.log(t)}}removeSubUsersData(t){try{const e=localStorage.getItem("token");return this.http.delete(`${this.endpoint}/user/delete-subuser/${e}/${t}`).pipe(Object(l.a)(this.errorMgmt))}catch(e){console.log(e)}}submitUpdateSubUserData(t,e){try{const s=localStorage.getItem("token");return this.http.post(`${this.endpoint}/user/update-subuser/${s}/${e}`,t).pipe(Object(l.a)(this.errorMgmt))}catch(s){console.log(s)}}errorMgmt(t){try{let e="";return e=t.error instanceof ErrorEvent?t.error.message:`Error code:${t.status}\nMessage:${e}`,console.log(e),Object(b.a)(e)}catch(e){console.log(e)}}subUserDetails(t){try{return this.http.get(`${this.endpoint}/user/subuser-details/${t}`).pipe(Object(l.a)(this.errorMgmt))}catch(e){console.log(e)}}}return t.\u0275fac=function(e){return new(e||t)(i.dc(c.a))},t.\u0275prov=i.Pb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var g=s("JqCM"),p=s("cnwL"),h=s("8fwW");function m(t,e){if(1&t&&(i.Zb(0,"p",25),i.Zb(1,"strong"),i.Ic(2),i.Yb(),i.Yb()),2&t){const t=i.jc();i.Hb(2),i.Jc(t.errMsg)}}function f(t,e){if(1&t&&(i.Zb(0,"p",26),i.Zb(1,"strong"),i.Ic(2),i.Yb(),i.Yb()),2&t){const t=i.jc();i.Hb(2),i.Jc(t.successMsg)}}function v(t,e){if(1&t&&(i.Zb(0,"div",28),i.Ic(1),i.Yb()),2&t){const t=i.jc().$implicit;i.Hb(1),i.Kc(" ",t.message," ")}}function M(t,e){if(1&t&&(i.Zb(0,"div"),i.Gc(1,v,2,1,"div",27),i.Yb()),2&t){const t=e.$implicit,s=i.jc();i.Hb(1),i.pc("ngIf",s.subUserForm.get("name").hasError(t.type)&&(s.subUserForm.get("name").dirty||s.subUserForm.get("name").touched))}}function Z(t,e){if(1&t&&(i.Zb(0,"div",30),i.Ic(1),i.Yb()),2&t){const t=i.jc().$implicit;i.Hb(1),i.Kc(" ",t.message," ")}}function Y(t,e){if(1&t&&(i.Zb(0,"div"),i.Gc(1,Z,2,1,"div",29),i.Yb()),2&t){const t=e.$implicit,s=i.jc();i.Hb(1),i.pc("ngIf",s.subUserForm.get("phone").hasError(t.type)&&(s.subUserForm.get("phone").dirty||s.subUserForm.get("phone").touched))}}function y(t,e){if(1&t&&(i.Zb(0,"div",30),i.Ic(1),i.Yb()),2&t){const t=i.jc().$implicit;i.Hb(1),i.Kc(" ",t.message," ")}}function O(t,e){if(1&t&&(i.Zb(0,"div"),i.Gc(1,y,2,1,"div",29),i.Yb()),2&t){const t=e.$implicit,s=i.jc();i.Hb(1),i.pc("ngIf",s.subUserForm.get("email").hasError(t.type)&&(s.subUserForm.get("email").dirty||s.subUserForm.get("email").touched))}}function I(t,e){if(1&t&&(i.Zb(0,"option",31),i.Ic(1),i.Yb()),2&t){const t=e.$implicit;i.qc("value",t._id),i.Hb(1),i.Kc(" ",t.title," ")}}function C(t,e){if(1&t&&(i.Zb(0,"div",30),i.Ic(1),i.Yb()),2&t){const t=i.jc().$implicit;i.Hb(1),i.Kc(" ",t.message," ")}}function P(t,e){if(1&t&&(i.Zb(0,"div"),i.Gc(1,C,2,1,"div",32),i.Yb()),2&t){const t=e.$implicit,s=i.jc();i.Hb(1),i.pc("ngIf",s.subUserForm.get("roleId").hasError(t.type)&&(s.subUserForm.get("roleId").dirty||s.subUserForm.get("roleId").touched))}}let U=(()=>{class t{constructor(t,e,s,n,r,o,i){this.fb=t,this.api=e,this.ngZone=s,this.router=n,this.spinner=r,this.util=o,this.roleAPI=i,this.successMessage=!1,this.errorMsg=!1,this.genderList=["Male","Female","Others","N/A"],this.validationMessage={name:[{type:"required",message:"Name is required"},{type:"pattern",message:"Not a valid name"}],email:[{type:"required",message:"Email is required"},{type:"pattern",message:"Enter a valid email"}],phone:[{type:"required",message:"Phone No. is required"},{type:"minlength",message:"Not a phone number "},{type:"maxlength",message:"Phone no. is too large"},{type:"pattern",message:"Phone Number not valid"}],roleId:[{type:"required",message:"Role is required"}]}}ngOnInit(){this.subUserFormValidation(),this.rolePermission()}subUserFormValidation(){try{this.subUserForm=this.fb.group({name:new r.f("",r.v.compose([r.v.required,r.v.pattern("^[a-zA-Z ]*$")])),phone:new r.f("",r.v.compose([r.v.required,r.v.minLength(10),r.v.maxLength(15),r.v.pattern("^-?[0-9]\\d*(\\.\\d{1,2})?$")])),email:new r.f("",r.v.compose([r.v.required,r.v.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])),roleId:new r.f("",r.v.required)})}catch(t){console.log(t)}}subUserFormData(){try{let t=this.util.cleanFormLevelOne(this.subUserForm);this.spinner.show(),this.api.addSubUsersData(t.value).subscribe(t=>{"success"===t.status||200===t.status?(this.successMessage=!0,this.errorMsg=!1,this.successMsg=t.message,this.spinner.hide(),setTimeout(()=>{this.handleErrroMessage(),this.ngZone.run(()=>this.router.navigateByUrl("/pages/sub-user/show-subusers-list"))},7e3)):"error"==t.status&&(this.subUserForm.get("email").setValue(""),this.errorMsg=!0,this.successMessage=!1,this.errMsg=t.message,this.spinner.hide(),setTimeout(()=>{this.handleErrroMessage()},2e3))})}catch(t){console.log(t)}}handleErrroMessage(){this.successMessage=!1,this.errorMsg=!1,this.successMsg="",this.errMsg=""}rolePermission(){try{this.roleAPI.listAllRole().subscribe(t=>{"success"===t.status&&(this.rolePermissionInfo=t.data)})}catch(t){console.log(t)}}}return t.\u0275fac=function(e){return new(e||t)(i.Tb(r.e),i.Tb(d),i.Tb(i.E),i.Tb(o.b),i.Tb(g.c),i.Tb(p.a),i.Tb(h.a))},t.\u0275cmp=i.Nb({type:t,selectors:[["app-add-subusers"]],decls:60,vars:9,consts:[[1,"card","card-user"],["bdColor","rgba(51,51,51,0.8)","size","medium","color","#fff","type","ball-scale-ripple-multiple"],[2,"font-size","20px","color","white"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"col-sm-offset-2"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["role","form","novalidate","",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"form-group"],[1,"col-sm-6","control-label"],[2,"color","darkred"],["type","text","id","inputName","placeholder","Enter Full Name","formControlName","name","required","",1,"form-control"],[4,"ngFor","ngForOf"],["type","text","id","inputPhone","placeholder","Enter Phone Number","formControlName","phone",1,"form-control"],[1,"row"],[1,"col-md-6"],["type","email","id","inputEmail","placeholder","Enter Email ","formControlName","email","required","",1,"form-control"],["Name","branchId","formControlName","roleId",1,"dropdown","dropdown-toggle","form-control"],["ng-selected","true","value","","disabled","","selected","",1,"dropdown-item"],["class","dropdown-item",3,"value",4,"ngFor","ngForOf"],[1,"col-sm-offset-2","col-sm-10"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button","routerLink","../show-subusers-list",1,"btn","btn-danger"],[1,"alert","alert-danger"],[1,"alert","alert-success"],["style","color: red;margin-left: 1%;","style","color: red;margin-left: 1%;",4,"ngIf"],[2,"color","red","margin-left","1%"],["style","color:\xa0red;margin-left:\xa014px;","style","color:\xa0red;margin-left:\xa014px;",4,"ngIf"],[2,"color","red","margin-left","14px"],[1,"dropdown-item",3,"value"],["style","color:\xa0red;margin-left:\xa014px;",4,"ngIf"]],template:function(t,e){1&t&&(i.Zb(0,"div",0),i.Zb(1,"ngx-spinner",1),i.Zb(2,"p",2),i.Ic(3,"Loading..."),i.Yb(),i.Yb(),i.Zb(4,"div",3),i.Zb(5,"h2",4),i.Ic(6,"Sub-Users Details"),i.Yb(),i.Yb(),i.Zb(7,"div",5),i.Zb(8,"div",6),i.Gc(9,m,3,1,"p",7),i.Yb(),i.Zb(10,"div",6),i.Gc(11,f,3,1,"p",8),i.Yb(),i.Zb(12,"form",9),i.gc("ngSubmit",(function(){return e.subUserFormData()})),i.Zb(13,"div",10),i.Zb(14,"label",11),i.Zb(15,"b"),i.Ic(16,"Full Name:\xa0"),i.Zb(17,"span",12),i.Ic(18,"*"),i.Yb(),i.Yb(),i.Yb(),i.Zb(19,"div",6),i.Ub(20,"input",13),i.Gc(21,M,2,1,"div",14),i.Yb(),i.Yb(),i.Zb(22,"div",10),i.Zb(23,"label",11),i.Zb(24,"b"),i.Ic(25,"Phone Number:\xa0"),i.Zb(26,"span",12),i.Ic(27,"*"),i.Yb(),i.Yb(),i.Yb(),i.Zb(28,"div",6),i.Ub(29,"input",15),i.Gc(30,Y,2,1,"div",14),i.Yb(),i.Yb(),i.Zb(31,"div",16),i.Zb(32,"div",17),i.Zb(33,"div",10),i.Zb(34,"label",11),i.Zb(35,"b"),i.Ic(36,"Email:\xa0"),i.Zb(37,"span",12),i.Ic(38,"*"),i.Yb(),i.Yb(),i.Yb(),i.Zb(39,"div",6),i.Ub(40,"input",18),i.Gc(41,O,2,1,"div",14),i.Yb(),i.Yb(),i.Yb(),i.Zb(42,"div",17),i.Zb(43,"div",10),i.Zb(44,"label",11),i.Zb(45,"b"),i.Ic(46,"Assign Role:\xa0"),i.Zb(47,"span",12),i.Ic(48,"*"),i.Yb(),i.Yb(),i.Yb(),i.Zb(49,"select",19),i.Zb(50,"option",20),i.Ic(51,"----------Select Role----------"),i.Yb(),i.Gc(52,I,2,2,"option",21),i.Yb(),i.Gc(53,P,2,1,"div",14),i.Yb(),i.Yb(),i.Yb(),i.Zb(54,"div",10),i.Zb(55,"div",22),i.Zb(56,"button",23),i.Ic(57,"Add Subuser"),i.Yb(),i.Zb(58,"button",24),i.Ic(59,"Cancel"),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Yb()),2&t&&(i.Hb(9),i.pc("ngIf",e.errorMsg),i.Hb(2),i.pc("ngIf",e.successMessage),i.Hb(1),i.pc("formGroup",e.subUserForm),i.Hb(9),i.pc("ngForOf",e.validationMessage.name),i.Hb(9),i.pc("ngForOf",e.validationMessage.phone),i.Hb(11),i.pc("ngForOf",e.validationMessage.email),i.Hb(11),i.pc("ngForOf",e.rolePermissionInfo),i.Hb(1),i.pc("ngForOf",e.validationMessage.roleId),i.Hb(3),i.pc("disabled",e.subUserForm.invalid))},directives:[g.a,n.m,r.x,r.o,r.i,r.c,r.n,r.g,r.t,n.l,r.u,r.q,r.w,o.c],styles:["h2[_ngcontent-%COMP%]{text-align:center}"]}),t})();var _=s("PSD3"),w=s.n(_);function F(t,e){if(1&t){const t=i.ac();i.Zb(0,"li",7),i.Zb(1,"strong"),i.Zb(2,"b",8),i.gc("click",(function(){i.Bc(t);const s=e.$implicit;return i.jc().showData(s._id)})),i.Ic(3),i.Yb(),i.Yb(),i.Zb(4,"div",9),i.Zb(5,"i",10),i.gc("click",(function(){i.Bc(t);const s=e.$implicit;return i.jc().showData(s._id)})),i.Yb(),i.Yb(),i.Zb(6,"div",11),i.Zb(7,"table",12),i.Zb(8,"tr"),i.Zb(9,"td"),i.Zb(10,"strong"),i.Ic(11,"Name:"),i.Yb(),i.Yb(),i.Zb(12,"td"),i.Ic(13),i.Yb(),i.Yb(),i.Zb(14,"tr"),i.Zb(15,"td"),i.Zb(16,"strong"),i.Ic(17,"Phone No."),i.Yb(),i.Yb(),i.Zb(18,"td"),i.Ic(19),i.Yb(),i.Yb(),i.Zb(20,"tr"),i.Zb(21,"td"),i.Zb(22,"strong"),i.Ic(23,"Email:"),i.Yb(),i.Yb(),i.Zb(24,"td"),i.Ic(25),i.Yb(),i.Yb(),i.Yb(),i.Zb(26,"div"),i.Zb(27,"a",13),i.Ub(28,"i",14),i.Yb(),i.Zb(29,"button",15),i.gc("click",(function(){i.Bc(t);const s=e.$implicit;return i.jc().deleteSubUserListData(s._id)})),i.Ub(30,"i",16),i.Yb(),i.Yb(),i.Yb(),i.Yb()}if(2&t){const t=e.$implicit,s=i.jc();i.Hb(3),i.Jc((null==t.profile.contactInfo?null:t.profile.contactInfo.firstName)+" "+(null==t.profile.contactInfo?null:t.profile.contactInfo.lastName)),i.Hb(3),i.pc("hidden",s.showCard[t._id]),i.Hb(7),i.Jc((null==t.profile.contactInfo?null:t.profile.contactInfo.firstName)+" "+(null==t.profile.contactInfo?null:t.profile.contactInfo.lastName)),i.Hb(6),i.Jc(t.profile.contactInfo.phone),i.Hb(6),i.Jc(t.local.email),i.Hb(2),i.rc("routerLink","../update-subuser-data/",t._id,"")}}let S=(()=>{class t{constructor(t,e,s,n){this.api=t,this.fb=e,this.ngZone=s,this.router=n,this.showCard={},this.subUsersListData=[]}ngOnInit(){this.getSubUsersList()}getSubUsersList(){try{this.api.getSubUsersListData().subscribe(t=>{if("success"===t.status||200===t.status)if(this.subUsersListData=t.users,0==t.users.length)this.router.navigateByUrl("/pages/sub-user/add-subuser");else{const t=Object.keys(this.subUsersListData).length;for(var e=0;e<t;e++)this.showCard[this.subUsersListData[e]._id]=!0}})}catch(t){console.log(t)}}showData(t){try{this.showCard[""+t]=!this.showCard[""+t]}catch(e){console.log(e)}}deleteSubUserListData(t){try{const e=w.a.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1});e.fire({title:"Are you sure?",text:"You want to delete it",type:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",reverseButtons:!0}).then(s=>{s.value?this.api.removeSubUsersData(t).subscribe(t=>{"success"!==t.status&&200!==t.status||(e.fire("Deleted!",t.message,"success"),this.getSubUsersList())}):s.dismiss===w.a.DismissReason.cancel&&e.fire("Cancelled","Your Data Safe","error")})}catch(e){console.log(e)}}}return t.\u0275fac=function(e){return new(e||t)(i.Tb(d),i.Tb(r.e),i.Tb(i.E),i.Tb(o.b))},t.\u0275cmp=i.Nb({type:t,selectors:[["app-show-subusers-list"]],decls:10,vars:1,consts:[[1,"card"],[1,"card-header",2,"text-align","center"],["routerLink","../add-subuser",1,"btn","btn-primary",2,"float","right"],[1,"fa","fa-plus"],[1,"panel-body"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],[2,"cursor","pointer",3,"click"],[2,"float","right"],[1,"dropdown-toggle",3,"click"],[1,"card",2,"background-color","ghostwhite",3,"hidden"],[1,"table",2,"margin","auto"],[1,"btn","btn-primary",2,"float","right",3,"routerLink"],[1,"fa","fa-pencil-square-o"],["type","button",1,"btn","btn-danger",2,"float","right",3,"click"],[1,"fa","fa-trash"]],template:function(t,e){1&t&&(i.Zb(0,"div",0),i.Zb(1,"div",1),i.Zb(2,"h2"),i.Ic(3,"Sub-Users List"),i.Yb(),i.Zb(4,"a",2),i.Ub(5,"i",3),i.Ic(6,"\xa0 Add User"),i.Yb(),i.Yb(),i.Zb(7,"div",4),i.Zb(8,"ul",5),i.Gc(9,F,31,6,"li",6),i.Yb(),i.Yb(),i.Yb()),2&t&&(i.Hb(9),i.pc("ngForOf",e.subUsersListData))},directives:[o.e,n.l],styles:["i[_ngcontent-%COMP%]{cursor:pointer}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;text-align:left;overflow:hidden}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:1px solid #ecf0f1;padding:10px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-left:1px solid #ecf0f1;border-right:1px solid #ecf0f1}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#4ecdc4}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(2n)   td[_ngcontent-%COMP%]{background-color:#d9f4f2}table[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#fff}table[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:right;font-weight:700}.mobile-header[_ngcontent-%COMP%]{display:none}@media only screen and (max-width:760px){p[_ngcontent-%COMP%]{display:block;font-weight:700}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:not(.total-val), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:not(:first-child), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:not(:first-child){display:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(2n)   td[_ngcontent-%COMP%]:first-child{background-color:#d9f4f2}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(2n)   td[_ngcontent-%COMP%]:not(:first-child), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(odd)   td[_ngcontent-%COMP%]:first-child{background-color:#fff}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:100%;display:block}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:not(:first-child){width:40%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:not(:first-child), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:not(:first-child){transition:transform .4s ease-out;transform:translateY(-9999px);position:relative;z-index:-1}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:not(:first-child){width:60%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{display:block;cursor:pointer}table[_ngcontent-%COMP%]   tr.total[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:25%;display:inline-block}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.total-val[_ngcontent-%COMP%]{display:inline-block;transform:translateY(0);width:75%}}@media only screen and (max-width:300px){table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:not(:first-child), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:not(:first-child){width:50%;font-size:14px}}"]}),t})();function x(t,e){if(1&t&&(i.Zb(0,"p",18),i.Zb(1,"strong"),i.Ic(2),i.Yb(),i.Yb()),2&t){const t=i.jc();i.Hb(2),i.Jc(t.errMsg)}}function $(t,e){if(1&t&&(i.Zb(0,"p",19),i.Zb(1,"strong"),i.Ic(2),i.Yb(),i.Yb()),2&t){const t=i.jc();i.Hb(2),i.Jc(t.successMsg)}}function H(t,e){if(1&t&&(i.Zb(0,"div",21),i.Ic(1),i.Yb()),2&t){const t=i.jc().$implicit;i.Hb(1),i.Kc(" ",t.message," ")}}function N(t,e){if(1&t&&(i.Zb(0,"div"),i.Gc(1,H,2,1,"div",20),i.Yb()),2&t){const t=e.$implicit,s=i.jc();i.Hb(1),i.pc("ngIf",s.updateSubUserForm.get("name").hasError(t.type)&&(s.updateSubUserForm.get("name").dirty||s.updateSubUserForm.get("name").touched))}}function k(t,e){if(1&t&&(i.Zb(0,"div",21),i.Ic(1),i.Yb()),2&t){const t=i.jc().$implicit;i.Hb(1),i.Kc(" ",t.message," ")}}function D(t,e){if(1&t&&(i.Zb(0,"div"),i.Gc(1,k,2,1,"div",20),i.Yb()),2&t){const t=e.$implicit,s=i.jc();i.Hb(1),i.pc("ngIf",s.updateSubUserForm.get("phone").hasError(t.type)&&(s.updateSubUserForm.get("phone").dirty||s.updateSubUserForm.get("phone").touched))}}let E=(()=>{class t{constructor(t,e,s,n,r,o){this.route=t,this.api=e,this.fb=s,this.ngZone=n,this.router=r,this.util=o,this.snapshotParam=String,this.successMsg=String,this.successMessage=!1,this.errMsg=String,this.errorMsg=!1,this.genderList=["Male","Female","Others","N/A"],this.validationMessage={name:[{type:"required",message:"Name Is Required"},{type:"pattern",message:"Not a valid"}],phone:[{type:"required",message:"Phone Number Is Required"},{type:"minlength",message:"Not a phone number "},{type:"maxlength",message:"Phone no. is too large"},{type:"pattern",message:"Phone Number not valid"}],zipCode:[{type:"pattern",message:"ZIP code not valid"}]}}ngOnInit(){this.snapshotParam=this.route.snapshot.paramMap.get("subUserId"),this.subUserFormValidation(),this.getSubUserExistingData()}subUserFormValidation(){try{this.updateSubUserForm=this.fb.group({name:new r.f("",r.v.compose([r.v.required,r.v.pattern("^[a-zA-Z ]*$")])),phone:new r.f("",r.v.compose([r.v.required,r.v.minLength(10),r.v.maxLength(15),r.v.pattern("^-?[0-9]\\d*(\\.\\d{1,2})?$")])),birthday:new r.f,zipCode:new r.f("",r.v.compose([r.v.pattern("^[0-9]{6}(?:-[0-9]{4})?$")])),gender:new r.f,email:new r.f})}catch(t){console.log(t)}}updateSubUserFormData(){try{let t=this.util.cleanFormLevelOne(this.updateSubUserForm);this.api.submitUpdateSubUserData(t.value,this.snapshotParam).subscribe(t=>{"success"===t.status||200===t.status?(this.getSubUserExistingData(),this.successMessage=!0,this.errorMsg=!1,this.successMsg=t.message,setTimeout(()=>{this.handleErrors(),this.router.navigateByUrl("/pages/sub-user/show-subusers-list")},2e3)):"error"==t.status&&(this.errorMsg=!0,this.successMessage=!1,this.errMsg=t.message,setTimeout(()=>{this.handleErrors()},3e3))})}catch(t){console.log(t)}}getSubUserExistingData(){try{this.api.subUserDetails(this.snapshotParam).subscribe(t=>{"success"===t.status&&(this.updateSubUserForm=this.fb.group({name:new r.f(t.data.name,r.v.compose([r.v.required,r.v.pattern("^[a-zA-Z ]*$")])),phone:new r.f(t.data.phone,r.v.compose([r.v.required,r.v.minLength(10),r.v.maxLength(15),r.v.pattern("^-?[0-9]\\d*(\\.\\d{1,2})?$")])),birthday:new r.f,zipCode:new r.f("",r.v.compose([r.v.pattern("^[0-9]{6}(?:-[0-9]{4})?$")])),gender:new r.f,email:new r.f(t.data.email)}))})}catch(t){console.log(t)}}handleErrors(){this.errorMsg=!1,this.successMessage=!1,this.errMsg="",this.successMsg=""}}return t.\u0275fac=function(e){return new(e||t)(i.Tb(o.a),i.Tb(d),i.Tb(r.e),i.Tb(i.E),i.Tb(o.b),i.Tb(p.a))},t.\u0275cmp=i.Nb({type:t,selectors:[["app-update-subusers-data"]],decls:42,vars:6,consts:[[1,"card","card-user"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"col-sm-offset-2"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["role","form",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"form-group"],[1,"col-sm-6","control-label"],[2,"color","darkred"],["type","text","id","name","formControlName","name","required","",1,"form-control"],[4,"ngFor","ngForOf"],["type","text","id","phone","formControlName","phone",1,"form-control"],["type","email","id","email","formControlName","email","disabled","",1,"form-control"],[1,"col-sm-offset-2","col-sm-10"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","submit","routerLink","/pages/sub-user/show-subusers-list",1,"btn","btn-danger"],[1,"alert","alert-danger"],[1,"alert","alert-success"],["style","color:\xa0red;margin-left:\xa014px;","style","color:\xa0red;margin-left:\xa014px;",4,"ngIf"],[2,"color","red","margin-left","14px"]],template:function(t,e){1&t&&(i.Zb(0,"div",0),i.Zb(1,"div",1),i.Zb(2,"h2",2),i.Ic(3,"Update Sub-User Details"),i.Yb(),i.Yb(),i.Zb(4,"div",3),i.Zb(5,"div",4),i.Gc(6,x,3,1,"p",5),i.Yb(),i.Zb(7,"div",4),i.Gc(8,$,3,1,"p",6),i.Yb(),i.Zb(9,"form",7),i.gc("ngSubmit",(function(){return e.updateSubUserFormData()})),i.Zb(10,"div",8),i.Ic(11," \xa0"),i.Zb(12,"label",9),i.Zb(13,"b"),i.Ic(14,"Full Name:\xa0"),i.Zb(15,"span",10),i.Ic(16,"*"),i.Yb(),i.Yb(),i.Yb(),i.Zb(17,"div",4),i.Ub(18,"input",11),i.Gc(19,N,2,1,"div",12),i.Yb(),i.Yb(),i.Zb(20,"div",8),i.Ic(21," \xa0"),i.Zb(22,"label",9),i.Zb(23,"b"),i.Ic(24,"Phone Number:\xa0"),i.Zb(25,"span",10),i.Ic(26,"*"),i.Yb(),i.Yb(),i.Yb(),i.Zb(27,"div",4),i.Ub(28,"input",13),i.Gc(29,D,2,1,"div",12),i.Yb(),i.Yb(),i.Zb(30,"div",8),i.Zb(31,"label",9),i.Zb(32,"b"),i.Ic(33,"Email:"),i.Yb(),i.Yb(),i.Zb(34,"div",4),i.Ub(35,"input",14),i.Yb(),i.Yb(),i.Zb(36,"div",8),i.Zb(37,"div",15),i.Zb(38,"button",16),i.Ic(39,"Update"),i.Yb(),i.Zb(40,"button",17),i.Ic(41,"Cancel"),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Yb()),2&t&&(i.Hb(6),i.pc("ngIf",e.errorMsg),i.Hb(2),i.pc("ngIf",e.successMessage),i.Hb(1),i.pc("formGroup",e.updateSubUserForm),i.Hb(10),i.pc("ngForOf",e.validationMessage.name),i.Hb(10),i.pc("ngForOf",e.validationMessage.phone),i.Hb(9),i.pc("disabled",e.updateSubUserForm.invalid))},directives:[n.m,r.x,r.o,r.i,r.c,r.n,r.g,r.t,n.l,o.c],styles:["h2[_ngcontent-%COMP%]{text-align:center}"]}),t})();var L=s("CG1p");const j=[{path:"",component:a,canActivate:[L.a],children:[{path:"add-subuser",component:U},{path:"show-subusers-list",component:S},{path:"update-subuser-data/:subUserId",component:E},{path:"",redirectTo:"show-subusers-list",pathMatch:"full"}]}];let q=(()=>{class t{}return t.\u0275mod=i.Rb({type:t}),t.\u0275inj=i.Qb({factory:function(e){return new(e||t)},imports:[[n.c,o.f.forChild(j)]]}),t})(),T=(()=>{class t{}return t.\u0275mod=i.Rb({type:t}),t.\u0275inj=i.Qb({factory:function(e){return new(e||t)},providers:[d,L.a],imports:[[n.c,q,r.j,r.s,o.f,c.b,g.b]]}),t})()}}]);
//# sourceMappingURL=28-es2015.1fd6b4f2acd4fe2d09f6.js.map