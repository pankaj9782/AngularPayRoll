(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{nqxb:function(e,t,a){"use strict";a.r(t),a.d(t,"GraderuleModule",(function(){return pe}));var r=a("ofXK"),s=a("tyNb"),n=a("fXoL");let i=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Nb({type:e,selectors:[["app-graderule"]],decls:1,vars:0,template:function(e,t){1&e&&n.Ub(0,"router-outlet")},directives:[s.g],styles:[""]}),e})();var o=a("CG1p"),c=a("PSD3"),d=a.n(c),l=a("y8g4"),b=a("3Pt+"),u=a("cnwL");function g(e,t){if(1&e){const e=n.ac();n.Zb(0,"tbody"),n.Zb(1,"tr"),n.Zb(2,"td"),n.Zb(3,"b"),n.Ic(4),n.Yb(),n.Yb(),n.Zb(5,"td"),n.Ic(6),n.Yb(),n.Zb(7,"td"),n.Zb(8,"a",7),n.Ub(9,"i",8),n.Yb(),n.Ic(10,"\xa0 "),n.Zb(11,"button",9),n.gc("click",(function(){n.Bc(e);const a=t.$implicit;return n.jc().showConfirmationMessage(a._id)})),n.Ub(12,"i",10),n.Yb(),n.Ic(13,"\xa0 "),n.Zb(14,"button",11),n.Ic(15,"Manage Payment Heads"),n.Yb(),n.Yb(),n.Yb(),n.Yb()}if(2&e){const e=t.$implicit,a=t.index,r=n.jc();n.Hb(4),n.Kc("",a+1,"."),n.Hb(2),n.Kc(" ",e.title," "),n.Hb(2),n.Lb("disabled",-1===r.permissionInfo.search("Edit GradeRule")),n.rc("routerLink","/pages/graderule/update-graderule/",e._id,""),n.Hb(3),n.pc("disabled",-1===r.permissionInfo.search("Delete GradeRule")),n.Hb(3),n.rc("routerLink","../list-managePaymentHeads/",e._id,""),n.pc("disabled",-1===r.permissionInfo.search("Create PaymentHeads"))}}let p=(()=>{class e{constructor(e,t,a,r){this.api=e,this.fb=t,this.route=a,this.util=r}ngOnInit(){this.listGradRule(),this.permissionInfo=this.util.permissionRoleInfo}listGradRule(){try{this.api.getGradeRuleList().subscribe(e=>{"success"!==e.status&&200!==e.status||(this.listGradRuleData=e.data,0==Object.keys(this.listGradRuleData).length?this.route.navigateByUrl("pages/graderule/add-graderule"):this.listGradRuleData=e.data)})}catch(e){console.log(e)}}showConfirmationMessage(e){const t=d.a.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1});t.fire({title:"Are you sure?",text:"You want to delete it",type:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",reverseButtons:!0}).then(a=>{a.value?this.api.removeData(e).subscribe(e=>{"success"===e.status?t.fire("Deleted!",e.message,"success"):"error"===e.status&&t.fire("ERROR!",e.message,"error"),this.listGradRule()}):a.dismiss===d.a.DismissReason.cancel&&t.fire("Cancelled","Your list data safe","error")})}addGradeRule(){try{this.util.gradeRuleStatus=1}catch(e){console.log(e)}}}return e.\u0275fac=function(t){return new(t||e)(n.Tb(l.a),n.Tb(b.e),n.Tb(s.b),n.Tb(u.a))},e.\u0275cmp=n.Nb({type:e,selectors:[["app-list-graderule"]],decls:15,vars:2,consts:[[1,"card"],[1,"card-header",2,"text-align","center"],["type","button","routerLink","/pages/graderule/add-graderule",1,"btn","btn-primary",2,"float","right",3,"disabled","click"],[1,"fa","fa-plus-square"],[1,"table",2,"text-align","center"],[1,"text-primary"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"routerLink"],[1,"fa","fa-pencil-square-o"],["type","button",1,"btn","btn-danger",3,"disabled","click"],[1,"fa","fa-trash"],["type","button",1,"btn","btn-info",3,"disabled","routerLink"]],template:function(e,t){1&e&&(n.Zb(0,"div",0),n.Zb(1,"div",1),n.Zb(2,"h2"),n.Ic(3,"Grade Rule"),n.Yb(),n.Zb(4,"button",2),n.gc("click",(function(){return t.addGradeRule()})),n.Ub(5,"i",3),n.Ic(6,"\xa0 Add Grade Rule"),n.Yb(),n.Yb(),n.Zb(7,"table",4),n.Zb(8,"thead",5),n.Zb(9,"tr"),n.Zb(10,"th"),n.Ic(11," S.No "),n.Yb(),n.Zb(12,"th"),n.Ic(13," Title "),n.Yb(),n.Yb(),n.Yb(),n.Gc(14,g,16,8,"tbody",6),n.Yb(),n.Yb()),2&e&&(n.Hb(4),n.pc("disabled",-1===t.permissionInfo.search("Create GradeRule")),n.Hb(10),n.pc("ngForOf",t.listGradRuleData))},directives:[s.c,r.l,s.e],styles:[""]}),e})();function m(e,t){if(1&e&&(n.Zb(0,"p",26),n.Zb(1,"strong"),n.Ic(2),n.Yb(),n.Yb()),2&e){const e=n.jc();n.Hb(2),n.Jc(e.errMsg)}}function h(e,t){if(1&e&&(n.Zb(0,"p",27),n.Zb(1,"strong"),n.Ic(2),n.Yb(),n.Yb()),2&e){const e=n.jc();n.Hb(2),n.Jc(e.successMsg)}}function f(e,t){if(1&e&&(n.Zb(0,"div",29),n.Ic(1),n.Yb()),2&e){const e=n.jc().$implicit;n.Hb(1),n.Kc(" ",e.message," ")}}function y(e,t){if(1&e&&(n.Zb(0,"div"),n.Gc(1,f,2,1,"div",28),n.Yb()),2&e){const e=t.$implicit,a=n.jc();n.Hb(1),n.pc("ngIf",a.graderuleForm.get("title").hasError(e.type)&&(a.graderuleForm.get("title").dirty||a.graderuleForm.get("title").touched))}}function v(e,t){if(1&e&&(n.Zb(0,"option",30),n.Ic(1),n.Yb()),2&e){const e=t.$implicit;n.pc("ngValue",e._id),n.Hb(1),n.Jc(e.title)}}function H(e,t){if(1&e&&(n.Zb(0,"div",29),n.Ic(1),n.Yb()),2&e){const e=n.jc().$implicit;n.Hb(1),n.Kc(" ",e.message," ")}}function I(e,t){if(1&e&&(n.Zb(0,"div"),n.Gc(1,H,2,1,"div",28),n.Yb()),2&e){const e=t.$implicit,a=n.jc();n.Hb(1),n.pc("ngIf",a.graderuleForm.get("paymentHead.paymentHeadId").hasError(e.type)&&(a.graderuleForm.get("paymentHead.paymentHeadId").dirty||a.graderuleForm.get("paymentHead.paymentHeadId").touched))}}function Y(e,t){if(1&e&&(n.Zb(0,"option",31),n.Ic(1),n.Yb()),2&e){const e=t.$implicit;n.Hb(1),n.Jc(e)}}function Z(e,t){if(1&e&&(n.Zb(0,"div",29),n.Ic(1),n.Yb()),2&e){const e=n.jc().$implicit;n.Hb(1),n.Kc(" ",e.message," ")}}function M(e,t){if(1&e&&(n.Zb(0,"div"),n.Gc(1,Z,2,1,"div",28),n.Yb()),2&e){const e=t.$implicit,a=n.jc();n.Hb(1),n.pc("ngIf",a.graderuleForm.get("paymentHead.type").hasError(e.type)&&(a.graderuleForm.get("paymentHead.type").dirty||a.graderuleForm.get("paymentHead.type").touched))}}function P(e,t){if(1&e&&(n.Zb(0,"div",29),n.Ic(1),n.Yb()),2&e){const e=n.jc().$implicit;n.Hb(1),n.Kc(" ",e.message," ")}}function F(e,t){if(1&e&&(n.Zb(0,"div"),n.Gc(1,P,2,1,"div",28),n.Yb()),2&e){const e=t.$implicit,a=n.jc(2);n.Hb(1),n.pc("ngIf",a.graderuleForm.get("paymentHead.value").hasError(e.type)&&(a.graderuleForm.get("paymentHead.value").dirty||a.graderuleForm.get("paymentHead.value").touched))}}function E(e,t){if(1&e&&(n.Zb(0,"div",19),n.Zb(1,"div",9),n.Zb(2,"label",10),n.Zb(3,"b"),n.Ic(4,"Enter Amount:\xa0"),n.Zb(5,"span",11),n.Ic(6,"*"),n.Yb(),n.Yb(),n.Yb(),n.Zb(7,"div",4),n.Ub(8,"input",32),n.Yb(),n.Yb(),n.Gc(9,F,2,1,"div",13),n.Yb()),2&e){const e=n.jc();n.Hb(9),n.pc("ngForOf",e.validationMessage.value)}}function x(e,t){if(1&e){const e=n.ac();n.Zb(0,"div",19),n.Zb(1,"div",9),n.Zb(2,"label",10),n.Zb(3,"b"),n.Ic(4,"Enter Percent:\xa0"),n.Zb(5,"span",11),n.Ic(6,"*"),n.Yb(),n.Yb(),n.Yb(),n.Zb(7,"div",4),n.Zb(8,"input",33),n.gc("input",(function(){return n.Bc(e),n.jc().demo()})),n.Yb(),n.Yb(),n.Yb(),n.Zb(9,"div"),n.Zb(10,"p",34),n.Ic(11),n.Yb(),n.Yb(),n.Zb(12,"div"),n.Zb(13,"p",34),n.Ic(14),n.Yb(),n.Yb(),n.Yb()}if(2&e){const e=n.jc();n.Hb(11),n.Jc(e.percentErrorMsg),n.Hb(3),n.Kc(" ",e.errorMsg,"")}}function G(e,t){if(1&e&&(n.Zb(0,"option",30),n.Ic(1),n.Yb()),2&e){const e=t.$implicit;n.pc("ngValue",e.value),n.Hb(1),n.Jc(e.name)}}function w(e,t){if(1&e&&(n.Zb(0,"div",19),n.Zb(1,"div",9),n.Zb(2,"label",10),n.Zb(3,"b"),n.Ic(4,"Percent Of:\xa0"),n.Zb(5,"span",11),n.Ic(6,"*"),n.Yb(),n.Yb(),n.Yb(),n.Zb(7,"select",35),n.Zb(8,"option",16),n.Ic(9,"----Select Percent Of----"),n.Yb(),n.Gc(10,G,2,2,"option",17),n.Yb(),n.Yb(),n.Yb()),2&e){const e=n.jc();n.Hb(10),n.pc("ngForOf",e.fixedPaymentHeadsList)}}let R=(()=>{class e{constructor(e,t,a,r){this.api=e,this.fb=t,this.router=a,this.util=r,this.Fixed=!1,this.Percent=!1,this.percentErrorMsg="Percent is Required",this.gradeType=["Fixed","Percent"],this.successMessage=!1,this.serverErrorMsg=!1,this.fixedPaymentHeadsList=[],this.percentOfValue="basicSalary",this.validationMessage={title:[{type:"required",message:"Title is required"}],value:[{type:"required",message:"Amount is required"},{type:"maxlength",message:"Amount is too Large"},{type:"pattern",message:"Amount not valid"}],paymentHeadId:[{type:"required",message:"Payment Head is required"}],type:[{type:"required",message:"Type  is required"}]},this.isListAvaliable()}ngOnInit(){this.paymentHeadList(),this.addMemberValidation(),this.fixedPaymentHeads(),this.permissionInfo=this.util.permissionRoleInfo,-1===this.permissionInfo.search("Create GradeRule")&&this.graderuleForm.disable()}check(e){let t={fixed:[b.v.required,b.v.maxLength(8),b.v.pattern("^[0-9]*$")],percent:[b.v.required,b.v.maxLength(8),b.v.pattern(/^\d{0,2}(?:\.\d{0,2})?$/)]},a=e.target.options[e.target.options.selectedIndex].text;"Fixed"==a?(this.Fixed=!0,this.Percent=!1,this.errorMsg="",this.percentErrorMsg="",this.graderuleForm.get("paymentHead.value").setValidators(t.fixed),this.graderuleForm.get("paymentHead.value").updateValueAndValidity()):"Percent"==a&&(this.Percent=!0,this.Fixed=!1,this.graderuleForm.get("paymentHead.value").value&&this.switchTypeValidation(this.graderuleForm.get("paymentHead.value").value),this.graderuleForm.get("paymentHead.value").setValidators(t.percent),this.graderuleForm.get("paymentHead.value").updateValueAndValidity())}addMemberValidation(){this.graderuleForm=this.fb.group({title:new b.f("",b.v.required),paymentHead:new b.h({paymentHeadId:new b.f("",b.v.required),type:new b.f("",b.v.required),value:new b.f("",b.v.compose([b.v.required,b.v.maxLength(8),b.v.pattern("^[0-9]*$")]))})})}paymentHeadList(){this.api.getPaymentHeadData().subscribe(e=>{this.paymentHeadDataList=e.data})}graderuleData(){try{this.api.getGradeRule(this.graderuleForm.value,this.percentOfValue).subscribe(e=>{"success"===e.status?(this.successMessage=!0,this.serverErrorMsg=!1,this.successMsg=e.message,setTimeout(()=>{this.handleErrors(),this.router.navigateByUrl("pages/graderule/list-graderule")},2e3)):(this.serverErrorMsg=!0,this.successMessage=!1,this.errMsg=e.message,setTimeout(()=>{this.handleErrors()},3e3))})}catch(e){console.log(e)}}demo(){"Fixed"!=document.getElementById("typeValue").value&&(this.inputValue=document.getElementById("percentValue").value,this.inputValue>0&&this.inputValue<=100?(this.percentErrorMsg="",this.errorMsg=""):0==this.inputValue.length?(this.percentErrorMsg="Percent is Required",this.errorMsg=""):this.inputValue.length>6?(this.percentErrorMsg="Percent Value is too Large",this.errorMsg=""):(this.percentErrorMsg="",this.errorMsg="Enter value is not valid"))}switchTypeValidation(e){e>0&&e<=100?(this.percentErrorMsg="",this.errorMsg=""):0==e.toString().length?(this.percentErrorMsg="Percent is Required",this.errorMsg=""):e.toString().length>6?(this.percentErrorMsg="Percent Value is too Large",this.errorMsg=""):(this.percentErrorMsg="",this.errorMsg="Enter value is not valid")}handleErrors(){this.serverErrorMsg=!1,this.successMessage=!1,this.errMsg="",this.successMsg=""}isListAvaliable(){try{this.api.getGradeRuleList().subscribe(e=>{"success"===e.status&&e.data.length>0&&1!==this.util.gradeRuleStatus&&(this.router.navigateByUrl("/pages/graderule/list-graderule"),this.util.gradeRuleStatus=0)})}catch(e){console.log(e)}}fixedPaymentHeads(){try{this.api.fixedPaymentHeads(void 0).subscribe(e=>{"success"===e.status&&(this.fixedPaymentHeadsList=e.data)})}catch(e){console.log(e)}}}return e.\u0275fac=function(t){return new(t||e)(n.Tb(l.a),n.Tb(b.e),n.Tb(s.b),n.Tb(u.a))},e.\u0275cmp=n.Nb({type:e,selectors:[["app-add-graderule"]],decls:49,vars:13,consts:[[1,"card","card-user"],[1,"card-header"],[1,"card-title","text-center"],[1,"card-body"],[1,"col-sm-offset-2"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["role","form","novalidate","",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"cols"],[1,"form-group"],[1,"col-sm-6","control-label"],[2,"color","darkred"],["type","text","id","title","placeholder","Enter Title","formControlName","title","required","",1,"form-control"],[4,"ngFor","ngForOf"],[3,"formGroup"],["name","Payment Heades","formControlName","paymentHeadId",1,"dropdown","dropdown-toggle","form-control",3,"change"],["ng-selected","true","value","","disabled",""],["selected","",3,"ngValue",4,"ngFor","ngForOf"],[1,"row"],[1,"col-md-4"],[1,"col-sm-4","control-label"],["id","typeValue","formControlName","type",1,"dropdown","dropdown-toggle","form-control",3,"change"],["class","dropdown-item",4,"ngFor","ngForOf"],["class","col-md-4",4,"ngIf"],["type","submit",1,"btn","btn-success",3,"disabled","click"],["routerLink","/pages/graderule/list-graderule",1,"btn","btn-danger"],[1,"alert","alert-danger"],[1,"alert","alert-success"],["style","color: red;margin-left: 1%;","style","color: red;margin-left: 1%;",4,"ngIf"],[2,"color","red","margin-left","1%"],["selected","",3,"ngValue"],[1,"dropdown-item"],["type","text","id","value","placeholder","Enter Amount","formControlName","value","required","",1,"form-control"],["type","number","id","percentValue","placeholder","Enter Percent","formControlName","value","required","",1,"form-control",3,"input"],[2,"color","red"],["name","Payment Heades",1,"dropdown","dropdown-toggle","form-control"]],template:function(e,t){1&e&&(n.Zb(0,"div",0),n.Zb(1,"div",1),n.Zb(2,"h2",2),n.Ic(3,"Grade Rule Details"),n.Yb(),n.Yb(),n.Zb(4,"div",3),n.Zb(5,"div",4),n.Gc(6,m,3,1,"p",5),n.Yb(),n.Zb(7,"div",4),n.Gc(8,h,3,1,"p",6),n.Yb(),n.Zb(9,"form",7),n.gc("ngSubmit",(function(){return t.graderuleData()})),n.Zb(10,"div",8),n.Zb(11,"div",9),n.Zb(12,"label",10),n.Zb(13,"b"),n.Ic(14,"Title:\xa0"),n.Zb(15,"span",11),n.Ic(16,"*"),n.Yb(),n.Yb(),n.Yb(),n.Zb(17,"div",4),n.Ub(18,"input",12),n.Gc(19,y,2,1,"div",13),n.Yb(),n.Yb(),n.Yb(),n.Zb(20,"div",14),n.Zb(21,"label",10),n.Zb(22,"b"),n.Ic(23,"Payment Head:\xa0"),n.Zb(24,"span",11),n.Ic(25,"*"),n.Yb(),n.Yb(),n.Yb(),n.Zb(26,"select",15),n.gc("change",(function(e){return t.check(e.target)})),n.Zb(27,"option",16),n.Ic(28,"----------Select Payment Head Name----------"),n.Yb(),n.Gc(29,v,2,2,"option",17),n.Yb(),n.Gc(30,I,2,1,"div",13),n.Ub(31,"br"),n.Zb(32,"div",18),n.Zb(33,"div",19),n.Zb(34,"label",20),n.Zb(35,"b"),n.Ic(36,"Type:\xa0"),n.Yb(),n.Yb(),n.Zb(37,"select",21),n.gc("change",(function(e){return t.check(e)})),n.Zb(38,"option",16),n.Ic(39,"----------Select Grade Type----------"),n.Yb(),n.Gc(40,Y,2,1,"option",22),n.Yb(),n.Gc(41,M,2,1,"div",13),n.Yb(),n.Gc(42,E,10,1,"div",23),n.Gc(43,x,15,2,"div",23),n.Gc(44,w,11,1,"div",23),n.Yb(),n.Yb(),n.Zb(45,"button",24),n.gc("click",(function(){return t.demo()})),n.Ic(46,"Submit"),n.Yb(),n.Zb(47,"button",25),n.Ic(48,"Cancel"),n.Yb(),n.Yb(),n.Yb(),n.Yb()),2&e&&(n.Hb(6),n.pc("ngIf",t.serverErrorMsg),n.Hb(2),n.pc("ngIf",t.successMessage),n.Hb(1),n.pc("formGroup",t.graderuleForm),n.Hb(10),n.pc("ngForOf",t.validationMessage.title),n.Hb(1),n.pc("formGroup",t.graderuleForm.get("paymentHead")),n.Hb(9),n.pc("ngForOf",t.paymentHeadDataList),n.Hb(1),n.pc("ngForOf",t.validationMessage.paymentHeadId),n.Hb(10),n.pc("ngForOf",t.gradeType),n.Hb(1),n.pc("ngForOf",t.validationMessage.type),n.Hb(1),n.pc("ngIf",t.Fixed),n.Hb(1),n.pc("ngIf",t.Percent),n.Hb(1),n.pc("ngIf",t.Percent),n.Hb(1),n.pc("disabled",t.graderuleForm.invalid||t.errorMsg||t.percentErrorMsg||-1===t.permissionInfo.search("Create GradeRule")))},directives:[r.m,b.x,b.o,b.i,b.c,b.n,b.g,b.t,r.l,b.u,b.q,b.w,s.c,b.r],encapsulation:2}),e})();function V(e,t){if(1&e&&(n.Zb(0,"p",15),n.Zb(1,"strong"),n.Ic(2),n.Yb(),n.Yb()),2&e){const e=n.jc();n.Hb(2),n.Jc(e.errMsg)}}function O(e,t){if(1&e&&(n.Zb(0,"p",16),n.Zb(1,"strong"),n.Ic(2),n.Yb(),n.Yb()),2&e){const e=n.jc();n.Hb(2),n.Jc(e.successMsg)}}function T(e,t){if(1&e&&(n.Zb(0,"div",18),n.Ic(1),n.Yb()),2&e){const e=n.jc().$implicit;n.Hb(1),n.Kc(" ",e.message," ")}}function L(e,t){if(1&e&&(n.Zb(0,"div"),n.Gc(1,T,2,1,"div",17),n.Yb()),2&e){const e=t.$implicit,a=n.jc();n.Hb(1),n.pc("ngIf",a.graderuleUpdateForm.get("title").hasError(e.type)&&(a.graderuleUpdateForm.get("title").dirty||a.graderuleUpdateForm.get("title").touched))}}let q=(()=>{class e{constructor(e,t,a,r,s,n){this.api=e,this.fb=t,this.route=a,this.ngZone=r,this.router=s,this.util=n,this.successMessage=!1,this.errorMsg=!1,this.validationMessage={title:[{type:"required",message:"Title is required"}]},this.gradeRuleId=this.route.snapshot.paramMap.get("gradeRuleId"),this.util.moduleExists(this.gradeRuleId,"GradeRule").subscribe(e=>{"success"===e.status&&(e.data||this.router.navigateByUrl("/pages/graderule/list-graderule"))})}ngOnInit(){this.addMemberValidation(),this.existingData(),this.permissionInfo=this.util.permissionRoleInfo,-1===this.permissionInfo.search("Edit GradeRule")&&this.graderuleUpdateForm.disable()}addMemberValidation(){this.graderuleUpdateForm=this.fb.group({title:new b.f("",b.v.required)})}existingData(){this.api.existingData(this.gradeRuleId).subscribe(e=>{this.graderuleUpdateForm=this.fb.group({title:new b.f(e.data.title,b.v.required)})})}graderuleUpdateData(){try{let e=this.util.cleanFormLevelOne(this.graderuleUpdateForm);this.api.updateGadeRule(e.value,this.gradeRuleId).subscribe(e=>{"success"===e.status?(this.successMessage=!0,this.errorMsg=!1,this.successMsg=e.message,setTimeout(()=>{this.handleErrors(),this.ngZone.run(()=>this.router.navigateByUrl("/pages/graderule/list-graderule"))},2e3)):(this.successMessage=!1,this.errorMsg=!0,this.errMsg=e.message,setTimeout(()=>{this.handleErrors()},3e3))})}catch(e){console.log(e)}}handleErrors(){this.errorMsg=!1,this.successMessage=!1,this.errMsg="",this.successMsg=""}}return e.\u0275fac=function(t){return new(t||e)(n.Tb(l.a),n.Tb(b.e),n.Tb(s.a),n.Tb(n.E),n.Tb(s.b),n.Tb(u.a))},e.\u0275cmp=n.Nb({type:e,selectors:[["app-update-graderule"]],decls:23,vars:5,consts:[[1,"card","card-user"],[1,"card-header"],[1,"card-title","text-center"],[1,"card-body"],[1,"col-sm-offset-2"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["role","form","novalidate","",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"form-group"],[1,"col-sm-6","control-label"],[2,"color","darkred"],["type","text","placeholder","Enter Title","formControlName","title",1,"form-control"],[4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-success",3,"disabled"],["routerLink","/pages/graderule/list-graderule",1,"btn","btn-danger"],[1,"alert","alert-danger"],[1,"alert","alert-success"],["style","color: red;margin-left: 1%;","style","color: red;margin-left: 1%;",4,"ngIf"],[2,"color","red","margin-left","1%"]],template:function(e,t){1&e&&(n.Zb(0,"div",0),n.Zb(1,"div",1),n.Zb(2,"h2",2),n.Ic(3,"Update Grade Rule Details"),n.Yb(),n.Yb(),n.Zb(4,"div",3),n.Zb(5,"div",4),n.Gc(6,V,3,1,"p",5),n.Yb(),n.Zb(7,"div",4),n.Gc(8,O,3,1,"p",6),n.Yb(),n.Zb(9,"form",7),n.gc("ngSubmit",(function(){return t.graderuleUpdateData()})),n.Zb(10,"div",8),n.Zb(11,"label",9),n.Zb(12,"b"),n.Ic(13,"Title:\xa0"),n.Zb(14,"span",10),n.Ic(15,"*"),n.Yb(),n.Yb(),n.Yb(),n.Zb(16,"div",4),n.Ub(17,"input",11),n.Gc(18,L,2,1,"div",12),n.Yb(),n.Yb(),n.Zb(19,"button",13),n.Ic(20,"Update"),n.Yb(),n.Zb(21,"button",14),n.Ic(22,"Cancel"),n.Yb(),n.Yb(),n.Yb(),n.Yb()),2&e&&(n.Hb(6),n.pc("ngIf",t.errorMsg),n.Hb(2),n.pc("ngIf",t.successMessage),n.Hb(1),n.pc("formGroup",t.graderuleUpdateForm),n.Hb(9),n.pc("ngForOf",t.validationMessage.title),n.Hb(1),n.pc("disabled",t.graderuleUpdateForm.invalid||-1===t.permissionInfo.search("Edit GradeRule")))},directives:[r.m,b.x,b.o,b.i,b.c,b.n,b.g,r.l,s.c],encapsulation:2}),e})();function j(e,t){if(1&e){const e=n.ac();n.Zb(0,"tbody"),n.Zb(1,"tr"),n.Zb(2,"td"),n.Zb(3,"b"),n.Ic(4),n.Yb(),n.Yb(),n.Zb(5,"td"),n.Ic(6),n.Yb(),n.Zb(7,"td"),n.Ic(8),n.Yb(),n.Zb(9,"td"),n.Ic(10),n.Yb(),n.Zb(11,"td"),n.Zb(12,"a",10),n.Ub(13,"i",11),n.Yb(),n.Ic(14,"\xa0 "),n.Zb(15,"button",12),n.gc("click",(function(){n.Bc(e);const a=t.$implicit;return n.jc().showConfirmationMessage(a._id)})),n.Ub(16,"i",13),n.Yb(),n.Ic(17,"\xa0 "),n.Yb(),n.Yb(),n.Yb()}if(2&e){const e=t.$implicit,a=t.index,r=n.jc();n.Hb(4),n.Kc("",a+1,"."),n.Hb(2),n.Kc(" ",e.paymentHeadName," "),n.Hb(2),n.Jc(e.value),n.Hb(2),n.Jc(e.type),n.Hb(2),n.Lb("disabled",-1===r.permissionInfo.search("Edit PaymentHeads")),n.sc("routerLink","/pages/graderule/update-managePaymentHeads/",e._id,"/",r.gradeRuleId,""),n.Hb(3),n.pc("disabled",-1===r.permissionInfo.search("Delete PaymentHeads"))}}function D(e,t){if(1&e&&(n.Zb(0,"p",23),n.Zb(1,"strong"),n.Ic(2),n.Yb(),n.Yb()),2&e){const e=n.jc();n.Hb(2),n.Jc(e.errMsg)}}function C(e,t){if(1&e&&(n.Zb(0,"p",24),n.Zb(1,"strong"),n.Ic(2),n.Yb(),n.Yb()),2&e){const e=n.jc();n.Hb(2),n.Jc(e.successMsg)}}function $(e,t){if(1&e&&(n.Zb(0,"option",25),n.Ic(1),n.Yb()),2&e){const e=t.$implicit;n.pc("ngValue",e._id),n.Hb(1),n.Jc(e.title)}}function B(e,t){if(1&e&&(n.Zb(0,"div",27),n.Ic(1),n.Yb()),2&e){const e=n.jc().$implicit;n.Hb(1),n.Kc(" ",e.message," ")}}function k(e,t){if(1&e&&(n.Zb(0,"div"),n.Gc(1,B,2,1,"div",26),n.Yb()),2&e){const e=t.$implicit,a=n.jc();n.Hb(1),n.pc("ngIf",a.managePaymentForm.get("paymentHead.paymentHeadId").hasError(e.type)&&(a.managePaymentForm.get("paymentHead.paymentHeadId").dirty||a.managePaymentForm.get("paymentHead.paymentHeadId").touched))}}function U(e,t){if(1&e&&(n.Zb(0,"option",28),n.Ic(1),n.Yb()),2&e){const e=t.$implicit;n.Hb(1),n.Jc(e)}}function A(e,t){if(1&e&&(n.Zb(0,"div",27),n.Ic(1),n.Yb()),2&e){const e=n.jc().$implicit;n.Hb(1),n.Kc(" ",e.message," ")}}function S(e,t){if(1&e&&(n.Zb(0,"div"),n.Gc(1,A,2,1,"div",26),n.Yb()),2&e){const e=t.$implicit,a=n.jc();n.Hb(1),n.pc("ngIf",a.managePaymentForm.get("paymentHead.type").hasError(e.type)&&(a.managePaymentForm.get("paymentHead.type").dirty||a.managePaymentForm.get("paymentHead.type").touched))}}function N(e,t){if(1&e&&(n.Zb(0,"div",27),n.Ic(1),n.Yb()),2&e){const e=n.jc().$implicit;n.Hb(1),n.Kc(" ",e.message," ")}}function J(e,t){if(1&e&&(n.Zb(0,"div"),n.Gc(1,N,2,1,"div",26),n.Yb()),2&e){const e=t.$implicit,a=n.jc(2);n.Hb(1),n.pc("ngIf",a.managePaymentForm.get("paymentHead.value").hasError(e.type)&&(a.managePaymentForm.get("paymentHead.value").dirty||a.managePaymentForm.get("paymentHead.value").touched))}}function K(e,t){if(1&e&&(n.Zb(0,"div",16),n.Zb(1,"div",29),n.Zb(2,"label",9),n.Zb(3,"b"),n.Ic(4,"Enter Amount:\xa0"),n.Zb(5,"span",10),n.Ic(6,"*"),n.Yb(),n.Yb(),n.Yb(),n.Zb(7,"div",4),n.Ub(8,"input",30),n.Yb(),n.Yb(),n.Gc(9,J,2,1,"div",14),n.Yb()),2&e){const e=n.jc();n.Hb(9),n.pc("ngForOf",e.validationMessage.value)}}function _(e,t){if(1&e){const e=n.ac();n.Zb(0,"div",16),n.Zb(1,"div",29),n.Zb(2,"label",9),n.Zb(3,"b"),n.Ic(4,"Enter Percent:\xa0"),n.Zb(5,"span",10),n.Ic(6,"*"),n.Yb(),n.Yb(),n.Yb(),n.Zb(7,"div",4),n.Zb(8,"input",31),n.gc("input",(function(){return n.Bc(e),n.jc().demo()})),n.Yb(),n.Yb(),n.Yb(),n.Zb(9,"div"),n.Zb(10,"p",32),n.Ic(11),n.Yb(),n.Yb(),n.Zb(12,"div"),n.Zb(13,"p",32),n.Ic(14),n.Yb(),n.Yb(),n.Yb()}if(2&e){const e=n.jc();n.Hb(11),n.Jc(e.percentErrorMsg),n.Hb(3),n.Kc(" ",e.errorMsg,"")}}function z(e,t){if(1&e&&(n.Zb(0,"option",35),n.Ic(1),n.Yb()),2&e){const e=t.$implicit;n.pc("value",e.value),n.Hb(1),n.Jc(e.name)}}function Q(e,t){if(1&e){const e=n.ac();n.Zb(0,"div",16),n.Zb(1,"div",29),n.Zb(2,"label",9),n.Zb(3,"b"),n.Ic(4,"Percent Of:\xa0"),n.Zb(5,"span",10),n.Ic(6,"*"),n.Yb(),n.Yb(),n.Yb(),n.Zb(7,"select",33),n.gc("change",(function(t){return n.Bc(e),n.jc().percentOf(t.target.value)})),n.Zb(8,"option",12),n.Ic(9,"----Select Percent Of----"),n.Yb(),n.Gc(10,z,2,2,"option",34),n.Yb(),n.Yb(),n.Yb()}if(2&e){const e=n.jc();n.Hb(10),n.pc("ngForOf",e.fixedPaymentHeadsList)}}function X(e,t){if(1&e&&(n.Zb(0,"p",22),n.Zb(1,"strong"),n.Ic(2),n.Yb(),n.Yb()),2&e){const e=n.jc();n.Hb(2),n.Jc(e.errMsg)}}function W(e,t){if(1&e&&(n.Zb(0,"p",23),n.Zb(1,"strong"),n.Ic(2),n.Yb(),n.Yb()),2&e){const e=n.jc();n.Hb(2),n.Jc(e.successMsg)}}function ee(e,t){if(1&e&&(n.Zb(0,"option",24),n.Ic(1),n.Yb()),2&e){const e=t.$implicit;n.pc("ngValue",e._id),n.Hb(1),n.Jc(e.title)}}function te(e,t){if(1&e&&(n.Zb(0,"div",26),n.Ic(1),n.Yb()),2&e){const e=n.jc().$implicit;n.Hb(1),n.Kc(" ",e.message," ")}}function ae(e,t){if(1&e&&(n.Zb(0,"div"),n.Gc(1,te,2,1,"div",25),n.Yb()),2&e){const e=t.$implicit,a=n.jc();n.Hb(1),n.pc("ngIf",a.updateManagePaymentForm.get("paymentHead.paymentHeadId").hasError(e.type)&&(a.updateManagePaymentForm.get("paymentHead.paymentHeadId").dirty||a.updateManagePaymentForm.get("paymentHead.paymentHeadId").touched))}}function re(e,t){if(1&e&&(n.Zb(0,"option",27),n.Ic(1),n.Yb()),2&e){const e=t.$implicit;n.Hb(1),n.Jc(e)}}function se(e,t){if(1&e&&(n.Zb(0,"div",26),n.Ic(1),n.Yb()),2&e){const e=n.jc().$implicit;n.Hb(1),n.Kc(" ",e.message," ")}}function ne(e,t){if(1&e&&(n.Zb(0,"div"),n.Gc(1,se,2,1,"div",25),n.Yb()),2&e){const e=t.$implicit,a=n.jc();n.Hb(1),n.pc("ngIf",a.updateManagePaymentForm.get("paymentHead.type").hasError(e.type)&&(a.updateManagePaymentForm.get("paymentHead.type").dirty||a.updateManagePaymentForm.get("paymentHead.type").touched))}}function ie(e,t){if(1&e&&(n.Zb(0,"div",26),n.Ic(1),n.Yb()),2&e){const e=n.jc().$implicit;n.Hb(1),n.Kc(" ",e.message," ")}}function oe(e,t){if(1&e&&(n.Zb(0,"div"),n.Gc(1,ie,2,1,"div",25),n.Yb()),2&e){const e=t.$implicit,a=n.jc(2);n.Hb(1),n.pc("ngIf",a.updateManagePaymentForm.get("paymentHead.value").hasError(e.type)&&(a.updateManagePaymentForm.get("paymentHead.value").dirty||a.updateManagePaymentForm.get("paymentHead.value").touched))}}function ce(e,t){if(1&e&&(n.Zb(0,"div",15),n.Zb(1,"div",28),n.Zb(2,"label",9),n.Zb(3,"b"),n.Ic(4,"Enter Amount:\xa0"),n.Zb(5,"span",10),n.Ic(6,"*"),n.Yb(),n.Yb(),n.Yb(),n.Zb(7,"div",4),n.Ub(8,"input",29),n.Yb(),n.Yb(),n.Gc(9,oe,2,1,"div",13),n.Yb()),2&e){const e=n.jc();n.Hb(9),n.pc("ngForOf",e.validationMessage.value)}}function de(e,t){if(1&e){const e=n.ac();n.Zb(0,"div",15),n.Zb(1,"div",28),n.Zb(2,"label",9),n.Zb(3,"b"),n.Ic(4,"Enter Percent:\xa0"),n.Zb(5,"span",10),n.Ic(6,"*"),n.Yb(),n.Yb(),n.Yb(),n.Zb(7,"div",4),n.Zb(8,"input",30),n.gc("input",(function(){return n.Bc(e),n.jc().demo()})),n.Yb(),n.Yb(),n.Yb(),n.Zb(9,"div"),n.Zb(10,"p",31),n.Ic(11),n.Yb(),n.Yb(),n.Zb(12,"div"),n.Zb(13,"p",31),n.Ic(14),n.Yb(),n.Yb(),n.Yb()}if(2&e){const e=n.jc();n.Hb(11),n.Jc(e.percentErrorMsg),n.Hb(3),n.Kc(" ",e.errorMsg,"")}}function le(e,t){if(1&e&&(n.Zb(0,"option",35),n.Ic(1),n.Yb()),2&e){const e=t.$implicit;n.pc("value",e.value),n.Hb(1),n.Jc(e.name)}}function be(e,t){if(1&e){const e=n.ac();n.Zb(0,"div",15),n.Zb(1,"div",28),n.Zb(2,"label",9),n.Zb(3,"b"),n.Ic(4,"Percent Of:\xa0"),n.Zb(5,"span",10),n.Ic(6,"*"),n.Yb(),n.Yb(),n.Yb(),n.Zb(7,"select",32),n.gc("change",(function(t){return n.Bc(e),n.jc().percentOf(t.target.value)})),n.Zb(8,"option",33),n.Ic(9,"----Select Percent Of----"),n.Yb(),n.Gc(10,le,2,2,"option",34),n.Yb(),n.Yb(),n.Yb()}if(2&e){const e=n.jc();n.Hb(10),n.pc("ngForOf",e.fixedPaymentHeadsList)}}const ue=[{path:"",component:i,canActivate:[o.a],children:[{path:"list-graderule",component:p},{path:"list-managePaymentHeads/:gradeRuleId",component:(()=>{class e{constructor(e,t,a,r,s,n){this.api=e,this.fb=t,this.route=a,this.ngZone=r,this.router=s,this.util=n,this.showCard={},this.leaveListData=new Array,this.companyShowData=[]}ngOnDestroy(){document.getElementById("headerCompanyDropDown").removeAttribute("disabled")}ngOnInit(){this.gradeRuleId=this.route.snapshot.paramMap.get("gradeRuleId"),this.listGradeRule(),document.getElementById("headerCompanyDropDown").setAttribute("disabled","disabled"),this.permissionInfo=this.util.permissionRoleInfo}listGradeRule(){this.api.existingData(this.gradeRuleId).subscribe(e=>{this.gradeRuleTitle=e.data.title,this.dataValue=e.data.paymentHeads})}showConfirmationMessage(e){const t=d.a.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1});t.fire({title:"Are you sure?",text:"You want to delete it",type:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",reverseButtons:!0}).then(a=>{a.value?this.api.removeGradeData(e,this.gradeRuleId).subscribe(e=>{t.fire("Deleted!",e.message,"success"),this.listGradeRule()}):a.dismiss===d.a.DismissReason.cancel&&t.fire("Cancelled","Your list data safe","error")})}}return e.\u0275fac=function(t){return new(t||e)(n.Tb(l.a),n.Tb(b.e),n.Tb(s.a),n.Tb(n.E),n.Tb(s.b),n.Tb(u.a))},e.\u0275cmp=n.Nb({type:e,selectors:[["app-list-managePaymentHeads"]],decls:25,vars:4,consts:[[1,"card"],[1,"card-header"],[2,"text-align","center"],["type","button",1,"btn","btn-primary",2,"float","right",3,"disabled","routerLink"],[1,"fa","fa-plus-square"],["type","button","routerLink","/pages/graderule/list-graderule",1,"btn","btn-primary",2,"float","right"],[1,"fa","fa-arrow-left"],[1,"table",2,"text-align","center"],[1,"text-primary"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"routerLink"],[1,"fa","fa-pencil-square-o"],["type","button",1,"btn","btn-danger",3,"disabled","click"],[1,"fa","fa-trash"]],template:function(e,t){1&e&&(n.Zb(0,"div",0),n.Zb(1,"div",1),n.Zb(2,"h2",2),n.Ic(3,"Payment Heads List"),n.Yb(),n.Zb(4,"button",3),n.Ub(5,"i",4),n.Ic(6,"\xa0 Add Payment Heads"),n.Yb(),n.Zb(7,"button",5),n.Ub(8,"i",6),n.Yb(),n.Zb(9,"h4"),n.Ic(10),n.Yb(),n.Yb(),n.Zb(11,"table",7),n.Zb(12,"thead",8),n.Zb(13,"tr"),n.Zb(14,"th"),n.Ic(15,"S.No"),n.Yb(),n.Zb(16,"th"),n.Ic(17,"Title"),n.Yb(),n.Zb(18,"th"),n.Ic(19,"Amount/Rate"),n.Yb(),n.Zb(20,"th"),n.Ic(21,"Category"),n.Yb(),n.Zb(22,"th"),n.Ic(23,"Action"),n.Yb(),n.Yb(),n.Yb(),n.Gc(24,j,18,9,"tbody",9),n.Yb(),n.Yb()),2&e&&(n.Hb(4),n.rc("routerLink","/pages/graderule/add-managePaymentHeads/",t.gradeRuleId,""),n.pc("disabled",-1===t.permissionInfo.search("Create PaymentHeads")),n.Hb(6),n.Jc(t.gradeRuleTitle),n.Hb(14),n.pc("ngForOf",t.dataValue))},directives:[s.c,r.l,s.e],styles:[".card-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:700;color:#50cbce}"]}),e})()},{path:"add-managePaymentHeads/:gradeRuleId",component:(()=>{class e{constructor(e,t,a,r,s,n){this.api=e,this.fb=t,this.route=a,this.ngZone=r,this.router=s,this.util=n,this.fixedPaymentHeadsList=[],this.Fixed=!1,this.Percent=!1,this.gradeType=["Fixed","Percent"],this.successMessage=!1,this.serverErrorMsg=!1,this.percentOfValue="basicSalary",this.validationMessage={value:[{type:"required",message:"Amount is Required"},{type:"maxlength",message:"Amount is too Large"},{type:"pattern",message:"Amount not valid"}],paymentHeadId:[{type:"required",message:"Payment Head is Required"}],type:[{type:"required",message:"Type  is Required"}]}}ngOnDestroy(){document.getElementById("headerCompanyDropDown").removeAttribute("disabled")}ngOnInit(){this.gradeRuleId=this.route.snapshot.paramMap.get("gradeRuleId"),this.addMemberValidation(),this.fixedPaymentHeads(),this.paymentHeadList(),document.getElementById("headerCompanyDropDown").setAttribute("disabled","disabled"),this.permissionInfo=this.util.permissionRoleInfo,-1===this.permissionInfo.search("Create PaymentHeads")&&this.managePaymentForm.disable()}check(e){let t={fixed:[b.v.required,b.v.maxLength(8),b.v.pattern("^[0-9]*$")],percent:[b.v.required,b.v.maxLength(8),b.v.pattern(/^\d{0,2}(?:\.\d{0,2})?$/)]};try{let a=e.target.options[e.target.options.selectedIndex].text;"Fixed"==a?(this.Fixed=!0,this.Percent=!1,this.errorMsg="",this.percentErrorMsg="",this.managePaymentForm.get("paymentHead.value").setValidators(t.fixed),this.managePaymentForm.get("paymentHead.value").updateValueAndValidity()):"Percent"==a&&(this.Percent=!0,this.Fixed=!1,this.managePaymentForm.get("paymentHead.value").value&&this.switchTypeValidation(this.managePaymentForm.get("paymentHead.value").value),this.managePaymentForm.get("paymentHead.value").setValidators(t.percent),this.managePaymentForm.get("paymentHead.value").updateValueAndValidity())}catch(a){console.log(a)}}addMemberValidation(){try{this.managePaymentForm=this.fb.group({paymentHead:new b.h({paymentHeadId:new b.f("",b.v.required),type:new b.f("",b.v.required),value:new b.f("",b.v.compose([b.v.required,b.v.pattern("^[0-9]*$")]))})})}catch(e){console.log(e)}}paymentHeadList(){this.api.filterPaymentHeads(this.gradeRuleId).subscribe(e=>{this.paymentHeadDataList=e.data})}managePaymentData(){try{this.api.addGradules(this.managePaymentForm.value,this.gradeRuleId,this.percentOfValue).subscribe(e=>{"success"===e.status?(this.successMessage=!0,this.serverErrorMsg=!1,this.successMsg=e.message,setTimeout(()=>{this.handleErrors(),this.router.navigateByUrl("pages/graderule/list-managePaymentHeads/"+this.gradeRuleId)},2e3)):(this.serverErrorMsg=!0,this.successMessage=!1,this.errMsg=e.message,setTimeout(()=>{this.handleErrors()},3e3))})}catch(e){console.log(e)}}handleErrors(){this.serverErrorMsg=!1,this.successMessage=!1,this.errMsg="",this.successMsg=""}demo(){"Fixed"!=document.getElementById("typeValue").value&&(this.inputValue=document.getElementById("percentValue").value,this.inputValue>0&&this.inputValue<=100?(this.percentErrorMsg="",this.errorMsg=""):0==this.inputValue.length?(this.percentErrorMsg="Percent is Required",this.errorMsg=""):(this.percentErrorMsg="",this.errorMsg="Enter value is not valid"))}switchTypeValidation(e){e>0&&e<=100?(this.percentErrorMsg="",this.errorMsg=""):0==e.toString().length?(this.percentErrorMsg="Percent is Required",this.errorMsg=""):e.toString().length>6?(this.percentErrorMsg="Percent Value is too Large",this.errorMsg=""):(this.percentErrorMsg="",this.errorMsg="Enter value is not valid")}fixedPaymentHeads(){try{this.api.fixedPaymentHeads(this.gradeRuleId).subscribe(e=>{"success"===e.status&&(this.fixedPaymentHeadsList=e.data)})}catch(e){console.log(e)}}percentOf(e){this.percentOfValue=e}}return e.\u0275fac=function(t){return new(t||e)(n.Tb(l.a),n.Tb(b.e),n.Tb(s.a),n.Tb(n.E),n.Tb(s.b),n.Tb(u.a))},e.\u0275cmp=n.Nb({type:e,selectors:[["app-add-managePaymentHeads"]],decls:41,vars:13,consts:[[1,"card","card-user"],[1,"card-header"],[1,"card-title","text-center"],[1,"card-body"],[1,"col-sm-offset-2"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["role","form","novalidate","",1,"form-horizontal",3,"formGroup","ngSubmit"],[3,"formGroup"],[1,"col-sm-6","control-label"],[2,"color","darkred"],["name","Payment Heades","formControlName","paymentHeadId",1,"dropdown","dropdown-toggle","form-control"],["ng-selected","true","value","","disabled",""],["selected","",3,"ngValue",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-md-4"],[1,"col-sm-8","control-label"],["id","typeValue","formControlName","type",1,"dropdown","dropdown-toggle","form-control",3,"change"],["class","dropdown-item",4,"ngFor","ngForOf"],["class","col-md-4",4,"ngIf"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"btn","btn-danger",3,"routerLink"],[1,"alert","alert-danger"],[1,"alert","alert-success"],["selected","",3,"ngValue"],["style","color: red;margin-left: 1%;","style","color: red;margin-left: 1%;",4,"ngIf"],[2,"color","red","margin-left","1%"],[1,"dropdown-item"],[1,"form-group"],["type","text","id","value","placeholder","Enter Amount","formControlName","value","required","",1,"form-control"],["type","number","id","percentValue","placeholder","Enter Percent","formControlName","value","required","",1,"form-control",3,"input"],[2,"color","red"],["name","Payment Heades",1,"dropdown","dropdown-toggle","form-control",3,"change"],["selected","",3,"value",4,"ngFor","ngForOf"],["selected","",3,"value"]],template:function(e,t){1&e&&(n.Zb(0,"div",0),n.Zb(1,"div",1),n.Zb(2,"h2",2),n.Ic(3,"Manage Payment Heads Details"),n.Yb(),n.Yb(),n.Zb(4,"div",3),n.Zb(5,"div",4),n.Gc(6,D,3,1,"p",5),n.Yb(),n.Zb(7,"div",4),n.Gc(8,C,3,1,"p",6),n.Yb(),n.Zb(9,"form",7),n.gc("ngSubmit",(function(){return t.managePaymentData()})),n.Zb(10,"div",8),n.Zb(11,"label",9),n.Zb(12,"b"),n.Ic(13,"Payment Head:\xa0"),n.Zb(14,"span",10),n.Ic(15,"*"),n.Yb(),n.Yb(),n.Yb(),n.Zb(16,"select",11),n.Zb(17,"option",12),n.Ic(18,"----------Select Payment Head Name----------"),n.Yb(),n.Gc(19,$,2,2,"option",13),n.Yb(),n.Gc(20,k,2,1,"div",14),n.Ub(21,"br"),n.Zb(22,"div",15),n.Zb(23,"div",16),n.Zb(24,"label",17),n.Zb(25,"b"),n.Ic(26,"Type:\xa0"),n.Zb(27,"span",10),n.Ic(28,"*"),n.Yb(),n.Yb(),n.Yb(),n.Zb(29,"select",18),n.gc("change",(function(e){return t.check(e)})),n.Zb(30,"option",12),n.Ic(31,"----------Select Grade Type----------"),n.Yb(),n.Gc(32,U,2,1,"option",19),n.Yb(),n.Gc(33,S,2,1,"div",14),n.Yb(),n.Gc(34,K,10,1,"div",20),n.Gc(35,_,15,2,"div",20),n.Gc(36,Q,11,1,"div",20),n.Yb(),n.Yb(),n.Zb(37,"button",21),n.Ic(38,"Submit"),n.Yb(),n.Zb(39,"button",22),n.Ic(40,"Cancel"),n.Yb(),n.Yb(),n.Yb(),n.Yb()),2&e&&(n.Hb(6),n.pc("ngIf",t.serverErrorMsg),n.Hb(2),n.pc("ngIf",t.successMessage),n.Hb(1),n.pc("formGroup",t.managePaymentForm),n.Hb(1),n.pc("formGroup",t.managePaymentForm.get("paymentHead")),n.Hb(9),n.pc("ngForOf",t.paymentHeadDataList),n.Hb(1),n.pc("ngForOf",t.validationMessage.paymentHeadId),n.Hb(12),n.pc("ngForOf",t.gradeType),n.Hb(1),n.pc("ngForOf",t.validationMessage.type),n.Hb(1),n.pc("ngIf",t.Fixed),n.Hb(1),n.pc("ngIf",t.Percent),n.Hb(1),n.pc("ngIf",t.Percent),n.Hb(1),n.pc("disabled",t.managePaymentForm.invalid||t.errorMsg||t.percentErrorMsg||-1===t.permissionInfo.search("Create PaymentHeads")),n.Hb(2),n.rc("routerLink","/pages/graderule/list-managePaymentHeads/",t.gradeRuleId,""))},directives:[r.m,b.x,b.o,b.i,b.u,b.n,b.g,b.q,b.w,r.l,s.c,b.c,b.t,b.r],encapsulation:2}),e})()},{path:"update-managePaymentHeads/:paymentHeadId/:gradeRuleId",component:(()=>{class e{constructor(e,t,a,r,s,n){this.fb=e,this.api=t,this.router=a,this.ngZone=r,this.route=s,this.util=n,this.gradeType=["Fixed","Percent"],this.Fixed=!1,this.Percent=!1,this.successMessage=!1,this.serverErrorMsg=!1,this.validationMessage={value:[{type:"required",message:"Amount is Required"},{type:"maxlength",message:"Amount is too Large"},{type:"pattern",message:"Amount not valid"}],paymentHeadId:[{type:"required",message:"Payment Head is Required"}],type:[{type:"required",message:"Type  is Required"}]},this.percentOfFunction=function(e){setTimeout(()=>{document.getElementById("percentOfValue").value=e},200)}}ngOnDestroy(){document.getElementById("headerCompanyDropDown").removeAttribute("disabled")}ngOnInit(){this.paymentHeadId=this.route.snapshot.paramMap.get("paymentHeadId"),this.gradeRuleId=this.route.snapshot.paramMap.get("gradeRuleId"),this.paymentHeadList(),this.addMemberValidation(),this.existing(),this.fixedPaymentHeadList(),document.getElementById("headerCompanyDropDown").setAttribute("disabled","disabled"),this.permissionInfo=this.util.permissionRoleInfo,-1===this.permissionInfo.search("Edit PaymentHeads")&&this.updateManagePaymentForm.disable()}existing(){try{this.api.existingData(this.gradeRuleId).subscribe(e=>{"success"===e.status&&(this.existingGradeRule=e.data.paymentHeads,this.existingGradeRule.forEach(e=>{e._id==this.paymentHeadId&&("Percent"===e.type?(this.Percent=!0,this.Fixed=!1,this.percentOfValue=e.percentOfValue,this.percentOfFunction(e.percentOfValue),this.errorMsg="",this.percentErrorMsg="",this.updateManagePaymentForm=this.fb.group({paymentHead:new b.h({paymentHeadId:new b.f(e.paymentHeadId),type:new b.f(e.type),value:new b.f(e.value,b.v.compose([b.v.required,b.v.maxLength(8),b.v.pattern(/^\d{0,2}(?:\.\d{0,2})?$/)]))})})):(this.Percent=!1,this.Fixed=!0,this.updateManagePaymentForm=this.fb.group({paymentHead:new b.h({paymentHeadId:new b.f(e.paymentHeadId),type:new b.f(e.type),value:new b.f(e.value,b.v.compose([b.v.required,b.v.maxLength(8),b.v.pattern("^[0-9]*$")]))})})),this.existingPaymentHeadId=e._id,this.existingPaymentHeadName=e.paymentHeadName)}))})}catch(e){console.log(e)}}paymentHeadList(){this.api.getPaymentHeadData().subscribe(e=>{this.paymentHeadDataList=e.data})}updatePaymentHeads(){try{this.api.updatePaymentHeads(this.updateManagePaymentForm.value,this.paymentHeadId,this.gradeRuleId,this.percentOfValue,this.Percent).subscribe(e=>{"success"===e.status?(this.successMessage=!0,this.serverErrorMsg=!1,this.successMsg=e.message,setTimeout(()=>{this.router.navigateByUrl("pages/graderule/list-graderule")},1e3)):(this.serverErrorMsg=!0,this.successMessage=!1,this.errMsg=e.message)})}catch(e){console.log(e)}}addMemberValidation(){try{this.updateManagePaymentForm=this.fb.group({paymentHead:new b.h({paymentHeadId:new b.f("",b.v.required),type:new b.f("",b.v.required),value:new b.f("",b.v.compose([b.v.required,b.v.maxLength(8),b.v.pattern(/^\d{0,2}(?:\.\d{0,2})?$/)]))})})}catch(e){console.log(e)}}check(e){let t={fixed:[b.v.required,b.v.maxLength(8),b.v.pattern("^[0-9]*$")],percent:[b.v.required,b.v.maxLength(8),b.v.pattern(/^\d{0,2}(?:\.\d{0,2})?$/)]},a=e.target.options[e.target.options.selectedIndex].text;"Fixed"==a?(this.Fixed=!0,this.Percent=!1,this.errorMsg="",this.percentErrorMsg="",this.updateManagePaymentForm.get("paymentHead.value").setValidators(t.fixed),this.updateManagePaymentForm.get("paymentHead.value").updateValueAndValidity()):"Percent"==a&&(this.Percent=!0,this.Fixed=!1,this.updateManagePaymentForm.get("paymentHead.value").value&&this.switchTypeValidation(this.updateManagePaymentForm.get("paymentHead.value").value),this.updateManagePaymentForm.get("paymentHead.value").setValidators(t.percent),this.updateManagePaymentForm.get("paymentHead.value").updateValueAndValidity())}demo(){"Fixed"!=document.getElementById("typeValue").value&&(this.inputValue=document.getElementById("percentValue").value,this.inputValue>0&&this.inputValue<=100?(this.percentErrorMsg="",this.errorMsg=""):0==this.inputValue.length?(this.percentErrorMsg="Percent is Required",this.errorMsg=""):this.inputValue.length>6?(this.percentErrorMsg="Percent Value is too Large",this.errorMsg=""):(this.percentErrorMsg="",this.errorMsg="Enter value is not valid"))}switchTypeValidation(e){e>0&&e<=100?(this.percentErrorMsg="",this.errorMsg=""):0==e.toString().length?(this.percentErrorMsg="Percent is Required",this.errorMsg=""):e.toString().length>6?(this.percentErrorMsg="Percent Value is too Large",this.errorMsg=""):(this.percentErrorMsg="",this.errorMsg="Enter value is not valid")}fixedPaymentHeadList(){this.api.fixedPaymentHeads(this.gradeRuleId).subscribe(e=>{"success"===e.status&&(this.fixedPaymentHeadsList=e.data)})}percentOf(e){this.percentOfValue=e}}return e.\u0275fac=function(t){return new(t||e)(n.Tb(b.e),n.Tb(l.a),n.Tb(s.b),n.Tb(n.E),n.Tb(s.a),n.Tb(u.a))},e.\u0275cmp=n.Nb({type:e,selectors:[["app-update-managePaymentHeads"]],decls:37,vars:13,consts:[[1,"card","card-user"],[1,"card-header"],[1,"card-title","text-center"],[1,"card-body"],[1,"col-sm-offset-2"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["role","form","novalidate","",1,"form-horizontal",3,"formGroup","ngSubmit"],[3,"formGroup"],[1,"col-sm-6","control-label"],[2,"color","darkred"],["name","Payment Heades","formControlName","paymentHeadId",1,"dropdown","dropdown-toggle","form-control"],["selected","",3,"ngValue",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-md-4"],[1,"col-sm-8","control-label"],["id","typeValue","formControlName","type",1,"dropdown","dropdown-toggle","form-control",3,"change"],["class","dropdown-item",4,"ngFor","ngForOf"],["class","col-md-4",4,"ngIf"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"btn","btn-danger",3,"routerLink"],[1,"alert","alert-danger"],[1,"alert","alert-success"],["selected","",3,"ngValue"],["style","color: red;margin-left: 1%;","style","color: red;margin-left: 1%;",4,"ngIf"],[2,"color","red","margin-left","1%"],[1,"dropdown-item"],[1,"form-group"],["type","text","id","value","placeholder","Enter Amount","formControlName","value",1,"form-control"],["type","number","id","percentValue","placeholder","Enter Percent","formControlName","value","required","",1,"form-control",3,"input"],[2,"color","red"],["name","Payment Heades","id","percentOfValue",1,"dropdown","dropdown-toggle","form-control",3,"change"],["ng-selected","true","value","","disabled",""],["selected","",3,"value",4,"ngFor","ngForOf"],["selected","",3,"value"]],template:function(e,t){1&e&&(n.Zb(0,"div",0),n.Zb(1,"div",1),n.Zb(2,"h2",2),n.Ic(3,"Update Payment Heads"),n.Yb(),n.Yb(),n.Zb(4,"div",3),n.Zb(5,"div",4),n.Gc(6,X,3,1,"p",5),n.Yb(),n.Zb(7,"div",4),n.Gc(8,W,3,1,"p",6),n.Yb(),n.Zb(9,"form",7),n.gc("ngSubmit",(function(){return t.updatePaymentHeads()})),n.Zb(10,"div",8),n.Zb(11,"label",9),n.Zb(12,"b"),n.Ic(13,"Payment Head:\xa0"),n.Zb(14,"span",10),n.Ic(15,"*"),n.Yb(),n.Yb(),n.Yb(),n.Zb(16,"select",11),n.Gc(17,ee,2,2,"option",12),n.Yb(),n.Gc(18,ae,2,1,"div",13),n.Ub(19,"br"),n.Zb(20,"div",14),n.Zb(21,"div",15),n.Zb(22,"label",16),n.Zb(23,"b"),n.Ic(24,"Type:\xa0"),n.Zb(25,"span",10),n.Ic(26,"*"),n.Yb(),n.Yb(),n.Yb(),n.Zb(27,"select",17),n.gc("change",(function(e){return t.check(e)})),n.Gc(28,re,2,1,"option",18),n.Yb(),n.Gc(29,ne,2,1,"div",13),n.Yb(),n.Gc(30,ce,10,1,"div",19),n.Gc(31,de,15,2,"div",19),n.Gc(32,be,11,1,"div",19),n.Yb(),n.Yb(),n.Zb(33,"button",20),n.Ic(34,"Update"),n.Yb(),n.Zb(35,"button",21),n.Ic(36,"Cancel"),n.Yb(),n.Yb(),n.Yb(),n.Yb()),2&e&&(n.Hb(6),n.pc("ngIf",t.serverErrorMsg),n.Hb(2),n.pc("ngIf",t.successMessage),n.Hb(1),n.pc("formGroup",t.updateManagePaymentForm),n.Hb(1),n.pc("formGroup",t.updateManagePaymentForm.get("paymentHead")),n.Hb(7),n.pc("ngForOf",t.paymentHeadDataList),n.Hb(1),n.pc("ngForOf",t.validationMessage.paymentHeadId),n.Hb(10),n.pc("ngForOf",t.gradeType),n.Hb(1),n.pc("ngForOf",t.validationMessage.type),n.Hb(1),n.pc("ngIf",t.Fixed),n.Hb(1),n.pc("ngIf",t.Percent),n.Hb(1),n.pc("ngIf",t.Percent),n.Hb(1),n.pc("disabled",t.updateManagePaymentForm.invalid||t.errorMsg||t.percentErrorMsg||-1===t.permissionInfo.search("Edit PaymentHeads")),n.Hb(2),n.rc("routerLink","/pages/graderule/list-managePaymentHeads/",t.gradeRuleId,""))},directives:[r.m,b.x,b.o,b.i,b.u,b.n,b.g,r.l,s.c,b.q,b.w,b.c,b.r,b.t],encapsulation:2}),e})()},{path:"add-graderule",component:R},{path:"update-graderule/:gradeRuleId",component:q},{path:"",redirectTo:"list-graderule",pathMatch:"full"}]}];let ge=(()=>{class e{}return e.\u0275mod=n.Rb({type:e}),e.\u0275inj=n.Qb({factory:function(t){return new(t||e)},imports:[[r.c,s.f.forChild(ue)]]}),e})(),pe=(()=>{class e{}return e.\u0275mod=n.Rb({type:e}),e.\u0275inj=n.Qb({factory:function(t){return new(t||e)},imports:[[r.c,ge,b.j,b.s,s.f]]}),e})()}}]);
//# sourceMappingURL=18-es2015.8e49d92e711d0d06e151.js.map