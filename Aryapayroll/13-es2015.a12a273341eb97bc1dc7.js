(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{rXpt:function(e,t,a){"use strict";a.r(t),a.d(t,"CompanyModule",(function(){return Me}));var n=a("ofXK"),o=a("tyNb"),i=a("fXoL");let r=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Nb({type:e,selectors:[["app-company"]],decls:1,vars:0,template:function(e,t){1&e&&i.Ub(0,"router-outlet")},directives:[o.g],styles:["i[_ngcontent-%COMP%]{cursor:pointer}"]}),e})();var s=a("CG1p"),c=a("3Pt+"),l=a("H+bZ"),b=a("cnwL");function d(e,t){if(1&e&&(i.Zb(0,"p",47),i.Zb(1,"strong"),i.Ic(2),i.Yb(),i.Yb()),2&e){const e=i.jc();i.Hb(2),i.Jc(e.errMsg)}}function m(e,t){if(1&e&&(i.Zb(0,"p",48),i.Zb(1,"strong"),i.Ic(2),i.Yb(),i.Yb()),2&e){const e=i.jc();i.Hb(2),i.Jc(e.successMsg)}}function p(e,t){if(1&e&&(i.Zb(0,"div",50),i.Ic(1),i.Yb()),2&e){const e=i.jc().$implicit;i.Hb(1),i.Kc(" ",e.message," ")}}function g(e,t){if(1&e&&(i.Zb(0,"div"),i.Gc(1,p,2,1,"div",49),i.Yb()),2&e){const e=t.$implicit,a=i.jc();i.Hb(1),i.pc("ngIf",a.companyForm.get("name").hasError(e.type)&&(a.companyForm.get("name").dirty||a.companyForm.get("name").touched))}}function u(e,t){if(1&e&&(i.Zb(0,"div",50),i.Ic(1),i.Yb()),2&e){const e=i.jc().$implicit;i.Hb(1),i.Kc(" ",e.message," ")}}function f(e,t){if(1&e&&(i.Zb(0,"div"),i.Gc(1,u,2,1,"div",49),i.Yb()),2&e){const e=t.$implicit,a=i.jc();i.Hb(1),i.pc("ngIf",a.companyForm.get("address").hasError(e.type)&&(a.companyForm.get("address").dirty||a.companyForm.get("address").touched))}}function h(e,t){if(1&e){const e=i.ac();i.Zb(0,"div",16),i.Zb(1,"label",17),i.Zb(2,"b"),i.Ic(3,"State:"),i.Yb(),i.Yb(),i.Zb(4,"select",51),i.gc("change",(function(){return i.Bc(e),i.jc().stateName()})),i.Yb(),i.Yb()}}function y(e,t){1&e&&(i.Zb(0,"div",16),i.Zb(1,"label",17),i.Zb(2,"b"),i.Ic(3,"State:"),i.Yb(),i.Yb(),i.Zb(4,"select",52),i.Zb(5,"option",53),i.Ic(6,"----Country Not Selected----"),i.Yb(),i.Yb(),i.Yb())}function v(e,t){if(1&e&&(i.Zb(0,"div",50),i.Ic(1),i.Yb()),2&e){const e=i.jc().$implicit;i.Hb(1),i.Kc(" ",e.message," ")}}function Z(e,t){if(1&e&&(i.Zb(0,"div"),i.Gc(1,v,2,1,"div",49),i.Yb()),2&e){const e=t.$implicit,a=i.jc();i.Hb(1),i.pc("ngIf",a.companyForm.get("domicile").hasError(e.type)&&(a.companyForm.get("domicile").dirty||a.companyForm.get("domicile").touched))}}function Y(e,t){if(1&e&&(i.Zb(0,"div",50),i.Ic(1),i.Yb()),2&e){const e=i.jc().$implicit;i.Hb(1),i.Kc(" ",e.message," ")}}function C(e,t){if(1&e&&(i.Zb(0,"div"),i.Gc(1,Y,2,1,"div",49),i.Yb()),2&e){const e=t.$implicit,a=i.jc();i.Hb(1),i.pc("ngIf",a.companyForm.get("fax").hasError(e.type)&&(a.companyForm.get("fax").dirty||a.companyForm.get("fax").touched))}}function I(e,t){if(1&e&&(i.Zb(0,"div",50),i.Ic(1),i.Yb()),2&e){const e=i.jc().$implicit;i.Hb(1),i.Kc(" ",e.message," ")}}function x(e,t){if(1&e&&(i.Zb(0,"div"),i.Gc(1,I,2,1,"div",49),i.Yb()),2&e){const e=t.$implicit,a=i.jc();i.Hb(1),i.pc("ngIf",a.companyForm.get("email").hasError(e.type)&&(a.companyForm.get("email").dirty||a.companyForm.get("email").touched))}}function N(e,t){if(1&e&&(i.Zb(0,"div",50),i.Ic(1),i.Yb()),2&e){const e=i.jc().$implicit;i.Hb(1),i.Kc(" ",e.message," ")}}function F(e,t){if(1&e&&(i.Zb(0,"div"),i.Gc(1,N,2,1,"div",49),i.Yb()),2&e){const e=t.$implicit,a=i.jc();i.Hb(1),i.pc("ngIf",a.companyForm.get("outGoingMails").hasError(e.type)&&(a.companyForm.get("outGoingMails").dirty||a.companyForm.get("outGoingMails").touched))}}function w(e,t){if(1&e&&(i.Zb(0,"div",50),i.Ic(1),i.Yb()),2&e){const e=i.jc().$implicit;i.Hb(1),i.Kc(" ",e.message," ")}}function M(e,t){if(1&e&&(i.Zb(0,"div"),i.Gc(1,w,2,1,"div",49),i.Yb()),2&e){const e=t.$implicit,a=i.jc();i.Hb(1),i.pc("ngIf",a.companyForm.get("bankAccNum").hasError(e.type)&&(a.companyForm.get("bankAccNum").dirty||a.companyForm.get("bankAccNum").touched))}}function D(e,t){if(1&e&&(i.Zb(0,"div",50),i.Ic(1),i.Yb()),2&e){const e=i.jc().$implicit;i.Hb(1),i.Kc(" ",e.message," ")}}function A(e,t){if(1&e&&(i.Zb(0,"div"),i.Gc(1,D,2,1,"div",49),i.Yb()),2&e){const e=t.$implicit,a=i.jc();i.Hb(1),i.pc("ngIf",a.companyForm.get("officialNumber").hasError(e.type)&&(a.companyForm.get("officialNumber").dirty||a.companyForm.get("officialNumber").touched))}}function H(e,t){if(1&e&&(i.Zb(0,"div",50),i.Ic(1),i.Yb()),2&e){const e=i.jc().$implicit;i.Hb(1),i.Kc(" ",e.message," ")}}function E(e,t){if(1&e&&(i.Zb(0,"div"),i.Gc(1,H,2,1,"div",49),i.Yb()),2&e){const e=t.$implicit,a=i.jc();i.Hb(1),i.pc("ngIf",a.companyForm.get("taxationNumber").hasError(e.type)&&(a.companyForm.get("taxationNumber").dirty||a.companyForm.get("taxationNumber").touched))}}function O(e,t){if(1&e&&(i.Zb(0,"div",50),i.Ic(1),i.Yb()),2&e){const e=i.jc().$implicit;i.Hb(1),i.Kc(" ",e.message," ")}}function k(e,t){if(1&e&&(i.Zb(0,"div"),i.Gc(1,O,2,1,"div",49),i.Yb()),2&e){const e=t.$implicit,a=i.jc();i.Hb(1),i.pc("ngIf",a.companyForm.get("panNumber").hasError(e.type)&&(a.companyForm.get("panNumber").dirty||a.companyForm.get("panNumber").touched))}}function $(e,t){if(1&e&&(i.Zb(0,"div"),i.Zb(1,"p",54),i.Ic(2),i.Yb(),i.Yb()),2&e){const e=i.jc();i.Hb(2),i.Jc(e.imageError)}}function G(e,t){if(1&e&&(i.Zb(0,"div"),i.Zb(1,"p",54),i.Ic(2),i.Yb(),i.Yb()),2&e){const e=i.jc();i.Hb(2),i.Jc(e.imageErrorMsg)}}const P=function(e){return{display:e}};let T=(()=>{class e{constructor(e,t,a,n,o){this.api=e,this.fb=t,this.ngZone=a,this.router=n,this.util=o,this.successMessage=!1,this.errorMsg=!1,this.stateOption=!1,this.imageError="Image Size should be less than 2MB",this.imageFlag=!1,this.currencyValidationMessage={name:[{type:"required",message:"Currency Name is required"}],code:[{type:"required",message:"Currency Code is required"}]},this.validationMessage={name:[{type:"required",message:"Name is required"}],email:[{type:"required",message:"Email is required"},{type:"pattern",message:"Enter a valid email"}],address:[{type:"required",message:"Address is required"}],officialNumber:[{type:"required",message:"Number is required"},{type:"minlength",message:"Number too short "},{type:"maxlength",message:"Number is too large"},{type:"pattern",message:"Company Number not valid"}],fax:[{type:"minlength",message:"Fax number too short "},{type:"maxlength",message:"Fax no. is too large"},{type:"pattern",message:"Fax Number not valid"}],domicile:[{type:"pattern",message:"Invalid Domicile"}],outGoingMails:[{type:"pattern",message:"Invalid Mail"}],taxNumber:[{type:"pattern",message:"Invalid Taxation No."}],panNo:[{type:"pattern",message:"Invalid PAN No."}],bankAccNum:[{type:"maxlength",message:"Account No. limit exceeded"},{type:"pattern",message:"Invalid Account No."}]}}ngOnInit(){this.permissionsInfo=this.util.permissionRoleInfo,this.companyDataValidate(),populateCountries("country","state"),this.uploadCompanyLogo(),-1===this.permissionsInfo.search("Create Company")&&this.companyForm.disable()}companyDataValidate(){try{this.companyForm=this.fb.group({name:new c.f("",c.v.compose([c.v.required])),officialNumber:new c.f("",c.v.compose([c.v.required,c.v.minLength(10),c.v.maxLength(15),c.v.pattern("^-?[0-9]\\d*(\\.\\d{1,2})?$")])),email:new c.f("",c.v.compose([c.v.required,c.v.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])),fax:new c.f("",c.v.compose([c.v.pattern("^-?[0-9]\\d*(\\.\\d{1,2})?$"),c.v.minLength(10),c.v.maxLength(10)])),address:new c.f("",c.v.required),domicile:new c.f("",c.v.pattern("^[a-zA-Z]*$")),outGoingMails:new c.f("",c.v.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")),taxationNumber:new c.f(""),panNumber:new c.f("",c.v.pattern("(^[A-Za-z]{5}[0-9]{4}[A-Za-z]$)")),bankName:new c.f(""),bankAccNum:new c.f("",c.v.compose([c.v.maxLength(16),c.v.pattern(/^[0-9]*$/)])),bankType:new c.f("")})}catch(e){console.log(e)}}scroll(e){e.scrollIntoView()}companyFormData(){try{let e=this.util.cleanFormLevelOne(this.companyForm);this.companyForm.valid&&this.api.submitCompanyData(e.value,this.selectCountryName,this.selectStateName).subscribe(e=>{if("success"==e.status){let t;sessionStorage.setItem("companyId",e.company._id),t=0!==document.getElementById("companyLogo").value.length,this.api.uploadCompanyLogo(this.companyLogoForm,"Add CompanyLogo",t).subscribe(t=>{"success"===t.status&&(this.successMessage=!0,this.errorMsg=!1,this.successMsg=e.message,setTimeout(()=>{this.handleErrors(),window.location.replace("/pages/dashboard/company-list")},2e3))})}else"error"===e.status&&(this.errorMsg=!0,this.successMessage=!1,this.errMsg=e.message,setTimeout(()=>{this.handleErrors()},2e3))})}catch(e){console.log(e)}}handleErrors(){this.errorMsg=!1,this.successMessage=!1,this.errMsg="",this.successMsg=""}countryName(){"-1"===document.getElementById("country").value?(this.countryMsg="Country Name is Required",this.stateOption=!1):(this.selectCountryName=document.getElementById("country").value,this.countryMsg="",this.stateOption=!0,this.stateName())}stateName(){this.selectStateName=null===document.getElementById("state")||""===document.getElementById("state").value?"":document.getElementById("state").value}uploadCompanyLogo(){try{this.companyLogoForm=this.fb.group({companyLogo:[""]})}catch(e){console.log(e)}}onSelectFile(e){if(e.target.files&&e.target.files[0]){var t=new FileReader;if(t.readAsDataURL(e.target.files[0]),t.onload=e=>{this.url=e.target.result},e.target.files[0].size>2e6)this.imageFlag=!0,this.imageErrorMsg="File Size Exceeded than 2MB";else if(e.target.files.length>0){this.imageFlag=!1,this.imageError="",this.imageErrorMsg="";const t=e.target.files[0];this.companyLogoForm.get("companyLogo").setValue(t)}}}reset(){try{document.getElementById("companyLogo").value="",this.url="",this.imageError="Image Size should be less than 2MB",this.imageFlag=!1}catch(e){console.log(e)}}}return e.\u0275fac=function(t){return new(t||e)(i.Tb(l.a),i.Tb(c.e),i.Tb(i.E),i.Tb(o.b),i.Tb(b.a))},e.\u0275cmp=i.Nb({type:e,selectors:[["app-add-company"]],decls:153,vars:23,consts:[[1,"card","card-user"],[1,"card-header"],[1,"card-title"],["target",""],[1,"card-body"],[1,"col-sm-offset-2"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["role","form","novalidate","",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"form-group"],[1,"col-sm-6","control-label"],[2,"color","darkred"],["type","text","id","inputName","placeholder","Enter Company Name","formControlName","name",1,"form-control"],[4,"ngFor","ngForOf"],["id","inputAddress","placeholder","Address","formControlName","address",1,"form-control"],[1,"form-row"],[1,"form-group","col-md-6"],[1,"col-sm-4","control-label"],["id","country","name","country",1,"dropdown","dropdown-toggle","form-control",3,"change"],[3,"ngStyle"],[2,"color","red"],["class","form-group col-md-6",4,"ngIf"],["type","text","id","inputDomiclie","placeholder","Enter Domicile","formControlName","domicile",1,"form-control"],["type","text","id","inputFax","placeholder","Enter Fax Number:","formControlName","fax",1,"form-control"],["type","email","id","inputEmail","placeholder","Enter Email ","formControlName","email",1,"form-control"],["type","email","id","inputBcc","placeholder","Enter BCC Address","formControlName","outGoingMails",1,"form-control"],["type","text","placeholder","Enter Bank Name ","formControlName","bankName",1,"form-control"],["type","text","placeholder","Enter Account Type","formControlName","bankType",1,"form-control"],[1,"col-md-6"],["placeholder","Enter Account Number","formControlName","bankAccNum",1,"form-control"],["type","text","id","inputCompanyNo","placeholder","Enter Official Company Number","formControlName","officialNumber",1,"form-control"],["type","text","id","inputTaxationno.","placeholder","Enter Taxation Number","formControlName","taxationNumber",1,"form-control"],["onkeyup","this.value = this.value.toUpperCase().trim();","type","text","id","inputPanno.","placeholder","Enter PAN Number","formControlName","panNumber",1,"form-control"],[1,"row"],[1,"col-lg-6","col-md-6","col-sm-6"],[1,"col-lg-10","col-md-6","col-sm-6"],[1,"control-label"],["height","70",3,"src"],["type","file","id","companyLogo","accept","image/*",1,"form-control-file","border",3,"change"],[4,"ngIf"],[1,"col-lg-2","col-md-6","col-sm-6"],[1,"delete-button"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"],[1,"col-sm-offset-2","col-sm-10"],["type","submit",1,"btn","btn-success",3,"disabled","click"],["type","submit","routerLink","/pages/dashboard/company-list",1,"btn","btn-danger"],[1,"alert","alert-danger"],[1,"alert","alert-success"],["style","color:\xa0red;margin-left:\xa014px;","style","color:\xa0red;margin-left:\xa014px;",4,"ngIf"],[2,"color","red","margin-left","14px"],["name","state","id","state",1,"dropdown","dropdown-toggle","form-control",3,"change"],["disabled","",1,"dropdown","dropdown-toggle","form-control"],[1,"drop-down"],[1,"imageError"]],template:function(e,t){if(1&e){const e=i.ac();i.Zb(0,"div",0),i.Zb(1,"div",1),i.Zb(2,"h2",2,3),i.Ic(4,"Company Details"),i.Yb(),i.Yb(),i.Zb(5,"div",4),i.Zb(6,"div",5),i.Gc(7,d,3,1,"p",6),i.Yb(),i.Zb(8,"div",5),i.Gc(9,m,3,1,"p",7),i.Yb(),i.Zb(10,"form",8),i.gc("ngSubmit",(function(){return t.companyFormData()})),i.Zb(11,"div",9),i.Zb(12,"label",10),i.Zb(13,"b"),i.Ic(14,"Name (to appear on reports):\xa0"),i.Zb(15,"span",11),i.Ic(16,"*"),i.Yb(),i.Yb(),i.Yb(),i.Zb(17,"div",5),i.Ub(18,"input",12),i.Gc(19,g,2,1,"div",13),i.Yb(),i.Yb(),i.Zb(20,"div",9),i.Zb(21,"label",10),i.Zb(22,"b"),i.Ic(23,"Address:\xa0"),i.Zb(24,"span",11),i.Ic(25,"*"),i.Yb(),i.Yb(),i.Yb(),i.Zb(26,"div",5),i.Ub(27,"textarea",14),i.Gc(28,f,2,1,"div",13),i.Yb(),i.Yb(),i.Zb(29,"div",15),i.Zb(30,"div",16),i.Zb(31,"label",17),i.Zb(32,"b"),i.Ic(33,"Country:\xa0"),i.Zb(34,"span",11),i.Ic(35,"*"),i.Yb(),i.Yb(),i.Yb(),i.Zb(36,"select",18),i.gc("change",(function(){return t.countryName()})),i.Yb(),i.Zb(37,"div",19),i.Zb(38,"p",20),i.Ic(39),i.Yb(),i.Yb(),i.Yb(),i.Gc(40,h,5,0,"div",21),i.Gc(41,y,7,0,"div",21),i.Yb(),i.Zb(42,"div",15),i.Zb(43,"div",16),i.Zb(44,"div",9),i.Zb(45,"label",10),i.Zb(46,"b"),i.Ic(47,"Domicile:"),i.Yb(),i.Yb(),i.Zb(48,"div",5),i.Ub(49,"input",22),i.Gc(50,Z,2,1,"div",13),i.Yb(),i.Yb(),i.Yb(),i.Zb(51,"div",16),i.Zb(52,"div",9),i.Zb(53,"label",10),i.Zb(54,"b"),i.Ic(55,"Fax Number:"),i.Yb(),i.Yb(),i.Zb(56,"div",5),i.Ub(57,"input",23),i.Gc(58,C,2,1,"div",13),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Zb(59,"div",15),i.Zb(60,"div",16),i.Zb(61,"div",9),i.Zb(62,"label",10),i.Zb(63,"b"),i.Ic(64,"Email Address:\xa0"),i.Zb(65,"span",11),i.Ic(66,"*"),i.Yb(),i.Yb(),i.Yb(),i.Zb(67,"div",5),i.Ub(68,"input",24),i.Gc(69,x,2,1,"div",13),i.Yb(),i.Yb(),i.Yb(),i.Zb(70,"div",16),i.Zb(71,"div",9),i.Zb(72,"label",10),i.Zb(73,"b"),i.Ic(74,"BCC Address for all outgoing mails:"),i.Yb(),i.Yb(),i.Zb(75,"div",5),i.Ub(76,"input",25),i.Gc(77,F,2,1,"div",13),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Zb(78,"div",15),i.Zb(79,"div",16),i.Zb(80,"div",9),i.Zb(81,"label",10),i.Zb(82,"b"),i.Ic(83,"Bank Name:"),i.Yb(),i.Yb(),i.Zb(84,"div",5),i.Ub(85,"input",26),i.Yb(),i.Yb(),i.Yb(),i.Zb(86,"div",16),i.Zb(87,"div",9),i.Zb(88,"label",10),i.Zb(89,"b"),i.Ic(90,"Account Type:"),i.Yb(),i.Yb(),i.Zb(91,"div",5),i.Ub(92,"input",27),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Zb(93,"div",15),i.Zb(94,"div",28),i.Zb(95,"div",9),i.Zb(96,"label",10),i.Zb(97,"b"),i.Ic(98,"Account Number:"),i.Yb(),i.Yb(),i.Zb(99,"div",5),i.Ub(100,"input",29),i.Gc(101,M,2,1,"div",13),i.Yb(),i.Yb(),i.Yb(),i.Zb(102,"div",16),i.Zb(103,"div",9),i.Zb(104,"label",10),i.Zb(105,"b"),i.Ic(106,"Official Company Number:\xa0"),i.Zb(107,"span",11),i.Ic(108,"*"),i.Yb(),i.Yb(),i.Yb(),i.Zb(109,"div",5),i.Ub(110,"input",30),i.Gc(111,A,2,1,"div",13),i.Yb(),i.Yb(),i.Yb(),i.Zb(112,"div",28),i.Zb(113,"div",9),i.Zb(114,"label",10),i.Zb(115,"b"),i.Ic(116,"Taxation No:"),i.Yb(),i.Yb(),i.Zb(117,"div",5),i.Ub(118,"input",31),i.Gc(119,E,2,1,"div",13),i.Yb(),i.Yb(),i.Yb(),i.Zb(120,"div",28),i.Zb(121,"div",9),i.Zb(122,"label",10),i.Zb(123,"b"),i.Ic(124,"PAN (Permanent Account Number):"),i.Yb(),i.Yb(),i.Zb(125,"div",5),i.Ub(126,"input",32),i.Gc(127,k,2,1,"div",13),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Zb(128,"div",33),i.Zb(129,"div",34),i.Zb(130,"div",33),i.Zb(131,"div",35),i.Zb(132,"div",9),i.Zb(133,"label",36),i.Zb(134,"b"),i.Ic(135,"Company Logo:"),i.Yb(),i.Yb(),i.Ub(136,"br"),i.Ub(137,"img",37),i.Zb(138,"input",38),i.gc("change",(function(e){return t.onSelectFile(e)})),i.Yb(),i.Gc(139,$,3,1,"div",39),i.Gc(140,G,3,1,"div",39),i.Yb(),i.Yb(),i.Zb(141,"div",40),i.Zb(142,"div",41),i.Zb(143,"button",42),i.gc("click",(function(){return t.reset()})),i.Ub(144,"i",43),i.Ic(145,"\xa0 Reset"),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Ub(146,"div",34),i.Yb(),i.Zb(147,"div",9),i.Zb(148,"div",44),i.Zb(149,"button",45),i.gc("click",(function(){i.Bc(e);const a=i.Ac(3);return t.scroll(a)})),i.Ic(150,"Add Company"),i.Yb(),i.Zb(151,"button",46),i.Ic(152,"Cancel"),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Yb()}2&e&&(i.Hb(7),i.pc("ngIf",t.errorMsg),i.Hb(2),i.pc("ngIf",t.successMessage),i.Hb(1),i.pc("formGroup",t.companyForm),i.Hb(9),i.pc("ngForOf",t.validationMessage.name),i.Hb(9),i.pc("ngForOf",t.validationMessage.address),i.Hb(9),i.pc("ngStyle",i.vc(21,P,void 0===t.countryMsg?"none":"block")),i.Hb(2),i.Jc(t.countryMsg),i.Hb(1),i.pc("ngIf",t.stateOption),i.Hb(1),i.pc("ngIf",!t.stateOption),i.Hb(9),i.pc("ngForOf",t.validationMessage.domicile),i.Hb(8),i.pc("ngForOf",t.validationMessage.fax),i.Hb(11),i.pc("ngForOf",t.validationMessage.email),i.Hb(8),i.pc("ngForOf",t.validationMessage.outGoingMails),i.Hb(24),i.pc("ngForOf",t.validationMessage.bankAccNum),i.Hb(10),i.pc("ngForOf",t.validationMessage.officialNumber),i.Hb(8),i.pc("ngForOf",t.validationMessage.taxNumber),i.Hb(8),i.pc("ngForOf",t.validationMessage.panNo),i.Hb(10),i.pc("src",t.url,i.Cc),i.Hb(2),i.pc("ngIf",!t.imageFlag),i.Hb(1),i.pc("ngIf",t.imageFlag),i.Hb(9),i.pc("disabled",t.companyForm.invalid||t.countryMsg||void 0===t.countryMsg||t.imageFlag))},directives:[n.m,c.x,c.o,c.i,c.c,c.n,c.g,n.l,n.n,o.c,c.q,c.w],styles:[".card-title[_ngcontent-%COMP%]{text-align:center}.dropdown[_ngcontent-%COMP%]{max-height:35px}.btn-circle[_ngcontent-%COMP%]{cursor:pointer}.delete-button[_ngcontent-%COMP%]{margin:15px 0}.delete-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:6px;background:#a20909;margin-top:30px}.imageError[_ngcontent-%COMP%]{color:#a20807;margin-left:34%;margin-top:6px;font-weight:400}"]}),e})();var L=a("dvO3");function j(e,t){if(1&e&&(i.Zb(0,"p",39),i.Zb(1,"strong"),i.Ic(2),i.Yb(),i.Yb()),2&e){const e=i.jc();i.Hb(2),i.Jc(e.errMsg)}}function R(e,t){if(1&e&&(i.Zb(0,"p",40),i.Zb(1,"strong"),i.Ic(2),i.Yb(),i.Yb()),2&e){const e=i.jc();i.Hb(2),i.Jc(e.successMsg)}}function z(e,t){if(1&e&&(i.Zb(0,"div",42),i.Ic(1),i.Yb()),2&e){const e=i.jc().$implicit;i.Hb(1),i.Kc(" ",e.message," ")}}function U(e,t){if(1&e&&(i.Zb(0,"div"),i.Gc(1,z,2,1,"div",41),i.Yb()),2&e){const e=t.$implicit,a=i.jc();i.Hb(1),i.pc("ngIf",a.updateCompanyForm.get("name").hasError(e.type)&&(a.updateCompanyForm.get("name").dirty||a.updateCompanyForm.get("name").touched))}}function S(e,t){if(1&e&&(i.Zb(0,"div",42),i.Ic(1),i.Yb()),2&e){const e=i.jc().$implicit;i.Hb(1),i.Kc(" ",e.message," ")}}function q(e,t){if(1&e&&(i.Zb(0,"div"),i.Gc(1,S,2,1,"div",41),i.Yb()),2&e){const e=t.$implicit,a=i.jc();i.Hb(1),i.pc("ngIf",a.updateCompanyForm.get("address").hasError(e.type)&&(a.updateCompanyForm.get("address").dirty||a.updateCompanyForm.get("address").touched))}}function B(e,t){if(1&e&&(i.Zb(0,"div",42),i.Ic(1),i.Yb()),2&e){const e=i.jc().$implicit;i.Hb(1),i.Kc(" ",e.message," ")}}function _(e,t){if(1&e&&(i.Zb(0,"div"),i.Gc(1,B,2,1,"div",41),i.Yb()),2&e){const e=t.$implicit,a=i.jc();i.Hb(1),i.pc("ngIf",a.updateCompanyForm.get("domicile").hasError(e.type)&&(a.updateCompanyForm.get("domicile").dirty||a.updateCompanyForm.get("domicile").touched))}}function V(e,t){if(1&e&&(i.Zb(0,"div",42),i.Ic(1),i.Yb()),2&e){const e=i.jc().$implicit;i.Hb(1),i.Kc(" ",e.message," ")}}function K(e,t){if(1&e&&(i.Zb(0,"div"),i.Gc(1,V,2,1,"div",41),i.Yb()),2&e){const e=t.$implicit,a=i.jc();i.Hb(1),i.pc("ngIf",a.updateCompanyForm.get("bankAccNum").hasError(e.type)&&(a.updateCompanyForm.get("bankAccNum").dirty||a.updateCompanyForm.get("bankAccNum").touched))}}function J(e,t){if(1&e&&(i.Zb(0,"div",42),i.Ic(1),i.Yb()),2&e){const e=i.jc().$implicit;i.Hb(1),i.Kc(" ",e.message," ")}}function W(e,t){if(1&e&&(i.Zb(0,"div"),i.Gc(1,J,2,1,"div",41),i.Yb()),2&e){const e=t.$implicit,a=i.jc();i.Hb(1),i.pc("ngIf",a.updateCompanyForm.get("officialNumber").hasError(e.type)&&(a.updateCompanyForm.get("officialNumber").dirty||a.updateCompanyForm.get("officialNumber").touched))}}function X(e,t){if(1&e&&(i.Zb(0,"div",42),i.Ic(1),i.Yb()),2&e){const e=i.jc().$implicit;i.Hb(1),i.Kc(" ",e.message," ")}}function Q(e,t){if(1&e&&(i.Zb(0,"div"),i.Gc(1,X,2,1,"div",41),i.Yb()),2&e){const e=t.$implicit,a=i.jc();i.Hb(1),i.pc("ngIf",a.updateCompanyForm.get("fax").hasError(e.type)&&(a.updateCompanyForm.get("fax").dirty||a.updateCompanyForm.get("fax").touched))}}function ee(e,t){if(1&e&&(i.Zb(0,"div",42),i.Ic(1),i.Yb()),2&e){const e=i.jc().$implicit;i.Hb(1),i.Kc(" ",e.message," ")}}function te(e,t){if(1&e&&(i.Zb(0,"div"),i.Gc(1,ee,2,1,"div",43),i.Yb()),2&e){const e=t.$implicit,a=i.jc();i.Hb(1),i.pc("ngIf",a.updateCompanyForm.get("taxationNumber").hasError(e.type)&&(a.updateCompanyForm.get("taxationNumber").dirty||a.updateCompanyForm.get("taxationNumber").touched))}}function ae(e,t){if(1&e&&(i.Zb(0,"div",42),i.Ic(1),i.Yb()),2&e){const e=i.jc().$implicit;i.Hb(1),i.Kc(" ",e.message," ")}}function ne(e,t){if(1&e&&(i.Zb(0,"div"),i.Gc(1,ae,2,1,"div",43),i.Yb()),2&e){const e=t.$implicit,a=i.jc();i.Hb(1),i.pc("ngIf",a.updateCompanyForm.get("panNumber").hasError(e.type)&&(a.updateCompanyForm.get("panNumber").dirty||a.updateCompanyForm.get("panNumber").touched))}}let oe=(()=>{class e{constructor(e,t,a,n,o,i){this.route=e,this.api=t,this.fb=a,this.ngZone=n,this.router=o,this.util=i,this.successMessage=!1,this.errorMsg=!1,this.validationMessage={name:[{type:"required",message:"Name is required"}],address:[{type:"required",message:"Address is required"}],officialNumber:[{type:"required",message:"Official Number is required"},{type:"minlength",message:"Number too short "},{type:"maxlength",message:"Number is too large"},{type:"pattern",message:"Company Number not valid"}],fax:[{type:"minlength",message:"Fax number too short "},{type:"maxlength",message:"Fax no. is too large"},{type:"pattern",message:"Fax Number not valid"}],domicile:[{type:"pattern",message:"Invalid Domicile"}],outGoingMails:[{type:"pattern",message:"Invalid Mail"}],taxNumber:[{type:"pattern",message:"Invalid Taxation No."}],panNo:[{type:"pattern",message:"Invalid PAN No."}],bankAccNum:[{type:"maxlength",message:"Account No. limit exceeded"},{type:"pattern",message:"Invalid Account No."}]}}ngOnDestroy(){document.getElementById("headerCompanyDropDown").removeAttribute("disabled")}ngOnInit(){this.permissionInfo=this.util.permissionRoleInfo,document.getElementById("headerCompanyDropDown").setAttribute("disabled","disabled"),this.snapshotParam=this.route.snapshot.paramMap.get("companyId"),this.formValidation(),this.existingCompanyDataValues(),this.updateComapnyLogo(),-1===this.permissionInfo.search("Edit Company")&&this.updateCompanyForm.disable()}formValidation(){try{this.updateCompanyForm=this.fb.group({name:new c.f("",c.v.required),officialNumber:new c.f("",c.v.compose([c.v.required,c.v.minLength(10),c.v.maxLength(15),c.v.pattern("^-?[0-9]\\d*(\\.\\d{1,2})?$")])),email:new c.f("",c.v.compose([c.v.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])),fax:new c.f("",c.v.compose([c.v.pattern("^-?[0-9]\\d*(\\.\\d{1,2})?$"),c.v.minLength(10),c.v.maxLength(10)])),address:new c.f("",c.v.required),domicile:new c.f("",c.v.pattern("^[a-zA-Z]*$")),outGoingMails:new c.f("",c.v.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")),taxationNumber:new c.f(""),panNumber:new c.f("",c.v.pattern("(^[A-Za-z]{5}[0-9]{4}[A-Za-z]$)")),bankName:new c.f(""),bankAccNum:new c.f("",c.v.compose([c.v.maxLength(16),c.v.pattern(/^[0-9]*$/)])),bankType:new c.f("")})}catch(e){console.log(e.message)}}existingCompanyDataValues(){try{this.api.getIndividualData(this.snapshotParam).subscribe(e=>{"success"!==e.status&&200!==e.status||(console.log(e),this.url=e.data.logoUrl,this.existingUrl=e.data.logoUrl,this.listCompanyData=e.data,this.updateCompanyForm=this.fb.group({name:new c.f(this.listCompanyData.name,c.v.required),officialNumber:new c.f(this.listCompanyData.officialNumber,c.v.compose([c.v.required,c.v.minLength(10),c.v.maxLength(15),c.v.pattern("^-?[0-9]\\d*(\\.\\d{1,2})?$")])),email:new c.f(this.listCompanyData.email,c.v.compose([c.v.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])),fax:new c.f(this.listCompanyData.fax,c.v.compose([c.v.pattern("^-?[0-9]\\d*(\\.\\d{1,2})?$"),c.v.minLength(10),c.v.maxLength(10)])),address:new c.f(this.listCompanyData.address,c.v.required),domicile:new c.f(this.listCompanyData.domicile,c.v.pattern("^[a-zA-Z]*$")),taxationNumber:new c.f(this.listCompanyData.taxationNumber),panNumber:new c.f(this.listCompanyData.panNumber,c.v.pattern("(^[A-Za-z]{5}[0-9]{4}[A-Za-z]$)")),bankName:new c.f(this.listCompanyData.bankName),bankAccNum:new c.f(this.listCompanyData.bankAccNum,c.v.compose([c.v.maxLength(16),c.v.pattern(/^[0-9]*$/)])),bankType:new c.f(this.listCompanyData.bankType)}))})}catch(e){console.log(e)}}updateCompanyFormData(){try{let e=this.util.cleanFormLevelOne(this.updateCompanyForm);this.updateCompanyForm.valid&&this.api.submitUpdateCompanyData(e.value,this.snapshotParam).subscribe(e=>{if("success"===e.status||200===e.status){let t;t=0!==document.getElementById("updateCompanyLogo").value.length,this.api.uploadCompanyLogo(this.updateCompanyLogoForm,"Update CompanyLogo",t).subscribe(t=>{"success"===t.status&&(this.successMessage=!0,this.errorMsg=!1,this.successMsg=e.message,setTimeout(()=>{this.handleErrors(),window.location.replace("/pages/dashboard/company-list")},2e3))})}else"error"==e.status&&(this.errorMsg=!0,this.successMessage=!1,this.errMsg=e.message,setTimeout(()=>{this.handleErrors()},2e3))})}catch(e){console.log(e)}}scroll(e){e.scrollIntoView()}handleErrors(){this.errorMsg=!1,this.successMessage=!1,this.errMsg="",this.successMsg=""}onSelectFile(e){if(e.target.files&&e.target.files[0]){var t=new FileReader;if(t.readAsDataURL(e.target.files[0]),t.onload=e=>{this.url=e.target.result},e.target.files.length>0){const t=e.target.files[0];this.updateCompanyLogoForm.get("companyLogo").setValue(t)}}}updateComapnyLogo(){try{this.updateCompanyLogoForm=this.fb.group({companyLogo:[""]})}catch(e){console.log(e)}}reset(){try{this.url=this.existingUrl}catch(e){console.log(e)}}}return e.\u0275fac=function(t){return new(t||e)(i.Tb(o.a),i.Tb(l.a),i.Tb(c.e),i.Tb(i.E),i.Tb(o.b),i.Tb(b.a))},e.\u0275cmp=i.Nb({type:e,selectors:[["app-update-company-list"]],features:[i.Gb([L.a])],decls:120,vars:13,consts:[[1,"card","card-user"],[1,"card-header"],["target",""],[1,"card-title",2,"text-align","center"],[1,"col-sm-offset-2"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],[1,"card-body"],["role","form","novalidate","",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"form-group"],[1,"col-sm-6","control-label"],[2,"color","darkred"],["type","text","placeholder","Enter Company Name","formControlName","name",1,"form-control"],[4,"ngFor","ngForOf"],["id","inputAddress","placeholder","Address","formControlName","address",1,"form-control"],[1,"form-row"],[1,"form-group","col-md-6"],["type","text","id","inputDomiclie","placeholder","Enter Domicile","formControlName","domicile",1,"form-control"],["type","text","placeholder","Enter Bank Name:","formControlName","bankName",1,"form-control"],["type","text","placeholder","Enter Account Type:","formControlName","bankType",1,"form-control"],["type","text","placeholder","Enter Account Number:","formControlName","bankAccNum",1,"form-control"],["type","text","id","inputCompanyNo","placeholder","Enter Official Company Number","formControlName","officialNumber",1,"form-control"],["type","text","id","inputFax","placeholder","Enter Fax Number:","formControlName","fax",1,"form-control"],[1,"row"],[1,"col-md-6"],["type","text","id","inputTaxationno.","placeholder","Enter Taxation Number","formControlName","taxationNumber",1,"form-control"],["onkeyup","this.value = this.value.toUpperCase();","type","text","id","inputPanno.","placeholder","Enter PAN Number","formControlName","panNumber",1,"form-control"],[1,"col-lg-6","col-md-6","col-sm-6"],[1,"col-lg-10","col-md-6","col-sm-6"],[1,"control-label"],["height","70",3,"src"],["type","file","id","updateCompanyLogo","accept","image/*",1,"form-control-file","border",3,"change"],[1,"col-lg-2","col-md-6","col-sm-6"],[1,"delete-button"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"],[1,"col-sm-offset-2","col-sm-10"],["type","submit",1,"btn","btn-success",3,"disabled","click"],["type","button","routerLink","/pages/dashboard/company-list",1,"btn","btn-danger"],[1,"alert","alert-danger"],[1,"alert","alert-success"],["style","color:\xa0red;margin-left:\xa014px;",4,"ngIf"],[2,"color","red","margin-left","14px"],["style","color:\xa0red;margin-left:\xa014px;","style","color:\xa0red;margin-left:\xa014px;",4,"ngIf"]],template:function(e,t){if(1&e){const e=i.ac();i.Zb(0,"div",0),i.Zb(1,"div",1,2),i.Zb(3,"h2",3),i.Ic(4,"Update Company Details"),i.Yb(),i.Yb(),i.Zb(5,"div",4),i.Gc(6,j,3,1,"p",5),i.Yb(),i.Zb(7,"div",4),i.Gc(8,R,3,1,"p",6),i.Yb(),i.Zb(9,"div",7),i.Zb(10,"form",8),i.gc("ngSubmit",(function(){return t.updateCompanyFormData()})),i.Zb(11,"div",9),i.Zb(12,"label",10),i.Zb(13,"b"),i.Ic(14,"Name (to appear on reports):\xa0"),i.Zb(15,"span",11),i.Ic(16,"*"),i.Yb(),i.Yb(),i.Yb(),i.Zb(17,"div",4),i.Ub(18,"input",12),i.Gc(19,U,2,1,"div",13),i.Yb(),i.Yb(),i.Zb(20,"div",9),i.Zb(21,"label",10),i.Zb(22,"b"),i.Ic(23,"Address:\xa0"),i.Zb(24,"span",11),i.Ic(25,"*"),i.Yb(),i.Yb(),i.Yb(),i.Zb(26,"div",4),i.Ub(27,"textarea",14),i.Gc(28,q,2,1,"div",13),i.Yb(),i.Yb(),i.Zb(29,"div",15),i.Zb(30,"div",16),i.Zb(31,"div",9),i.Zb(32,"label",10),i.Zb(33,"b"),i.Ic(34,"Domicile:"),i.Yb(),i.Yb(),i.Zb(35,"div",4),i.Ub(36,"input",17),i.Gc(37,_,2,1,"div",13),i.Yb(),i.Yb(),i.Yb(),i.Zb(38,"div",16),i.Zb(39,"div",9),i.Zb(40,"label",10),i.Zb(41,"b"),i.Ic(42,"Bank Name:"),i.Yb(),i.Yb(),i.Zb(43,"div",4),i.Ub(44,"input",18),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Zb(45,"div",15),i.Zb(46,"div",16),i.Zb(47,"div",9),i.Zb(48,"label",10),i.Zb(49,"b"),i.Ic(50,"Account Type:"),i.Yb(),i.Yb(),i.Zb(51,"div",4),i.Ub(52,"input",19),i.Yb(),i.Yb(),i.Yb(),i.Zb(53,"div",16),i.Zb(54,"div",9),i.Zb(55,"label",10),i.Zb(56,"b"),i.Ic(57,"Account Number:"),i.Yb(),i.Yb(),i.Zb(58,"div",4),i.Ub(59,"input",20),i.Gc(60,K,2,1,"div",13),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Zb(61,"div",15),i.Zb(62,"div",16),i.Zb(63,"div",9),i.Zb(64,"label",10),i.Zb(65,"b"),i.Ic(66,"Official Company Number:\xa0"),i.Zb(67,"span",11),i.Ic(68,"*"),i.Yb(),i.Yb(),i.Yb(),i.Zb(69,"div",4),i.Ub(70,"input",21),i.Gc(71,W,2,1,"div",13),i.Yb(),i.Yb(),i.Yb(),i.Zb(72,"div",16),i.Zb(73,"div",9),i.Zb(74,"label",10),i.Zb(75,"b"),i.Ic(76,"Fax Number:"),i.Yb(),i.Yb(),i.Zb(77,"div",4),i.Ub(78,"input",22),i.Gc(79,Q,2,1,"div",13),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Zb(80,"div",23),i.Zb(81,"div",24),i.Zb(82,"div",9),i.Zb(83,"label",10),i.Zb(84,"b"),i.Ic(85,"Taxation No:"),i.Yb(),i.Yb(),i.Zb(86,"div",4),i.Ub(87,"input",25),i.Gc(88,te,2,1,"div",13),i.Yb(),i.Yb(),i.Yb(),i.Zb(89,"div",24),i.Zb(90,"div",9),i.Zb(91,"label",10),i.Zb(92,"b"),i.Ic(93,"PAN (Permanent Account Number):"),i.Yb(),i.Yb(),i.Zb(94,"div",4),i.Ub(95,"input",26),i.Gc(96,ne,2,1,"div",13),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Zb(97,"div",23),i.Zb(98,"div",27),i.Zb(99,"div",23),i.Zb(100,"div",28),i.Zb(101,"div",9),i.Zb(102,"label",29),i.Zb(103,"b"),i.Ic(104,"Company Logo:"),i.Yb(),i.Yb(),i.Ub(105,"br"),i.Ub(106,"img",30),i.Zb(107,"input",31),i.gc("change",(function(e){return t.onSelectFile(e)})),i.Yb(),i.Yb(),i.Yb(),i.Zb(108,"div",32),i.Zb(109,"div",33),i.Zb(110,"button",34),i.gc("click",(function(){return t.reset()})),i.Ub(111,"i",35),i.Ic(112,"\xa0 Reset"),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Ub(113,"div",27),i.Yb(),i.Zb(114,"div",9),i.Zb(115,"div",36),i.Zb(116,"button",37),i.gc("click",(function(){i.Bc(e);const a=i.Ac(2);return t.scroll(a)})),i.Ic(117,"Update Company"),i.Yb(),i.Zb(118,"button",38),i.Ic(119,"Cancel"),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Yb()}2&e&&(i.Hb(6),i.pc("ngIf",t.errorMsg),i.Hb(2),i.pc("ngIf",t.successMessage),i.Hb(2),i.pc("formGroup",t.updateCompanyForm),i.Hb(9),i.pc("ngForOf",t.validationMessage.name),i.Hb(9),i.pc("ngForOf",t.validationMessage.address),i.Hb(9),i.pc("ngForOf",t.validationMessage.domicile),i.Hb(23),i.pc("ngForOf",t.validationMessage.bankAccNum),i.Hb(11),i.pc("ngForOf",t.validationMessage.officialNumber),i.Hb(8),i.pc("ngForOf",t.validationMessage.fax),i.Hb(9),i.pc("ngForOf",t.validationMessage.taxNumber),i.Hb(8),i.pc("ngForOf",t.validationMessage.panNo),i.Hb(10),i.pc("src",t.url,i.Cc),i.Hb(10),i.pc("disabled",t.updateCompanyForm.invalid||-1===t.permissionInfo.search("Edit Company")))},directives:[n.m,c.x,c.o,c.i,c.c,c.n,c.g,n.l,o.c],styles:[".delete-button[_ngcontent-%COMP%]{margin:15px 0}.delete-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:6px;background:#a20909}"]}),e})();var ie=a("mrSG"),re=a("6K47"),se=a("Iab2"),ce=a("wd/R"),le=a.n(ce),be=a("y8g4"),de=a("VO+5"),me=a("JqCM"),pe=a("hzby"),ge=a("oOf3");function ue(e,t){if(1&e&&(i.Zb(0,"option",26),i.Ic(1),i.Yb()),2&e){const e=t.$implicit;i.qc("value",e._id),i.Hb(1),i.Jc(e.title)}}function fe(e,t){if(1&e){const e=i.ac();i.Zb(0,"button",27),i.gc("click",(function(){return i.Bc(e),i.jc().generateExcelSheet()})),i.Ub(1,"i",28),i.Ic(2,"Sheet"),i.Yb()}}function he(e,t){1&e&&(i.Zb(0,"div"),i.Zb(1,"p",29),i.Ic(2,"Please fill sufficient data for the view of company reports"),i.Yb(),i.Yb())}function ye(e,t){if(1&e){const e=i.ac();i.Zb(0,"li",30),i.Zb(1,"a",31),i.gc("click",(function(){i.Bc(e);const a=t.$implicit;return i.jc().changeTabData(a.sortingId)})),i.Ic(2),i.Yb(),i.Yb()}if(2&e){const e=t.$implicit,a=t.index;i.Hb(1),i.pc("ngClass",0===a?"active":""),i.Ib("href","#"+e.showMonthName+e.showYear,i.Cc)("aria-controls",e.showMonthName),i.Hb(1),i.Lc("",e.showMonthName," - ",e.showYear,"")}}function ve(e,t){if(1&e&&(i.Zb(0,"th",40),i.Ic(1),i.Yb()),2&e){const e=t.$implicit,a=t.index;i.pc("ngClass",0===a?"sticky-col first-col":1===a?"sticky-col second-col":""),i.Hb(1),i.Jc(e)}}function Ze(e,t){if(1&e&&(i.Zb(0,"td",40),i.Ic(1),i.Yb()),2&e){const e=t.$implicit,a=t.index;i.pc("ngClass",0===a?"sticky-col first-col":1===a?"sticky-col second-col":""),i.Hb(1),i.Jc(e)}}function Ye(e,t){if(1&e&&(i.Zb(0,"tr"),i.Gc(1,Ze,2,2,"td",36),i.Yb()),2&e){const e=t.$implicit;i.Hb(1),i.pc("ngForOf",e)}}const Ce=function(e){return{itemsPerPage:5,currentPage:e}};function Ie(e,t){if(1&e){const e=i.ac();i.Zb(0,"div"),i.Zb(1,"div",33),i.Zb(2,"table",34),i.Zb(3,"thead",35),i.Gc(4,ve,2,2,"th",36),i.Yb(),i.Zb(5,"tbody"),i.Gc(6,Ye,2,1,"tr",37),i.kc(7,"paginate"),i.Yb(),i.Yb(),i.Yb(),i.Zb(8,"div",38),i.Zb(9,"pagination-controls",39),i.gc("pageChange",(function(t){return i.Bc(e),i.jc(2).onPageChange(t)})),i.Yb(),i.Yb(),i.Yb()}if(2&e){const e=i.jc(2);i.Hb(4),i.pc("ngForOf",e.headerData),i.Hb(2),i.pc("ngForOf",i.mc(7,2,e.viewData,i.vc(5,Ce,e.currentPage)))}}function xe(e,t){if(1&e&&(i.Zb(0,"div",32),i.Gc(1,Ie,10,7,"div",20),i.Yb()),2&e){const e=t.$implicit,a=t.index,n=i.jc();i.sc("id","",e.showMonthName,"",e.showYear,""),i.pc("ngClass",0===a?"active":""),i.Hb(1),i.pc("ngIf",0!==n.viewData.length)}}const Ne=[{path:"",component:r,canActivate:[s.a],children:[{path:"add-company",component:T},{path:"update-company-list/:companyId",component:oe},{path:"company-report",component:(()=>{class e{constructor(e,t,a,n,o){this.datePipe=e,this.gradeApi=t,this.apiService=a,this.notifier=n,this.spinner=o,this.earningDetails=[],this.deductionDetails=[],this.headerData=[],this.viewData=[],this.empData=[],this.gradeDetails=[],this.disableFilter=!0,this.excelHeader=[],this.minMode="month",this.sortMonthTabs=[],this.currentPage=1,this.excelViewData=[],this.requestDatePicker={startDate:"",endDate:""},this.bsConfig=Object.assign({},{minMode:this.minMode,rangeInputFormat:"MM-YYYY",dateInputFormat:"MM-YYYY"})}ngOnInit(){this.gradeApi.getGradeRuleList().subscribe(e=>{"success"===e.status&&(this.gradeDetails=e.data)}),this.getAllFilterValues()}getCompanyReport(e){try{this.headerData=[];const t=["Sr No.","Name","Date of Joining","In Hand(P/M)","Bonus","Incentives","Gross","PresentDays","Absent Days","Working Days","Adjust Leave","Per day Salary","Net Salary","Pay Mode"];if(0!==e.gradeRuleInfo.earningsInfo.length){this.earningDetails=[];for(let t of e.gradeRuleInfo.earningsInfo)"Percent"===t.type&&this.earningDetails.push(`${t.name}(${t.value}%)`),"Fixed"===t.type&&this.earningDetails.push(`${t.name}(\u20b9 ${t.value})`),0===t.type.trim().length&&this.earningDetails.push(""+t.name)}if(0!==e.gradeRuleInfo.deductionInfo.length){this.deductionDetails=[];for(let t of e.gradeRuleInfo.deductionInfo)"Percent"===t.type&&this.deductionDetails.push(`${t.name}(${t.value}%)`),"Fixed"===t.type&&this.deductionDetails.push(`${t.name}(\u20b9 ${t.value})`),0===t.type.trim().length&&this.deductionDetails.push(""+t.name)}this.headerData=t.concat(this.earningDetails.concat(this.deductionDetails)),this.viewData=[];for(let a=0;a<e.employeeSheetDetails.length;a++)this.returnSheetValue(e.employeeSheetDetails[a],a+1,this.headerData,"companyReport")}catch(t){console.log(t)}}returnSheetValue(e,t,a,n){let o=[t,e.name,this.datePipe.transform(e.doj,"dd-MM-yyyy"),e.inHand,e.bonus,e.incentives,e.gross,e.presentDays,e.absentDays,e.workingDays,e.adjustLeave,e.everyDaySalary,e.netSalary,e.payMode];for(let i=a.indexOf("Pay Mode")+1;i<a.length;i++){let t=a[i].substr(0,a[i].indexOf("(")).trim();0===t.trim().length&&(t=a[i].trim());let n=e.deductions.map(e=>e.label.trim()).indexOf(t);-1===n?(n=e.earnings.map(e=>e.label.trim()).indexOf(t),o.push(e.earnings[n].amt)):o.push(e.deductions[n].amt)}return"excelReport"===n?this.excelViewData.push(o):this.viewData.push(o)}getAllFilterValues(){try{let e=document.getElementById("gradeOptions").value;this.disableFilter=!(""!==e&&this.requestDatePicker.startDate.trim().length>0&&this.requestDatePicker.endDate.trim().length>0)}catch(e){console.log(e)}}selectGrade(){try{this.getAllFilterValues()}catch(e){console.log(e)}}filterData(){try{this.spinner.show();let e=document.getElementById("gradeOptions").value;this.apiService.getCompanyReport(this.requestDatePicker.startDate,this.requestDatePicker.endDate,e).subscribe(e=>{if(this.spinner.hide(),"success"===e.status){if(0===e.data.length&&this.notifier.notify("info","Company Report Not Available"),0!==e.data.length){this.sortMonthTabs=e.sortingCriteria,this.tableData=e.data;let t=this.tableData.map(e=>e.sheetId).indexOf(this.sortMonthTabs[0].sortingId);this.getCompanyReport(this.tableData[t])}}else"error"===e.status&&(this.tableData=[],this.notifier.notify(e.status,e.message))},e=>{this.spinner.hide(),console.log(e)})}catch(e){this.spinner.hide(),console.log(e)}}reset(){try{document.getElementById("gradeOptions").value="",document.getElementById("rangeDate").value="",this.disableFilter=!0,this.headerData=[],this.excelHeader=[],this.viewData=[],this.sortMonthTabs=[]}catch(e){console.log(e)}}generateExcelSheet(){return Object(ie.b)(this,void 0,void 0,(function*(){try{const e=new re.Workbook;for(let t of this.tableData){const a=e.addWorksheet(`${t.showMonthName} ${t.showYear}`);a.addRow([]),a.mergeCells("L2:R2"),a.getCell("L2").value=`${t.companyExpen.name}, ${t.month} ${t.year}`,a.getCell("L2").fill={type:"pattern",pattern:"solid",fgColor:{argb:"7B7B7B"}},a.getCell("L2").font={name:"Trebuchet MS",family:4,size:20,bold:!0},a.getCell("L2").alignment={vertical:"middle",horizontal:"center",wrapText:!0},a.addRow([]),a.addRow([]);const n=["Sr No.","Name","Date of Joining","In Hand(P/M)","Bonus","Incentives","Gross","PresentDays","Absent Days","Working Days","Adjust Leave","Per day Salary","Net Salary","Pay Mode"];a.mergeCells("A4:M4"),a.getCell("A4:M4").value="Employee Details",a.getCell("A4:M4").fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFE1EFDA"}},a.getCell("A4:M4").alignment={vertical:"middle",horizontal:"center",wrapText:!0},a.getCell("A4:M4").font={name:"Arial",family:4,size:12,bold:!0},a.getCell("A4:M4").border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}};const o=[];if(0!==t.gradeRuleInfo.earningsInfo.length){this.cellValues=this.sheetAlgo(14+t.gradeRuleInfo.earningsInfo.length)+"4",a.mergeCells("N4:"+this.cellValues),a.getCell("N4").value="Total Earnings",a.getCell("N4").fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFE1EFDA"}},a.getCell("N4").alignment={vertical:"middle",horizontal:"center",wrapText:!0},a.getCell("N4").font={name:"Arial",family:4,size:12,bold:!0},a.getCell("N4").border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}};for(let e of t.gradeRuleInfo.earningsInfo)"Percent"===e.type&&o.push(`${e.name}(${e.value}%)`),"Fixed"===e.type&&o.push(`${e.name}(\u20b9 ${e.value})`),0===e.type.trim().length&&o.push(""+e.name)}const i=[];if(0!==t.gradeRuleInfo.deductionInfo.length){let e=`${this.sheetAlgo(14+t.gradeRuleInfo.earningsInfo.length+1)}4:${this.sheetAlgo(14+t.gradeRuleInfo.earningsInfo.length+t.gradeRuleInfo.deductionInfo.length)}4`;a.mergeCells(e),a.getCell(this.sheetAlgo(14+t.gradeRuleInfo.earningsInfo.length+1)+"4").value="Total Deduction",a.getCell(this.sheetAlgo(14+t.gradeRuleInfo.earningsInfo.length+1)+"4").fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFE1EFDA"}},a.getCell(this.sheetAlgo(14+t.gradeRuleInfo.earningsInfo.length+1)+"4").alignment={vertical:"middle",horizontal:"center",wrapText:!0},a.getCell(this.sheetAlgo(14+t.gradeRuleInfo.earningsInfo.length+1)+"4").font={name:"Arial",family:4,size:12,bold:!0},a.getCell(this.sheetAlgo(14+t.gradeRuleInfo.earningsInfo.length+1)+"4").border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}};for(let a of t.gradeRuleInfo.deductionInfo)"Percent"===a.type&&i.push(`${a.name}(${a.value}%)`),"Fixed"===a.type&&i.push(`${a.name}(\u20b9 ${a.value} )`),0===a.type.trim().length&&i.push(""+a.name)}this.excelHeader=n.concat(o.concat(i)),a.addRow(this.excelHeader).eachCell(e=>{e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFE1EFDA"}},e.font={name:"Arial",family:4,size:10,bold:!0},e.alignment={vertical:"middle",horizontal:"center",wrapText:!0},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}});for(let e=0;e<this.excelHeader.length;e++)a.getColumn(e+1).width=20;this.excelViewData=[];for(let e=0;e<t.employeeSheetDetails.length;e++)this.returnSheetValue(t.employeeSheetDetails[e],e+1,this.excelHeader,"excelReport");this.excelViewData.forEach(e=>{a.addRow(e).eachCell((e,t)=>{e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},e.alignment={vertical:"middle",horizontal:"center",wrapText:!0}})}),a.addRow([]),a.addRow([]),a.addRow(["","","Monthly Paid",""]).eachCell(e=>{e.font={name:"Arial",family:4,size:14,bold:!0},e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFDF2CC"}},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},e.alignment={vertical:"middle",horizontal:"center",wrapText:!0}}),a.addRow(["Company Name","Cash","Cheque","Account Transfer"]).eachCell(e=>{e.font={name:"Arial",family:4,size:10,bold:!0},e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFE1EFDA"}},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},e.alignment={vertical:"middle",horizontal:"center",wrapText:!0}}),[[t.companyExpen.name,t.companyExpen.cash,t.companyExpen.cheque,t.companyExpen.bankTransfer]].forEach(e=>{a.addRow(e).eachCell((e,t)=>{e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},e.alignment={vertical:"middle",horizontal:"center",wrapText:!0}})})}e.xlsx.writeBuffer().then(e=>{const t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});se.saveAs(t,this.tableData[0].companyExpen.name+"-report.xlsx"),this.excelHeader=[]})}catch(e){console.log(e)}}))}sheetAlgo(e){let t={1:"A",2:"B",3:"C",4:"D",5:"E",6:"F",7:"G",8:"H",9:"I",10:"J",11:"K",12:"L",13:"M",14:"N",15:"O",16:"P",17:"Q",18:"R",19:"S",20:"T",21:"U",22:"V",23:"W",24:"X",25:"Y",26:"Z"},a=Number(e);if(a>26){let e=(a%26).toString(),n=parseInt((a/26).toString());return"0"===e?t[Number(n)-1]+"Z":`${t[n]}${t[e]}`}return""+t[e]}rangeDatesUpdated(e){try{this.requestDatePicker=null===e||"Invalid Date"===e||e===[null]||null===e[0]||null===e[1]||e.length<2?{startDate:"",endDate:""}:{startDate:le()(e[0]).format("YYYY-MM"),endDate:le()(e[1]).format("YYYY-MM")},this.getAllFilterValues()}catch(t){console.log(t)}}changeTabData(e){try{let t=this.tableData.map(e=>e.sheetId).indexOf(e);this.getCompanyReport(this.tableData[t]),this.currentPage=1}catch(t){console.log(t)}}onPageChange(e){this.currentPage=e}}return e.\u0275fac=function(t){return new(t||e)(i.Tb(n.e),i.Tb(be.a),i.Tb(l.a),i.Tb(de.c),i.Tb(me.c))},e.\u0275cmp=i.Nb({type:e,selectors:[["app-company-report"]],decls:34,vars:7,consts:[["bdColor","rgba(51,51,51,0.8)","size","large","color","#fff","type","square-jelly-box"],[2,"font-size","20px","color","white"],[1,"card","card-user"],[1,"card-header"],[1,"card-title","text-center"],[1,"card-body"],[1,"form-row"],[1,"col-lg-3","col-md-3","col-sm-12"],[1,"form-group"],["id","gradeOptions",1,"dropdown","dropdown-toggle","form-control",3,"change"],["ng-selected","true","value","","selected","",1,"dropdown-item"],["class","dropdown-item",3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Select Months","id","rangeDate","bsDaterangepicker","",1,"form-control",3,"bsConfig","bsValueChange"],[1,"col-lg-6","col-md-6","col-sm-12"],[1,"form-group","right-buttongroup"],[1,"btn","btn-primary","btn-margin",3,"disabled","click"],[1,"fa","fa-filter"],[1,"btn","btn-danger","btn-margin",3,"click"],[1,"fa","fa-trash"],["style","float: right;","class","btn btn-success btn-round btn-margin",3,"click",4,"ngIf"],[4,"ngIf"],["id","myTab","role","tablist",1,"nav","nav-tabs"],["target",""],["class","nav-item",4,"ngFor","ngForOf"],[1,"tab-content"],["class","tab-pane","role","tabpanel",3,"id","ngClass",4,"ngFor","ngForOf"],[1,"dropdown-item",3,"value"],[1,"btn","btn-success","btn-round","btn-margin",2,"float","right",3,"click"],[1,"fas","fa-download"],[1,"text-center",2,"font-size","16px"],[1,"nav-item"],["data-toggle","tab","role","tab",1,"nav-link",3,"ngClass","click"],["role","tabpanel",1,"tab-pane",3,"id","ngClass"],[1,"table-responsive"],[1,"table"],[1,"text-primary"],["class","text-center",3,"ngClass",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"pagination-outer"],["previousLabel","","nextLabel","",3,"pageChange"],[1,"text-center",3,"ngClass"]],template:function(e,t){1&e&&(i.Ub(0,"notifier-container"),i.Zb(1,"ngx-spinner",0),i.Zb(2,"p",1),i.Ic(3,"Loading..."),i.Yb(),i.Yb(),i.Zb(4,"div",2),i.Zb(5,"div",3),i.Zb(6,"h2",4),i.Ic(7,"Company Report"),i.Yb(),i.Yb(),i.Zb(8,"div",5),i.Zb(9,"div",6),i.Zb(10,"div",7),i.Zb(11,"div",8),i.Zb(12,"select",9),i.gc("change",(function(){return t.selectGrade()})),i.Zb(13,"option",10),i.Ic(14,"Select Grade"),i.Yb(),i.Gc(15,ue,2,2,"option",11),i.Yb(),i.Yb(),i.Yb(),i.Zb(16,"div",7),i.Zb(17,"div",8),i.Zb(18,"input",12),i.gc("bsValueChange",(function(e){return t.rangeDatesUpdated(e)})),i.Yb(),i.Yb(),i.Yb(),i.Zb(19,"div",13),i.Zb(20,"div",14),i.Zb(21,"button",15),i.gc("click",(function(){return t.filterData()})),i.Ub(22,"i",16),i.Ic(23,"Filter"),i.Yb(),i.Zb(24,"button",17),i.gc("click",(function(){return t.reset()})),i.Ub(25,"i",18),i.Ic(26,"Reset"),i.Yb(),i.Gc(27,fe,3,0,"button",19),i.Yb(),i.Yb(),i.Yb(),i.Gc(28,he,3,0,"div",20),i.Zb(29,"ul",21,22),i.Gc(31,ye,3,5,"li",23),i.Yb(),i.Zb(32,"div",24),i.Gc(33,xe,2,4,"div",25),i.Yb(),i.Yb(),i.Yb()),2&e&&(i.Hb(15),i.pc("ngForOf",t.gradeDetails),i.Hb(3),i.pc("bsConfig",t.bsConfig),i.Hb(3),i.pc("disabled",t.disableFilter),i.Hb(6),i.pc("ngIf",0!==t.viewData.length),i.Hb(1),i.pc("ngIf",0===t.viewData.length),i.Hb(3),i.pc("ngForOf",t.sortMonthTabs),i.Hb(2),i.pc("ngForOf",t.sortMonthTabs))},directives:[de.a,me.a,c.q,c.w,n.l,pe.e,pe.d,n.m,n.k,ge.c],pipes:[ge.b],styles:[".tdcolumn-width100[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100px;display:block}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:top;white-space:nowrap}.btn-margin[_ngcontent-%COMP%]{margin:0 2px!important}.error-msg[_ngcontent-%COMP%]{color:red;margin-bottom:0!important}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:nowrap}@media screen and (max-width:1200px){.right-buttongroup[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px}}@media screen and (max-width:767px){.right-buttongroup[_ngcontent-%COMP%]{float:right}}.sticky-col[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;background-color:#fff}.first-col[_ngcontent-%COMP%]{width:100px;min-width:100px;max-width:100px;left:0}.second-col[_ngcontent-%COMP%]{width:150px;min-width:150px;max-width:150px;left:100px}"]}),e})()},{path:"",redirectTo:"company-list",pathMatch:"full"}]}];let Fe=(()=>{class e{}return e.\u0275mod=i.Rb({type:e}),e.\u0275inj=i.Qb({factory:function(t){return new(t||e)},imports:[[n.c,o.f.forChild(Ne)]]}),e})();const we={position:{horizontal:{position:"right",distance:12},vertical:{position:"top",distance:12,gap:10}},theme:"material",behaviour:{autoHide:5e3,onClick:"hide",onMouseover:"pauseAutoHide",showDismissButton:!0,stacking:4},animations:{enabled:!0,show:{preset:"slide",speed:300,easing:"ease"},hide:{preset:"fade",speed:300,easing:"ease",offset:50},shift:{speed:300,easing:"ease"},overlap:150}};let Me=(()=>{class e{}return e.\u0275mod=i.Rb({type:e}),e.\u0275inj=i.Qb({factory:function(t){return new(t||e)},imports:[[n.c,Fe,c.j,c.s,o.f,ge.a,de.b.withConfig(we),pe.c.forRoot(),me.b]]}),e})()}}]);
//# sourceMappingURL=13-es2015.a12a273341eb97bc1dc7.js.map