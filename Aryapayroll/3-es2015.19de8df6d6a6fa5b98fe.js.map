{"version":3,"sources":["webpack:///src/app/pages/dashboard/company-list/company-list.component.ts","webpack:///src/app/pages/dashboard/company-list/company-list.component.html"],"names":["CompanyListComponent","api","fb","ngZone","router","spinner","util","showProgress","showCard","companyListData","Object","individualCompanyData","wholeCompanyData","this","permissionsInfo","permissionRoleInfo","getList","getAllCompanyList","show","getIndividualData","sessionStorage","getItem","subscribe","data","status","push","setTimeout","hide","err","console","log","message","getListData","company","length","navigateByUrl","companyId","swalWithBootstrapButtons","mixin","customClass","confirmButton","cancelButton","buttonsStyling","fire","title","text","type","showCancelButton","confirmButtonText","cancelButtonText","reverseButtons","then","result","value","removeData","i","_id","setItem","run","window","location","reload","dismiss","DismissReason","cancel"],"mappings":"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","file":"x","sourcesContent":["import { Component, OnInit, NgZone, Input } from '@angular/core';\nimport { ApiService } from 'src/app/services/api.service';\nimport { FormBuilder } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport Swal from 'sweetalert2';\nimport { NgxSpinnerService } from 'ngx-spinner';\nimport { UtilitiesService } from 'src/app/utilities/utilities.service';\n\n\n@Component({\n  selector: 'app-company-list',\n  templateUrl: './company-list.component.html',\n  styleUrls: ['./company-list.component.scss']\n})\n\nexport class CompanyListComponent implements OnInit {\n  @Input() showProgress:boolean = false;\n  showCard = {};\n  companyListData:any = Object;\n  individualCompanyData = [];\n  companyData: String;\n  companyId:string;\n  wholeCompanyData = [];\n  permissionsInfo: any;\n\n  constructor(private api: ApiService, public fb: FormBuilder, private ngZone: NgZone,\n    private router: Router,\n    private spinner: NgxSpinnerService,\n    private util: UtilitiesService\n    ) {\n   }\n\n  ngOnInit() {\n  this.permissionsInfo = this.util.permissionRoleInfo;\n  this.getList();\n  this.getAllCompanyList();\n  }\n\n  //Method for show data in the list\n  getList() {\n    try {\n      this.spinner.show();\n      this.api.getIndividualData(sessionStorage.getItem('companyId')).subscribe(data => {\n        if (data.status === 'success' || data.status === 200) {\n         this.individualCompanyData.push(data.data);\n         setTimeout(() => {\n          this.spinner.hide();\n         },1000)\n        }\n      })\n    }\n    catch (err) {\n      console.log(err.message);\n    }\n  }\n\n  // Get All Company Lists\n  getAllCompanyList() {\n    try {\n      this.api.getListData().subscribe(data => {\n        if (data.status === 'success' || data.status === 200) {\n          if(data.company.length === 0){\n            this.spinner.hide();\n            this.router.navigateByUrl(\"/pages/company/add-company\");\n          } else {\n            this.wholeCompanyData = data.company;\n          }\n        }\n      })\n    }\n    catch (err) {\n      console.log(err.message);\n    }\n  }\n\n  //Method for onclick data show when collapse\n  showData(companyId: String) {\n    try {\n      this.showCard[`${companyId}`] = !this.showCard[`${companyId}`];\n    }\n    catch (err) {\n      console.log(err.message);\n    }\n  }\n\n  //Method for remove company list\n  showConfirmationMessage(companyId: String) {\n    try {\n      const swalWithBootstrapButtons = Swal.mixin({\n        customClass: {\n          confirmButton: 'btn btn-success',\n          cancelButton: 'btn btn-danger'\n        },\n        buttonsStyling: false\n      })\n      swalWithBootstrapButtons.fire({\n        title: 'Are you sure?',\n        text: \"You want to delete it\",\n        type: 'warning',\n        showCancelButton: true,\n        confirmButtonText: 'Yes',\n        cancelButtonText: 'No',\n        reverseButtons: true\n      }).then((result) => {\n        if (result.value) {\n          this.api.removeData(companyId).subscribe((data) => {\n            if (data.status === \"success\" || data.status === 200) {\n              if(this.wholeCompanyData.length > 0) {\n                for (let i = 0; i<this.wholeCompanyData.length; i++ ){\n                  if(this.wholeCompanyData[i]._id != companyId){\n                    sessionStorage.setItem('companyId',this.wholeCompanyData[i]._id);\n                    break;\n                  } else {\n                    continue;\n                  }\n                }\n              }\n              swalWithBootstrapButtons.fire(\n                'Deleted!',\n                data.message,\n                'success'\n              )\n              this.ngZone.run(()=>{\n                this.router.navigateByUrl('/pages/dashboard/company-list')\n              })\n              window.location.reload();\n            }\n          })\n        } else if (\n          result.dismiss === Swal.DismissReason.cancel\n        ) {\n          swalWithBootstrapButtons.fire(\n            'Cancelled',\n            'Your list data safe',\n            'error'\n          )\n        }\n      })\n    }\n    catch (err) {\n      console.log(err.message);\n    }\n  }\n\n}\n","\n<div class=\"card\">\n        <ngx-spinner\n        bdColor=\"rgba(51,51,51,0.8)\"\n        size=\"large\"\n        color=\"#fff\"\n        type=\"square-jelly-box\"\n      >\n        <p style=\"font-size: 20px; color: white\">Loading...</p>\n      </ngx-spinner>\n    <div class=\"card-header\" style=\"text-align: center\">\n        <h2>Company List</h2>\n        <a [class.disabled]=\"permissionsInfo.search('Create Company') === -1\"\n        class=\"btn btn-primary\" routerLink=\"/pages/company/add-company\" style=\"float: right;\"><i\n                class=\"fa fa-plus-square\"></i>&nbsp; Add Company</a>\n\n\n    </div>\n\n    <div class=\"panel-body\">\n        <ul class=\"list-group\">\n            <li class=\"list-group-item\" *ngFor=\"let list of individualCompanyData\">\n                <strong><b (click)=\"showData(list._id)\" style=\"cursor: pointer\">{{ list.name }}</b></strong>\n                <div style=\"float: right;\">\n                    <i class=\"dropdown-toggle\" (click)=\"showData(list._id)\"></i>\n                </div>\n                <div class=\"card\" style=\"background-color:ghostwhite\" [hidden]=\"showCard[list._id]\">\n                    <table class=\"table\" style=\"margin: auto\">\n                        <tr>\n                            <td><strong>Name:</strong></td>\n                            <td>{{ list.name }}</td>\n                            <td><strong>Address:</strong></td>\n                            <td>{{ list.address}}</td>\n                        </tr>\n                        <tr>\n                            <td><strong>Domicile:</strong></td>\n                            <td>{{ list.domicile}}</td>\n                            <td><strong>Official Company Number:</strong></td>\n                            <td>{{ list.officialNumber}}</td>\n                        </tr>\n                        <tr>\n                            <td><strong>Fax Number:</strong></td>\n                            <td>{{ list.fax}}</td>\n                            <td><strong>Email Address:</strong></td>\n                            <td>{{ list.email}}</td>\n                        </tr>\n                        <tr>\n                            <td><strong>Bank Name:</strong></td>\n                            <td>{{ list.bankName}}</td>\n                            <td><strong>Account No:</strong></td>\n                            <td>{{ list.bankAccNum}}</td>\n                        </tr>\n                        <tr>\n                            <td><strong>Country:</strong></td>\n                            <td>{{ list.countryName}}</td>\n                            <td><strong>Currency:</strong></td>\n                            <td>{{ list.currency}}</td>\n                        </tr>\n                        <tr>\n                            <td><strong>Taxation No:</strong></td>\n                            <td>{{ list.taxationNumber}}</td>\n                            <td><strong>PAN No:</strong></td>\n                            <td>{{ list.panNumber}}</td>\n                        </tr>\n                        <tr>\n                            <td><strong>BCC Address for all outgoing mails:</strong></td>\n                            <td>{{ list.outGoingMails}}</td>\n                            <td></td>\n                            <td></td>\n                        </tr>\n                    </table>\n                    <div>\n                            <a [class.disabled]=\"permissionsInfo.search('Edit Company') === -1\"\n                            routerLink=\"/pages/company/update-company-list/{{ list._id }}\" style=\"float: right\"\n                            class=\"btn btn-primary\">\n                            <i class=\"fa fa-pencil-square-o\"></i> </a>\n                        <button [disabled]=\"permissionsInfo.search('Delete Company') === -1\"\n                        style=\"float: right;\" class=\"btn btn-danger\" type=\"button\"\n                            (click)=\"showConfirmationMessage(list._id)\">\n                            <i class=\"fa fa-trash\"></i></button>\n\n                    </div>\n                </div>\n            </li>\n        </ul>\n    </div>\n\n</div>\n\n\n"]}