{"version":3,"sources":["webpack:///src/app/pages/dashboard/company-list/company-list.component.ts","webpack:///src/app/pages/dashboard/company-list/company-list.component.html"],"names":["CompanyListComponent","api","fb","ngZone","router","spinner","util","showProgress","showCard","companyListData","Object","individualCompanyData","wholeCompanyData","permissionsInfo","permissionRoleInfo","getList","getAllCompanyList","show","getIndividualData","sessionStorage","getItem","subscribe","data","status","push","setTimeout","hide","err","console","log","message","getListData","company","length","navigateByUrl","companyId","swalWithBootstrapButtons","mixin","customClass","confirmButton","cancelButton","buttonsStyling","fire","title","text","type","showCancelButton","confirmButtonText","cancelButtonText","reverseButtons","then","result","value","removeData","i","_id","setItem","run","window","location","reload","dismiss","DismissReason","cancel","selector","templateUrl","styleUrls"],"mappings":"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","file":"default~company-company-module~dashboard-dashboard-module-es5.js","sourcesContent":["import { Component, OnInit, NgZone, Input } from '@angular/core';\nimport { ApiService } from 'src/app/services/api.service';\nimport { FormBuilder } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport Swal from 'sweetalert2';\nimport { NgxSpinnerService } from 'ngx-spinner';\nimport { UtilitiesService } from 'src/app/utilities/utilities.service';\n\n\n@Component({\n  selector: 'app-company-list',\n  templateUrl: './company-list.component.html',\n  styleUrls: ['./company-list.component.scss']\n})\n\nexport class CompanyListComponent implements OnInit {\n  @Input() showProgress:boolean = false;\n  showCard = {};\n  companyListData:any = Object;\n  individualCompanyData = [];\n  companyData: String;\n  companyId:string;\n  wholeCompanyData = [];\n  permissionsInfo: any;\n\n  constructor(private api: ApiService, public fb: FormBuilder, private ngZone: NgZone,\n    private router: Router,\n    private spinner: NgxSpinnerService,\n    private util: UtilitiesService\n    ) {\n   }\n\n  ngOnInit() {\n  this.permissionsInfo = this.util.permissionRoleInfo;\n  this.getList();\n  this.getAllCompanyList();\n  }\n\n  //Method for show data in the list\n  getList() {\n    try {\n      this.spinner.show();\n      this.api.getIndividualData(sessionStorage.getItem('companyId')).subscribe(data => {\n        if (data.status === 'success' || data.status === 200) {\n         this.individualCompanyData.push(data.data);\n         setTimeout(() => {\n          this.spinner.hide();\n         },1000)\n        }\n      })\n    }\n    catch (err) {\n      console.log(err.message);\n    }\n  }\n\n  // Get All Company Lists\n  getAllCompanyList() {\n    try {\n      this.api.getListData().subscribe(data => {\n        if (data.status === 'success' || data.status === 200) {\n          if(data.company.length === 0){\n            this.spinner.hide();\n            this.router.navigateByUrl(\"/pages/company/add-company\");\n          } else {\n            this.wholeCompanyData = data.company;\n          }\n        }\n      })\n    }\n    catch (err) {\n      console.log(err.message);\n    }\n  }\n\n  //Method for onclick data show when collapse\n  showData(companyId: String) {\n    try {\n      this.showCard[`${companyId}`] = !this.showCard[`${companyId}`];\n    }\n    catch (err) {\n      console.log(err.message);\n    }\n  }\n\n  //Method for remove company list\n  showConfirmationMessage(companyId: String) {\n    try {\n      const swalWithBootstrapButtons = Swal.mixin({\n        customClass: {\n          confirmButton: 'btn btn-success',\n          cancelButton: 'btn btn-danger'\n        },\n        buttonsStyling: false\n      })\n      swalWithBootstrapButtons.fire({\n        title: 'Are you sure?',\n        text: \"You want to delete it\",\n        type: 'warning',\n        showCancelButton: true,\n        confirmButtonText: 'Yes',\n        cancelButtonText: 'No',\n        reverseButtons: true\n      }).then((result) => {\n        if (result.value) {\n          this.api.removeData(companyId).subscribe((data) => {\n            if (data.status === \"success\" || data.status === 200) {\n              if(this.wholeCompanyData.length > 0) {\n                for (let i = 0; i<this.wholeCompanyData.length; i++ ){\n                  if(this.wholeCompanyData[i]._id != companyId){\n                    sessionStorage.setItem('companyId',this.wholeCompanyData[i]._id);\n                    break;\n                  } else {\n                    continue;\n                  }\n                }\n              }\n              swalWithBootstrapButtons.fire(\n                'Deleted!',\n                data.message,\n                'success'\n              )\n              this.ngZone.run(()=>{\n                this.router.navigateByUrl('/pages/dashboard/company-list')\n              })\n              window.location.reload();\n            }\n          })\n        } else if (\n          result.dismiss === Swal.DismissReason.cancel\n        ) {\n          swalWithBootstrapButtons.fire(\n            'Cancelled',\n            'Your list data safe',\n            'error'\n          )\n        }\n      })\n    }\n    catch (err) {\n      console.log(err.message);\n    }\n  }\n\n}\n","\n<div class=\"card\">\n        <ngx-spinner\n        bdColor=\"rgba(51,51,51,0.8)\"\n        size=\"large\"\n        color=\"#fff\"\n        type=\"square-jelly-box\"\n      >\n        <p style=\"font-size: 20px; color: white\">Loading...</p>\n      </ngx-spinner>\n    <div class=\"card-header\" style=\"text-align: center\">\n        <h2>Company List</h2>\n        <a [class.disabled]=\"permissionsInfo.search('Create Company') === -1\"\n        class=\"btn btn-primary\" routerLink=\"/pages/company/add-company\" style=\"float: right;\"><i\n                class=\"fa fa-plus-square\"></i>&nbsp; Add Company</a>\n\n\n    </div>\n\n    <div class=\"panel-body\">\n        <ul class=\"list-group\">\n            <li class=\"list-group-item\" *ngFor=\"let list of individualCompanyData\">\n                <strong><b (click)=\"showData(list._id)\" style=\"cursor: pointer\">{{ list.name }}</b></strong>\n                <div style=\"float: right;\">\n                    <i class=\"dropdown-toggle\" (click)=\"showData(list._id)\"></i>\n                </div>\n                <div class=\"card\" style=\"background-color:ghostwhite\" [hidden]=\"showCard[list._id]\">\n                    <table class=\"table\" style=\"margin: auto\">\n                        <tr>\n                            <td><strong>Name:</strong></td>\n                            <td>{{ list.name }}</td>\n                            <td><strong>Address:</strong></td>\n                            <td>{{ list.address}}</td>\n                        </tr>\n                        <tr>\n                            <td><strong>Domicile:</strong></td>\n                            <td>{{ list.domicile}}</td>\n                            <td><strong>Official Company Number:</strong></td>\n                            <td>{{ list.officialNumber}}</td>\n                        </tr>\n                        <tr>\n                            <td><strong>Fax Number:</strong></td>\n                            <td>{{ list.fax}}</td>\n                            <td><strong>Email Address:</strong></td>\n                            <td>{{ list.email}}</td>\n                        </tr>\n                        <tr>\n                            <td><strong>Bank Name:</strong></td>\n                            <td>{{ list.bankName}}</td>\n                            <td><strong>Account No:</strong></td>\n                            <td>{{ list.bankAccNum}}</td>\n                        </tr>\n                        <tr>\n                            <td><strong>Country:</strong></td>\n                            <td>{{ list.countryName}}</td>\n                            <td><strong>Currency:</strong></td>\n                            <td>{{ list.currency}}</td>\n                        </tr>\n                        <tr>\n                            <td><strong>Taxation No:</strong></td>\n                            <td>{{ list.taxationNumber}}</td>\n                            <td><strong>PAN No:</strong></td>\n                            <td>{{ list.panNumber}}</td>\n                        </tr>\n                        <tr>\n                            <td><strong>BCC Address for all outgoing mails:</strong></td>\n                            <td>{{ list.outGoingMails}}</td>\n                            <td></td>\n                            <td></td>\n                        </tr>\n                    </table>\n                    <div>\n                            <a [class.disabled]=\"permissionsInfo.search('Edit Company') === -1\"\n                            routerLink=\"/pages/company/update-company-list/{{ list._id }}\" style=\"float: right\"\n                            class=\"btn btn-primary\">\n                            <i class=\"fa fa-pencil-square-o\"></i> </a>\n                        <button [disabled]=\"permissionsInfo.search('Delete Company') === -1\"\n                        style=\"float: right;\" class=\"btn btn-danger\" type=\"button\"\n                            (click)=\"showConfirmationMessage(list._id)\">\n                            <i class=\"fa fa-trash\"></i></button>\n\n                    </div>\n                </div>\n            </li>\n        </ul>\n    </div>\n\n</div>\n\n\n"]}