!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{Fb0g:function(t,r,s){"use strict";s.r(r),s.d(r,"SubUserModule",(function(){return Q}));var o,i,a=s("ofXK"),c=s("3Pt+"),b=s("tyNb"),l=s("fXoL"),u=((o=function(){function t(){e(this,t)}return n(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=l.Nb({type:o,selectors:[["app-sub-user"]],decls:1,vars:0,template:function(e,t){1&e&&l.Ub(0,"router-outlet")},directives:[b.g],styles:[""]}),o),d=s("tk/3"),g=s("z6cu"),p=s("JIr8"),f=s("AytR"),m=((i=function(){function t(n){e(this,t),this.http=n,this.endpoint=f.a.apiBaseUrl,this.headers=(new d.c).set("Content-Type","application/x-www-form-urlencoded")}return n(t,[{key:"addSubUsersData",value:function(e){try{e.redirectUrl=f.a.appBaseUrl+"/users/generate-password";var t=localStorage.getItem("token");return this.http.post("".concat(this.endpoint,"/user/add-subuser/").concat(t),e).pipe(Object(p.a)(this.errorMgmt))}catch(n){console.log(n)}}},{key:"getSubUsersListData",value:function(){try{var e=localStorage.getItem("token");return this.http.get("".concat(this.endpoint,"/user/list-subusers/").concat(e)).pipe(Object(p.a)(this.errorMgmt))}catch(t){console.log(t)}}},{key:"removeSubUsersData",value:function(e){try{var t=localStorage.getItem("token");return this.http.delete("".concat(this.endpoint,"/user/delete-subuser/").concat(t,"/").concat(e)).pipe(Object(p.a)(this.errorMgmt))}catch(n){console.log(n)}}},{key:"submitUpdateSubUserData",value:function(e,t){try{var n=localStorage.getItem("token");return this.http.post("".concat(this.endpoint,"/user/update-subuser/").concat(n,"/").concat(t),e).pipe(Object(p.a)(this.errorMgmt))}catch(r){console.log(r)}}},{key:"errorMgmt",value:function(e){try{var t="";return t=e.error instanceof ErrorEvent?e.error.message:"Error code:".concat(e.status,"\nMessage:").concat(t),console.log(t),Object(g.a)(t)}catch(n){console.log(n)}}},{key:"subUserDetails",value:function(e){try{return this.http.get("".concat(this.endpoint,"/user/subuser-details/").concat(e)).pipe(Object(p.a)(this.errorMgmt))}catch(t){console.log(t)}}}]),t}()).\u0275fac=function(e){return new(e||i)(l.dc(d.a))},i.\u0275prov=l.Pb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),h=s("JqCM"),v=s("cnwL"),y=s("8fwW");function M(e,t){if(1&e&&(l.Zb(0,"p",25),l.Zb(1,"strong"),l.Ic(2),l.Yb(),l.Yb()),2&e){var n=l.jc();l.Hb(2),l.Jc(n.errMsg)}}function Z(e,t){if(1&e&&(l.Zb(0,"p",26),l.Zb(1,"strong"),l.Ic(2),l.Yb(),l.Yb()),2&e){var n=l.jc();l.Hb(2),l.Jc(n.successMsg)}}function Y(e,t){if(1&e&&(l.Zb(0,"div",28),l.Ic(1),l.Yb()),2&e){var n=l.jc().$implicit;l.Hb(1),l.Kc(" ",n.message," ")}}function O(e,t){if(1&e&&(l.Zb(0,"div"),l.Gc(1,Y,2,1,"div",27),l.Yb()),2&e){var n=t.$implicit,r=l.jc();l.Hb(1),l.pc("ngIf",r.subUserForm.get("name").hasError(n.type)&&(r.subUserForm.get("name").dirty||r.subUserForm.get("name").touched))}}function C(e,t){if(1&e&&(l.Zb(0,"div",30),l.Ic(1),l.Yb()),2&e){var n=l.jc().$implicit;l.Hb(1),l.Kc(" ",n.message," ")}}function I(e,t){if(1&e&&(l.Zb(0,"div"),l.Gc(1,C,2,1,"div",29),l.Yb()),2&e){var n=t.$implicit,r=l.jc();l.Hb(1),l.pc("ngIf",r.subUserForm.get("phone").hasError(n.type)&&(r.subUserForm.get("phone").dirty||r.subUserForm.get("phone").touched))}}function P(e,t){if(1&e&&(l.Zb(0,"div",30),l.Ic(1),l.Yb()),2&e){var n=l.jc().$implicit;l.Hb(1),l.Kc(" ",n.message," ")}}function U(e,t){if(1&e&&(l.Zb(0,"div"),l.Gc(1,P,2,1,"div",29),l.Yb()),2&e){var n=t.$implicit,r=l.jc();l.Hb(1),l.pc("ngIf",r.subUserForm.get("email").hasError(n.type)&&(r.subUserForm.get("email").dirty||r.subUserForm.get("email").touched))}}function w(e,t){if(1&e&&(l.Zb(0,"option",31),l.Ic(1),l.Yb()),2&e){var n=t.$implicit;l.qc("value",n._id),l.Hb(1),l.Kc(" ",n.title," ")}}function _(e,t){if(1&e&&(l.Zb(0,"div",30),l.Ic(1),l.Yb()),2&e){var n=l.jc().$implicit;l.Hb(1),l.Kc(" ",n.message," ")}}function F(e,t){if(1&e&&(l.Zb(0,"div"),l.Gc(1,_,2,1,"div",32),l.Yb()),2&e){var n=t.$implicit,r=l.jc();l.Hb(1),l.pc("ngIf",r.subUserForm.get("roleId").hasError(n.type)&&(r.subUserForm.get("roleId").dirty||r.subUserForm.get("roleId").touched))}}var k,S=((k=function(){function t(n,r,s,o,i,a,c){e(this,t),this.fb=n,this.api=r,this.ngZone=s,this.router=o,this.spinner=i,this.util=a,this.roleAPI=c,this.successMessage=!1,this.errorMsg=!1,this.genderList=["Male","Female","Others","N/A"],this.validationMessage={name:[{type:"required",message:"Name is required"},{type:"pattern",message:"Not a valid name"}],email:[{type:"required",message:"Email is required"},{type:"pattern",message:"Enter a valid email"}],phone:[{type:"required",message:"Phone No. is required"},{type:"minlength",message:"Not a phone number "},{type:"maxlength",message:"Phone no. is too large"},{type:"pattern",message:"Phone Number not valid"}],roleId:[{type:"required",message:"Role is required"}]}}return n(t,[{key:"ngOnInit",value:function(){this.subUserFormValidation(),this.rolePermission()}},{key:"subUserFormValidation",value:function(){try{this.subUserForm=this.fb.group({name:new c.f("",c.v.compose([c.v.required,c.v.pattern("^[a-zA-Z ]*$")])),phone:new c.f("",c.v.compose([c.v.required,c.v.minLength(10),c.v.maxLength(15),c.v.pattern("^-?[0-9]\\d*(\\.\\d{1,2})?$")])),email:new c.f("",c.v.compose([c.v.required,c.v.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])),roleId:new c.f("",c.v.required)})}catch(e){console.log(e)}}},{key:"subUserFormData",value:function(){var e=this;try{var t=this.util.cleanFormLevelOne(this.subUserForm);this.spinner.show(),this.api.addSubUsersData(t.value).subscribe((function(t){"success"===t.status||200===t.status?(e.successMessage=!0,e.errorMsg=!1,e.successMsg=t.message,e.spinner.hide(),setTimeout((function(){e.handleErrroMessage(),e.ngZone.run((function(){return e.router.navigateByUrl("/pages/sub-user/show-subusers-list")}))}),7e3)):"error"==t.status&&(e.subUserForm.get("email").setValue(""),e.errorMsg=!0,e.successMessage=!1,e.errMsg=t.message,e.spinner.hide(),setTimeout((function(){e.handleErrroMessage()}),2e3))}))}catch(n){console.log(n)}}},{key:"handleErrroMessage",value:function(){this.successMessage=!1,this.errorMsg=!1,this.successMsg="",this.errMsg=""}},{key:"rolePermission",value:function(){var e=this;try{this.roleAPI.listAllRole().subscribe((function(t){"success"===t.status&&(e.rolePermissionInfo=t.data)}))}catch(t){console.log(t)}}}]),t}()).\u0275fac=function(e){return new(e||k)(l.Tb(c.e),l.Tb(m),l.Tb(l.E),l.Tb(b.b),l.Tb(h.c),l.Tb(v.a),l.Tb(y.a))},k.\u0275cmp=l.Nb({type:k,selectors:[["app-add-subusers"]],decls:60,vars:9,consts:[[1,"card","card-user"],["bdColor","rgba(51,51,51,0.8)","size","medium","color","#fff","type","ball-scale-ripple-multiple"],[2,"font-size","20px","color","white"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"col-sm-offset-2"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["role","form","novalidate","",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"form-group"],[1,"col-sm-6","control-label"],[2,"color","darkred"],["type","text","id","inputName","placeholder","Enter Full Name","formControlName","name","required","",1,"form-control"],[4,"ngFor","ngForOf"],["type","text","id","inputPhone","placeholder","Enter Phone Number","formControlName","phone",1,"form-control"],[1,"row"],[1,"col-md-6"],["type","email","id","inputEmail","placeholder","Enter Email ","formControlName","email","required","",1,"form-control"],["Name","branchId","formControlName","roleId",1,"dropdown","dropdown-toggle","form-control"],["ng-selected","true","value","","disabled","","selected","",1,"dropdown-item"],["class","dropdown-item",3,"value",4,"ngFor","ngForOf"],[1,"col-sm-offset-2","col-sm-10"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button","routerLink","../show-subusers-list",1,"btn","btn-danger"],[1,"alert","alert-danger"],[1,"alert","alert-success"],["style","color: red;margin-left: 1%;","style","color: red;margin-left: 1%;",4,"ngIf"],[2,"color","red","margin-left","1%"],["style","color:\xa0red;margin-left:\xa014px;","style","color:\xa0red;margin-left:\xa014px;",4,"ngIf"],[2,"color","red","margin-left","14px"],[1,"dropdown-item",3,"value"],["style","color:\xa0red;margin-left:\xa014px;",4,"ngIf"]],template:function(e,t){1&e&&(l.Zb(0,"div",0),l.Zb(1,"ngx-spinner",1),l.Zb(2,"p",2),l.Ic(3,"Loading..."),l.Yb(),l.Yb(),l.Zb(4,"div",3),l.Zb(5,"h2",4),l.Ic(6,"Sub-Users Details"),l.Yb(),l.Yb(),l.Zb(7,"div",5),l.Zb(8,"div",6),l.Gc(9,M,3,1,"p",7),l.Yb(),l.Zb(10,"div",6),l.Gc(11,Z,3,1,"p",8),l.Yb(),l.Zb(12,"form",9),l.gc("ngSubmit",(function(){return t.subUserFormData()})),l.Zb(13,"div",10),l.Zb(14,"label",11),l.Zb(15,"b"),l.Ic(16,"Full Name:\xa0"),l.Zb(17,"span",12),l.Ic(18,"*"),l.Yb(),l.Yb(),l.Yb(),l.Zb(19,"div",6),l.Ub(20,"input",13),l.Gc(21,O,2,1,"div",14),l.Yb(),l.Yb(),l.Zb(22,"div",10),l.Zb(23,"label",11),l.Zb(24,"b"),l.Ic(25,"Phone Number:\xa0"),l.Zb(26,"span",12),l.Ic(27,"*"),l.Yb(),l.Yb(),l.Yb(),l.Zb(28,"div",6),l.Ub(29,"input",15),l.Gc(30,I,2,1,"div",14),l.Yb(),l.Yb(),l.Zb(31,"div",16),l.Zb(32,"div",17),l.Zb(33,"div",10),l.Zb(34,"label",11),l.Zb(35,"b"),l.Ic(36,"Email:\xa0"),l.Zb(37,"span",12),l.Ic(38,"*"),l.Yb(),l.Yb(),l.Yb(),l.Zb(39,"div",6),l.Ub(40,"input",18),l.Gc(41,U,2,1,"div",14),l.Yb(),l.Yb(),l.Yb(),l.Zb(42,"div",17),l.Zb(43,"div",10),l.Zb(44,"label",11),l.Zb(45,"b"),l.Ic(46,"Assign Role:\xa0"),l.Zb(47,"span",12),l.Ic(48,"*"),l.Yb(),l.Yb(),l.Yb(),l.Zb(49,"select",19),l.Zb(50,"option",20),l.Ic(51,"----------Select Role----------"),l.Yb(),l.Gc(52,w,2,2,"option",21),l.Yb(),l.Gc(53,F,2,1,"div",14),l.Yb(),l.Yb(),l.Yb(),l.Zb(54,"div",10),l.Zb(55,"div",22),l.Zb(56,"button",23),l.Ic(57,"Add Subuser"),l.Yb(),l.Zb(58,"button",24),l.Ic(59,"Cancel"),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.Yb()),2&e&&(l.Hb(9),l.pc("ngIf",t.errorMsg),l.Hb(2),l.pc("ngIf",t.successMessage),l.Hb(1),l.pc("formGroup",t.subUserForm),l.Hb(9),l.pc("ngForOf",t.validationMessage.name),l.Hb(9),l.pc("ngForOf",t.validationMessage.phone),l.Hb(11),l.pc("ngForOf",t.validationMessage.email),l.Hb(11),l.pc("ngForOf",t.rolePermissionInfo),l.Hb(1),l.pc("ngForOf",t.validationMessage.roleId),l.Hb(3),l.pc("disabled",t.subUserForm.invalid))},directives:[h.a,a.m,c.x,c.o,c.i,c.c,c.n,c.g,c.t,a.l,c.u,c.q,c.w,b.c],styles:["h2[_ngcontent-%COMP%]{text-align:center}"]}),k),x=s("PSD3"),H=s.n(x);function N(e,t){if(1&e){var n=l.ac();l.Zb(0,"li",7),l.Zb(1,"strong"),l.Zb(2,"b",8),l.gc("click",(function(){l.Bc(n);var e=t.$implicit;return l.jc().showData(e._id)})),l.Ic(3),l.Yb(),l.Yb(),l.Zb(4,"div",9),l.Zb(5,"i",10),l.gc("click",(function(){l.Bc(n);var e=t.$implicit;return l.jc().showData(e._id)})),l.Yb(),l.Yb(),l.Zb(6,"div",11),l.Zb(7,"table",12),l.Zb(8,"tr"),l.Zb(9,"td"),l.Zb(10,"strong"),l.Ic(11,"Name:"),l.Yb(),l.Yb(),l.Zb(12,"td"),l.Ic(13),l.Yb(),l.Yb(),l.Zb(14,"tr"),l.Zb(15,"td"),l.Zb(16,"strong"),l.Ic(17,"Phone No."),l.Yb(),l.Yb(),l.Zb(18,"td"),l.Ic(19),l.Yb(),l.Yb(),l.Zb(20,"tr"),l.Zb(21,"td"),l.Zb(22,"strong"),l.Ic(23,"Email:"),l.Yb(),l.Yb(),l.Zb(24,"td"),l.Ic(25),l.Yb(),l.Yb(),l.Yb(),l.Zb(26,"div"),l.Zb(27,"a",13),l.Ub(28,"i",14),l.Yb(),l.Zb(29,"button",15),l.gc("click",(function(){l.Bc(n);var e=t.$implicit;return l.jc().deleteSubUserListData(e._id)})),l.Ub(30,"i",16),l.Yb(),l.Yb(),l.Yb(),l.Yb()}if(2&e){var r=t.$implicit,s=l.jc();l.Hb(3),l.Jc((null==r.profile.contactInfo?null:r.profile.contactInfo.firstName)+" "+(null==r.profile.contactInfo?null:r.profile.contactInfo.lastName)),l.Hb(3),l.pc("hidden",s.showCard[r._id]),l.Hb(7),l.Jc((null==r.profile.contactInfo?null:r.profile.contactInfo.firstName)+" "+(null==r.profile.contactInfo?null:r.profile.contactInfo.lastName)),l.Hb(6),l.Jc(r.profile.contactInfo.phone),l.Hb(6),l.Jc(r.local.email),l.Hb(2),l.rc("routerLink","../update-subuser-data/",r._id,"")}}var D,E=((D=function(){function t(n,r,s,o){e(this,t),this.api=n,this.fb=r,this.ngZone=s,this.router=o,this.showCard={},this.subUsersListData=[]}return n(t,[{key:"ngOnInit",value:function(){this.getSubUsersList()}},{key:"getSubUsersList",value:function(){var e=this;try{this.api.getSubUsersListData().subscribe((function(t){if("success"===t.status||200===t.status)if(e.subUsersListData=t.users,0==t.users.length)e.router.navigateByUrl("/pages/sub-user/add-subuser");else for(var n=Object.keys(e.subUsersListData).length,r=0;r<n;r++)e.showCard[e.subUsersListData[r]._id]=!0}))}catch(t){console.log(t)}}},{key:"showData",value:function(e){try{this.showCard[""+e]=!this.showCard[""+e]}catch(t){console.log(t)}}},{key:"deleteSubUserListData",value:function(e){var t=this;try{var n=H.a.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1});n.fire({title:"Are you sure?",text:"You want to delete it",type:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",reverseButtons:!0}).then((function(r){r.value?t.api.removeSubUsersData(e).subscribe((function(e){"success"!==e.status&&200!==e.status||(n.fire("Deleted!",e.message,"success"),t.getSubUsersList())})):r.dismiss===H.a.DismissReason.cancel&&n.fire("Cancelled","Your Data Safe","error")}))}catch(r){console.log(r)}}}]),t}()).\u0275fac=function(e){return new(e||D)(l.Tb(m),l.Tb(c.e),l.Tb(l.E),l.Tb(b.b))},D.\u0275cmp=l.Nb({type:D,selectors:[["app-show-subusers-list"]],decls:10,vars:1,consts:[[1,"card"],[1,"card-header",2,"text-align","center"],["routerLink","../add-subuser",1,"btn","btn-primary",2,"float","right"],[1,"fa","fa-plus"],[1,"panel-body"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],[2,"cursor","pointer",3,"click"],[2,"float","right"],[1,"dropdown-toggle",3,"click"],[1,"card",2,"background-color","ghostwhite",3,"hidden"],[1,"table",2,"margin","auto"],[1,"btn","btn-primary",2,"float","right",3,"routerLink"],[1,"fa","fa-pencil-square-o"],["type","button",1,"btn","btn-danger",2,"float","right",3,"click"],[1,"fa","fa-trash"]],template:function(e,t){1&e&&(l.Zb(0,"div",0),l.Zb(1,"div",1),l.Zb(2,"h2"),l.Ic(3,"Sub-Users List"),l.Yb(),l.Zb(4,"a",2),l.Ub(5,"i",3),l.Ic(6,"\xa0 Add User"),l.Yb(),l.Yb(),l.Zb(7,"div",4),l.Zb(8,"ul",5),l.Gc(9,N,31,6,"li",6),l.Yb(),l.Yb(),l.Yb()),2&e&&(l.Hb(9),l.pc("ngForOf",t.subUsersListData))},directives:[b.e,a.l],styles:["i[_ngcontent-%COMP%]{cursor:pointer}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;text-align:left;overflow:hidden}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:1px solid #ecf0f1;padding:10px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-left:1px solid #ecf0f1;border-right:1px solid #ecf0f1}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#4ecdc4}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(2n)   td[_ngcontent-%COMP%]{background-color:#d9f4f2}table[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#fff}table[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:right;font-weight:700}.mobile-header[_ngcontent-%COMP%]{display:none}@media only screen and (max-width:760px){p[_ngcontent-%COMP%]{display:block;font-weight:700}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:not(.total-val), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:not(:first-child), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:not(:first-child){display:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(2n)   td[_ngcontent-%COMP%]:first-child{background-color:#d9f4f2}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(2n)   td[_ngcontent-%COMP%]:not(:first-child), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(odd)   td[_ngcontent-%COMP%]:first-child{background-color:#fff}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:100%;display:block}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:not(:first-child){width:40%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:not(:first-child), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:not(:first-child){transition:transform .4s ease-out;transform:translateY(-9999px);position:relative;z-index:-1}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:not(:first-child){width:60%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{display:block;cursor:pointer}table[_ngcontent-%COMP%]   tr.total[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:25%;display:inline-block}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.total-val[_ngcontent-%COMP%]{display:inline-block;transform:translateY(0);width:75%}}@media only screen and (max-width:300px){table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:not(:first-child), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:not(:first-child){width:50%;font-size:14px}}"]}),D);function j(e,t){if(1&e&&(l.Zb(0,"p",18),l.Zb(1,"strong"),l.Ic(2),l.Yb(),l.Yb()),2&e){var n=l.jc();l.Hb(2),l.Jc(n.errMsg)}}function L(e,t){if(1&e&&(l.Zb(0,"p",19),l.Zb(1,"strong"),l.Ic(2),l.Yb(),l.Yb()),2&e){var n=l.jc();l.Hb(2),l.Jc(n.successMsg)}}function q(e,t){if(1&e&&(l.Zb(0,"div",21),l.Ic(1),l.Yb()),2&e){var n=l.jc().$implicit;l.Hb(1),l.Kc(" ",n.message," ")}}function T(e,t){if(1&e&&(l.Zb(0,"div"),l.Gc(1,q,2,1,"div",20),l.Yb()),2&e){var n=t.$implicit,r=l.jc();l.Hb(1),l.pc("ngIf",r.updateSubUserForm.get("name").hasError(n.type)&&(r.updateSubUserForm.get("name").dirty||r.updateSubUserForm.get("name").touched))}}function $(e,t){if(1&e&&(l.Zb(0,"div",21),l.Ic(1),l.Yb()),2&e){var n=l.jc().$implicit;l.Hb(1),l.Kc(" ",n.message," ")}}function G(e,t){if(1&e&&(l.Zb(0,"div"),l.Gc(1,$,2,1,"div",20),l.Yb()),2&e){var n=t.$implicit,r=l.jc();l.Hb(1),l.pc("ngIf",r.updateSubUserForm.get("phone").hasError(n.type)&&(r.updateSubUserForm.get("phone").dirty||r.updateSubUserForm.get("phone").touched))}}var A,z,B,J=((A=function(){function t(n,r,s,o,i,a){e(this,t),this.route=n,this.api=r,this.fb=s,this.ngZone=o,this.router=i,this.util=a,this.snapshotParam=String,this.successMsg=String,this.successMessage=!1,this.errMsg=String,this.errorMsg=!1,this.genderList=["Male","Female","Others","N/A"],this.validationMessage={name:[{type:"required",message:"Name Is Required"},{type:"pattern",message:"Not a valid"}],phone:[{type:"required",message:"Phone Number Is Required"},{type:"minlength",message:"Not a phone number "},{type:"maxlength",message:"Phone no. is too large"},{type:"pattern",message:"Phone Number not valid"}],zipCode:[{type:"pattern",message:"ZIP code not valid"}]}}return n(t,[{key:"ngOnInit",value:function(){this.snapshotParam=this.route.snapshot.paramMap.get("subUserId"),this.subUserFormValidation(),this.getSubUserExistingData()}},{key:"subUserFormValidation",value:function(){try{this.updateSubUserForm=this.fb.group({name:new c.f("",c.v.compose([c.v.required,c.v.pattern("^[a-zA-Z ]*$")])),phone:new c.f("",c.v.compose([c.v.required,c.v.minLength(10),c.v.maxLength(15),c.v.pattern("^-?[0-9]\\d*(\\.\\d{1,2})?$")])),birthday:new c.f,zipCode:new c.f("",c.v.compose([c.v.pattern("^[0-9]{6}(?:-[0-9]{4})?$")])),gender:new c.f,email:new c.f})}catch(e){console.log(e)}}},{key:"updateSubUserFormData",value:function(){var e=this;try{var t=this.util.cleanFormLevelOne(this.updateSubUserForm);this.api.submitUpdateSubUserData(t.value,this.snapshotParam).subscribe((function(t){"success"===t.status||200===t.status?(e.getSubUserExistingData(),e.successMessage=!0,e.errorMsg=!1,e.successMsg=t.message,setTimeout((function(){e.handleErrors(),e.router.navigateByUrl("/pages/sub-user/show-subusers-list")}),2e3)):"error"==t.status&&(e.errorMsg=!0,e.successMessage=!1,e.errMsg=t.message,setTimeout((function(){e.handleErrors()}),3e3))}))}catch(n){console.log(n)}}},{key:"getSubUserExistingData",value:function(){var e=this;try{this.api.subUserDetails(this.snapshotParam).subscribe((function(t){"success"===t.status&&(e.updateSubUserForm=e.fb.group({name:new c.f(t.data.name,c.v.compose([c.v.required,c.v.pattern("^[a-zA-Z ]*$")])),phone:new c.f(t.data.phone,c.v.compose([c.v.required,c.v.minLength(10),c.v.maxLength(15),c.v.pattern("^-?[0-9]\\d*(\\.\\d{1,2})?$")])),birthday:new c.f,zipCode:new c.f("",c.v.compose([c.v.pattern("^[0-9]{6}(?:-[0-9]{4})?$")])),gender:new c.f,email:new c.f(t.data.email)}))}))}catch(t){console.log(t)}}},{key:"handleErrors",value:function(){this.errorMsg=!1,this.successMessage=!1,this.errMsg="",this.successMsg=""}}]),t}()).\u0275fac=function(e){return new(e||A)(l.Tb(b.a),l.Tb(m),l.Tb(c.e),l.Tb(l.E),l.Tb(b.b),l.Tb(v.a))},A.\u0275cmp=l.Nb({type:A,selectors:[["app-update-subusers-data"]],decls:42,vars:6,consts:[[1,"card","card-user"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"col-sm-offset-2"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["role","form",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"form-group"],[1,"col-sm-6","control-label"],[2,"color","darkred"],["type","text","id","name","formControlName","name","required","",1,"form-control"],[4,"ngFor","ngForOf"],["type","text","id","phone","formControlName","phone",1,"form-control"],["type","email","id","email","formControlName","email","disabled","",1,"form-control"],[1,"col-sm-offset-2","col-sm-10"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","submit","routerLink","/pages/sub-user/show-subusers-list",1,"btn","btn-danger"],[1,"alert","alert-danger"],[1,"alert","alert-success"],["style","color:\xa0red;margin-left:\xa014px;","style","color:\xa0red;margin-left:\xa014px;",4,"ngIf"],[2,"color","red","margin-left","14px"]],template:function(e,t){1&e&&(l.Zb(0,"div",0),l.Zb(1,"div",1),l.Zb(2,"h2",2),l.Ic(3,"Update Sub-User Details"),l.Yb(),l.Yb(),l.Zb(4,"div",3),l.Zb(5,"div",4),l.Gc(6,j,3,1,"p",5),l.Yb(),l.Zb(7,"div",4),l.Gc(8,L,3,1,"p",6),l.Yb(),l.Zb(9,"form",7),l.gc("ngSubmit",(function(){return t.updateSubUserFormData()})),l.Zb(10,"div",8),l.Ic(11," \xa0"),l.Zb(12,"label",9),l.Zb(13,"b"),l.Ic(14,"Full Name:\xa0"),l.Zb(15,"span",10),l.Ic(16,"*"),l.Yb(),l.Yb(),l.Yb(),l.Zb(17,"div",4),l.Ub(18,"input",11),l.Gc(19,T,2,1,"div",12),l.Yb(),l.Yb(),l.Zb(20,"div",8),l.Ic(21," \xa0"),l.Zb(22,"label",9),l.Zb(23,"b"),l.Ic(24,"Phone Number:\xa0"),l.Zb(25,"span",10),l.Ic(26,"*"),l.Yb(),l.Yb(),l.Yb(),l.Zb(27,"div",4),l.Ub(28,"input",13),l.Gc(29,G,2,1,"div",12),l.Yb(),l.Yb(),l.Zb(30,"div",8),l.Zb(31,"label",9),l.Zb(32,"b"),l.Ic(33,"Email:"),l.Yb(),l.Yb(),l.Zb(34,"div",4),l.Ub(35,"input",14),l.Yb(),l.Yb(),l.Zb(36,"div",8),l.Zb(37,"div",15),l.Zb(38,"button",16),l.Ic(39,"Update"),l.Yb(),l.Zb(40,"button",17),l.Ic(41,"Cancel"),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.Yb(),l.Yb()),2&e&&(l.Hb(6),l.pc("ngIf",t.errorMsg),l.Hb(2),l.pc("ngIf",t.successMessage),l.Hb(1),l.pc("formGroup",t.updateSubUserForm),l.Hb(10),l.pc("ngForOf",t.validationMessage.name),l.Hb(10),l.pc("ngForOf",t.validationMessage.phone),l.Hb(9),l.pc("disabled",t.updateSubUserForm.invalid))},directives:[a.m,c.x,c.o,c.i,c.c,c.n,c.g,c.t,a.l,b.c],styles:["h2[_ngcontent-%COMP%]{text-align:center}"]}),A),R=s("CG1p"),K=[{path:"",component:u,canActivate:[R.a],children:[{path:"add-subuser",component:S},{path:"show-subusers-list",component:E},{path:"update-subuser-data/:subUserId",component:J},{path:"",redirectTo:"show-subusers-list",pathMatch:"full"}]}],V=((B=function t(){e(this,t)}).\u0275mod=l.Rb({type:B}),B.\u0275inj=l.Qb({factory:function(e){return new(e||B)},imports:[[a.c,b.f.forChild(K)]]}),B),Q=((z=function t(){e(this,t)}).\u0275mod=l.Rb({type:z}),z.\u0275inj=l.Qb({factory:function(e){return new(e||z)},providers:[m,R.a],imports:[[a.c,V,c.j,c.s,b.f,d.b,h.b]]}),z)}}])}();
//# sourceMappingURL=28-es5.1fd6b4f2acd4fe2d09f6.js.map